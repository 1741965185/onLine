"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.memoize = exports.memoizeAsync = void 0;
const cache = new Map();
function memoizeAsync(func, key, ttlMs) {
    return async (...args) => {
        if (cache.has(key)) {
            const { value, timestamp } = cache.get(key);
            if (ttlMs === undefined || Date.now() - timestamp <= ttlMs) {
                return value;
            }
        }
        const result = await func(...args);
        cache.set(key, { value: result, timestamp: Date.now() });
        return result;
    };
}
exports.memoizeAsync = memoizeAsync;
function memoize(func, key, ttlMs) {
    return (...args) => {
        if (cache.has(key)) {
            const { value, timestamp } = cache.get(key);
            if (ttlMs === undefined || Date.now() - timestamp <= ttlMs) {
                return value;
            }
        }
        const result = func(...args);
        cache.set(key, { value: result, timestamp: Date.now() });
        return result;
    };
}
exports.memoize = memoize;
//# sourceMappingURL=memoize.js.map