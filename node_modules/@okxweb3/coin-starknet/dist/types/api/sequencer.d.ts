import { BlockIdentifier } from '../../provider/utils';
import { BigNumberish } from '../../utils/num';
import { Abi, AllowArray, BlockNumber, ByteCode, CairoAssembly, CompiledContract, ContractClass, EntryPointType, RawCalldata, Status, TransactionStatus } from '../lib';
export type GetTransactionStatusResponse = {
    tx_status: TransactionStatus;
    block_hash?: string;
    tx_failure_reason?: {
        code: string;
        error_message: string;
    };
};
export type GetContractAddressesResponse = {
    Starknet: string;
    GpsStatementVerifier: string;
};
export type FunctionInvocation = {
    caller_address: string;
    contract_address: string;
    calldata: RawCalldata;
    call_type?: string;
    class_hash?: string;
    selector?: string;
    entry_point_type?: EntryPointType.EXTERNAL;
    result: Array<any>;
    execution_resources: ExecutionResources;
    internal_calls: Array<FunctionInvocation>;
    events: Array<any>;
    messages: Array<any>;
};
export type ExecutionResources = {
    n_steps: number;
    builtin_instance_counter: {
        pedersen_builtin: number;
        range_check_builtin: number;
        bitwise_builtin: number;
        output_builtin: number;
        ecdsa_builtin: number;
        ec_op_builtin?: number;
    };
    n_memory_holes: number;
};
export type TransactionTraceResponse = {
    validate_invocation?: FunctionInvocation;
    function_invocation?: FunctionInvocation;
    fee_transfer_invocation?: FunctionInvocation;
    signature: string[];
};
export type CallL1Handler = {
    from_address: string;
    to_address: string;
    entry_point_selector: string;
    payload: Array<string>;
};
export type DeployedContractItem = {
    address: string;
    class_hash: string;
};
export type SequencerIdentifier = {
    blockHash: string;
} | {
    blockNumber: BlockNumber;
};
export declare namespace Sequencer {
    type DeclareTransaction = {
        type: 'DECLARE';
        sender_address: string;
        contract_class: ContractClass;
        signature?: string[];
        nonce: BigNumberish;
        max_fee?: BigNumberish;
        version?: BigNumberish;
        compiled_class_hash?: string;
    };
    type DeployTransaction = {
        type: 'DEPLOY';
        contract_definition: ContractClass;
        contract_address_salt: BigNumberish;
        constructor_calldata: string[];
        nonce?: BigNumberish;
    };
    type DeployAccountTransaction = {
        type: 'DEPLOY_ACCOUNT';
        class_hash: string;
        contract_address_salt: BigNumberish;
        constructor_calldata: string[];
        signature?: string[];
        max_fee?: BigNumberish;
        version?: BigNumberish;
        nonce?: BigNumberish;
    };
    type InvokeFunctionTransaction = {
        type: 'INVOKE_FUNCTION';
        sender_address: string;
        signature?: string[];
        entry_point_type?: EntryPointType.EXTERNAL;
        calldata?: RawCalldata;
        nonce: BigNumberish;
        max_fee?: BigNumberish;
        version?: BigNumberish;
    };
    type Transaction = DeclareTransaction | DeployTransaction | InvokeFunctionTransaction | DeployAccountTransaction;
    type AddTransactionResponse = {
        transaction_hash: string;
        code?: 'TRANSACTION_RECEIVED';
        address?: string;
        class_hash?: string;
    };
    type GetCodeResponse = {
        bytecode: ByteCode;
        abi: Abi;
    };
    interface InvokeFunctionTransactionResponse extends InvokeFunctionTransaction {
        transaction_hash: string;
        entry_point_selector: string;
    }
    type TransactionResponse = DeclareTransaction | DeployTransaction | InvokeFunctionTransactionResponse;
    type SuccessfulTransactionResponse = {
        status: Status;
        transaction: TransactionResponse;
        block_hash: string;
        block_number: BlockNumber;
        transaction_index: number;
    };
    type FailedTransactionResponse = {
        status: 'REJECTED';
        transaction_failure_reason: {
            code: string;
            error_message: string;
        };
        transaction: TransactionResponse;
    };
    type GetTransactionResponse = SuccessfulTransactionResponse | FailedTransactionResponse;
    type TransactionReceiptResponse = SuccessfulTransactionReceiptResponse | FailedTransactionReceiptResponse;
    type SuccessfulTransactionReceiptResponse = {
        status: Status;
        transaction_hash: string;
        transaction_index: number;
        block_hash: string;
        block_number: BlockNumber;
        l2_to_l1_messages: string[];
        events: string[];
        actual_fee: string;
        execution_resources: ExecutionResources;
    };
    type FailedTransactionReceiptResponse = {
        status: 'REJECTED';
        transaction_failure_reason: {
            code: string;
            error_message: string;
        };
        transaction_hash: string;
        l2_to_l1_messages: string[];
        events: string[];
    };
    type GetBlockResponse = {
        block_number: number;
        state_root: string;
        block_hash: string;
        transactions: {
            [txHash: string]: TransactionResponse;
        };
        timestamp: number;
        transaction_receipts: {
            [txHash: string]: {
                block_hash: string;
                transaction_hash: string;
                l2_to_l1_messages: {
                    to_address: string;
                    payload: string[];
                    from_address: string;
                }[];
                block_number: BlockNumber;
                status: Status;
                transaction_index: number;
            };
        };
        parent_block_hash: string;
        status: Status;
        gas_price: string;
        sequencer_address: string;
        starknet_version: string;
    };
    type CallContractTransaction = {
        calldata?: RawCalldata;
        max_fee?: BigNumberish;
        version?: BigNumberish;
        entry_point_selector: string;
    } & ({
        sender_address: string;
        signature: string[];
    } | {
        contract_address: string;
        signature?: never;
    });
    type CallContractResponse = {
        result: string[];
    };
    type InvokeEstimateFee = Omit<InvokeFunctionTransaction, 'max_fee' | 'entry_point_type'>;
    type DeclareEstimateFee = Omit<DeclareTransaction, 'max_fee'>;
    type DeployAccountEstimateFee = Omit<DeployAccountTransaction, 'max_fee'>;
    type DeployEstimateFee = DeployTransaction;
    type EstimateFeeRequest = InvokeEstimateFee | DeclareEstimateFee | DeployEstimateFee | DeployAccountEstimateFee;
    type TransactionSimulationResponse = {
        trace: TransactionTraceResponse;
        fee_estimation: Sequencer.EstimateFeeResponse;
    };
    type SimulateTransaction = Omit<InvokeFunctionTransaction, 'entry_point_type'>;
    type EstimateFeeRequestBulk = AllowArray<InvokeEstimateFee | DeclareEstimateFee | DeployEstimateFee | DeployAccountEstimateFee>;
    type EstimateFeeResponse = {
        overall_fee: number;
        gas_price: number;
        gas_usage: number;
        uint: string;
    } | {
        amount: bigint;
        unit: string;
    };
    type EstimateFeeResponseBulk = AllowArray<EstimateFeeResponse>;
    type BlockTransactionTracesResponse = {
        traces: Array<TransactionTraceResponse & {
            transaction_hash: string;
        }>;
    };
    type Storage = string;
    type StateUpdateResponse = {
        block_hash: string;
        new_root: string;
        old_root: string;
        state_diff: {
            storage_diffs: StorageDiffs;
            nonces: Nonces;
            deployed_contracts: Array<DeployedContractItem>;
            old_declared_contracts: OldDeclaredContracts;
            declared_classes: DeclaredClasses;
            replaced_classes: ReplacedClasses;
        };
    };
    type StorageDiffs = {
        [address: string]: Array<StateDiffItem>;
    };
    type StateDiffItem = {
        key: string;
        value: string;
    };
    type Nonces = {
        [address: string]: Nonce;
    };
    type Nonce = string;
    type DeployedContracts = DeployedContractItem[];
    type OldDeclaredContracts = string[];
    type DeclaredClasses = DeclaredClass[];
    type DeclaredClass = {
        class_hash: string;
        compiled_class_hash: string;
    };
    type ReplacedClasses = string[];
    type Endpoints = {
        get_contract_addresses: {
            QUERY: never;
            REQUEST: never;
            RESPONSE: GetContractAddressesResponse;
        };
        add_transaction: {
            QUERY: never;
            REQUEST: Transaction;
            RESPONSE: AddTransactionResponse;
        };
        get_transaction: {
            QUERY: {
                transactionHash: string;
            };
            REQUEST: never;
            RESPONSE: GetTransactionResponse;
        };
        get_transaction_status: {
            QUERY: {
                transactionHash: string;
            };
            REQUEST: never;
            RESPONSE: GetTransactionStatusResponse;
        };
        get_transaction_trace: {
            QUERY: {
                transactionHash: string;
            };
            REQUEST: never;
            RESPONSE: TransactionTraceResponse;
        };
        get_transaction_receipt: {
            QUERY: {
                transactionHash: string;
            };
            REQUEST: never;
            RESPONSE: TransactionReceiptResponse;
        };
        get_nonce: {
            QUERY: {
                contractAddress: string;
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: Nonce;
        };
        get_storage_at: {
            QUERY: {
                contractAddress: string;
                key: BigNumberish;
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: Storage;
        };
        get_code: {
            QUERY: {
                contractAddress: string;
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: GetCodeResponse;
        };
        get_block: {
            QUERY: {
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: GetBlockResponse;
        };
        call_contract: {
            QUERY: {
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: CallContractTransaction;
            RESPONSE: CallContractResponse;
        };
        estimate_fee: {
            QUERY: {
                blockIdentifier: BlockIdentifier;
                skipValidate: boolean;
            };
            REQUEST: EstimateFeeRequest;
            RESPONSE: EstimateFeeResponse;
        };
        get_class_by_hash: {
            QUERY: {
                classHash: string;
                blockIdentifier?: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: CompiledContract;
        };
        get_class_hash_at: {
            QUERY: {
                contractAddress: string;
                blockIdentifier?: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: string;
        };
        get_state_update: {
            QUERY: {
                blockHash?: string;
                blockNumber?: BlockNumber;
            };
            REQUEST: never;
            RESPONSE: StateUpdateResponse;
        };
        get_full_contract: {
            QUERY: {
                contractAddress: string;
                blockIdentifier?: BlockIdentifier;
            };
            REQUEST: never;
            RESPONSE: CompiledContract;
        };
        estimate_message_fee: {
            QUERY: any;
            REQUEST: any;
            RESPONSE: EstimateFeeResponse;
        };
        simulate_transaction: {
            QUERY: {
                blockIdentifier: BlockIdentifier;
                skipValidate: boolean;
            };
            REQUEST: SimulateTransaction;
            RESPONSE: TransactionSimulationResponse;
        };
        estimate_fee_bulk: {
            QUERY: {
                blockIdentifier: BlockIdentifier;
            };
            REQUEST: EstimateFeeRequestBulk;
            RESPONSE: EstimateFeeResponseBulk;
        };
        get_block_traces: {
            QUERY: {
                blockHash?: string;
                blockNumber?: BlockNumber;
            };
            REQUEST: never;
            RESPONSE: BlockTransactionTracesResponse;
        };
        get_compiled_class_by_class_hash: {
            QUERY: {
                classHash: string;
                blockIdentifier?: BlockIdentifier;
            };
            REQUEST: any;
            RESPONSE: CairoAssembly;
        };
    };
}
