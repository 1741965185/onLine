"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseContract = exports.createSierraContractClass = exports.parseCalldata = exports.wait = void 0;
const contract_1 = require("./contract");
const hash_1 = require("./hash");
const num_1 = require("./num");
const stark_1 = require("./stark");
const index_1 = require("../index");
function wait(delay) {
    return new Promise((res) => {
        setTimeout(res, delay);
    });
}
exports.wait = wait;
function parseCalldata(calldata = []) {
    return calldata.map((data) => {
        if (typeof data === 'string' && (0, num_1.isHex)(data)) {
            return data;
        }
        return (0, num_1.toHex)(data);
    });
}
exports.parseCalldata = parseCalldata;
function createSierraContractClass(contract) {
    const result = { ...contract };
    delete result.sierra_program_debug_info;
    result.abi = (0, hash_1.formatSpaces)(index_1.json.stringify(contract.abi));
    result.sierra_program = (0, hash_1.formatSpaces)(index_1.json.stringify(contract.sierra_program));
    result.sierra_program = (0, stark_1.compressProgram)(result.sierra_program);
    return result;
}
exports.createSierraContractClass = createSierraContractClass;
function parseContract(contract) {
    const parsedContract = typeof contract === 'string' ? index_1.json.parse(contract) : contract;
    if (!(0, contract_1.isSierra)(contract)) {
        return {
            ...parsedContract,
            ...('program' in parsedContract && { program: (0, stark_1.compressProgram)(parsedContract.program) }),
        };
    }
    return createSierraContractClass(parsedContract);
}
exports.parseContract = parseContract;
//# sourceMappingURL=provider.js.map