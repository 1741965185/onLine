{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-ethereum/dist/sdk/eth-sig-util/sign-typed-data.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-ethereum/dist/sdk/eth-sig-util/sign-typed-data.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1sYXN0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QtaW5kZXguanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnR5cGVkLWFycmF5LnRvLXJldmVyc2VkLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkudG8tc29ydGVkLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkud2l0aC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmF0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtbGFzdC1pbmRleC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkudG8tcmV2ZXJzZWQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC50eXBlZC1hcnJheS50by1zb3J0ZWQuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC50eXBlZC1hcnJheS53aXRoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy50eXBlZFNpZ25hdHVyZUhhc2ggPSBleHBvcnRzLlR5cGVkRGF0YVV0aWxzID0gZXhwb3J0cy5UWVBFRF9NRVNTQUdFX1NDSEVNQSA9IGV4cG9ydHMuZ2V0TGVuZ3RoID0gZXhwb3J0cy5nZXRFcnJvclN0YWNrID0gZXhwb3J0cy5wYWRTdGFydCA9IGV4cG9ydHMuYmlnSW50VG9CeXRlcyA9IGV4cG9ydHMucmVtb3ZlMHggPSBleHBvcnRzLmFkZDB4ID0gZXhwb3J0cy5oZXhUb0J5dGVzID0gZXhwb3J0cy5pc1N0cmljdEhleFN0cmluZyA9IGV4cG9ydHMuYXNzZXJ0SXNIZXhTdHJpbmcgPSBleHBvcnRzLmNvbmNhdEJ5dGVzID0gZXhwb3J0cy52YWx1ZVRvQnl0ZXMgPSBleHBvcnRzLmlzQnl0ZXMgPSBleHBvcnRzLnN0cmluZ1RvQnl0ZXMgPSBleHBvcnRzLm51bWJlclRvQnl0ZXMgPSBleHBvcnRzLmFzc2VydCA9IGV4cG9ydHMuU2lnblR5cGVkRGF0YVZlcnNpb24gPSBleHBvcnRzLlN0cmljdEhleFN0cnVjdCA9IHZvaWQgMDsKY29uc3QgZXRoZXJldW1qc191dGlsXzEgPSByZXF1aXJlKCIuLi9ldGhlcmV1bWpzLXV0aWwiKTsKY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoIi4vaW5kZXgiKTsKY29uc3QgY3J5cHRvX2xpYl8xID0gcmVxdWlyZSgiQG9reHdlYjMvY3J5cHRvLWxpYiIpOwpjb25zdCBzdXBlcnN0cnVjdF8xID0gcmVxdWlyZSgic3VwZXJzdHJ1Y3QiKTsKY29uc3QgSEVYX01JTklNVU1fTlVNQkVSX0NIQVJBQ1RFUiA9IDQ4Owpjb25zdCBIRVhfTUFYSU1VTV9OVU1CRVJfQ0hBUkFDVEVSID0gNTg7CmNvbnN0IEhFWF9DSEFSQUNURVJfT0ZGU0VUID0gODc7CmNvbnN0IE5VTUJFUl9SRUdFWCA9IC9edT9pbnQoPzxsZW5ndGg+WzAtOV0qKT8kL3U7CmNvbnN0IEJVRkZFUl9XSURUSCA9IDMyOwpleHBvcnRzLlN0cmljdEhleFN0cnVjdCA9ICgwLCBzdXBlcnN0cnVjdF8xLnBhdHRlcm4pKCgwLCBzdXBlcnN0cnVjdF8xLnN0cmluZykoKSwgL14weFswLTlhLWZdKyQvaXUpOwp2YXIgU2lnblR5cGVkRGF0YVZlcnNpb247CihmdW5jdGlvbiAoU2lnblR5cGVkRGF0YVZlcnNpb24pIHsKICBTaWduVHlwZWREYXRhVmVyc2lvblsiVjEiXSA9ICJWMSI7CiAgU2lnblR5cGVkRGF0YVZlcnNpb25bIlYzIl0gPSAiVjMiOwogIFNpZ25UeXBlZERhdGFWZXJzaW9uWyJWNCJdID0gIlY0IjsKfSkoU2lnblR5cGVkRGF0YVZlcnNpb24gPSBleHBvcnRzLlNpZ25UeXBlZERhdGFWZXJzaW9uIHx8IChleHBvcnRzLlNpZ25UeXBlZERhdGFWZXJzaW9uID0ge30pKTsKZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgZXJyb3JNc2cpIHsKICBpZiAoIWNvbmRpdGlvbikgewogICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTsKICB9Cn0KZXhwb3J0cy5hc3NlcnQgPSBhc3NlcnQ7CmZ1bmN0aW9uIG51bWJlclRvQnl0ZXModmFsdWUpIHsKICBhc3NlcnQodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJywgJ1ZhbHVlIG11c3QgYmUgYSBudW1iZXIuJyk7CiAgYXNzZXJ0KHZhbHVlID49IDAsICdWYWx1ZSBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4nKTsKICBhc3NlcnQoTnVtYmVyLmlzU2FmZUludGVnZXIodmFsdWUpLCAnVmFsdWUgaXMgbm90IGEgc2FmZSBpbnRlZ2VyLiBVc2UgYGJpZ0ludFRvQnl0ZXNgIGluc3RlYWQuJyk7CiAgY29uc3QgaGV4YWRlY2ltYWwgPSB2YWx1ZS50b1N0cmluZygxNik7CiAgcmV0dXJuIGhleFRvQnl0ZXMoaGV4YWRlY2ltYWwpOwp9CmV4cG9ydHMubnVtYmVyVG9CeXRlcyA9IG51bWJlclRvQnl0ZXM7CmZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXModmFsdWUpIHsKICBhc3NlcnQodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJywgJ1ZhbHVlIG11c3QgYmUgYSBzdHJpbmcuJyk7CiAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh2YWx1ZSk7Cn0KZXhwb3J0cy5zdHJpbmdUb0J5dGVzID0gc3RyaW5nVG9CeXRlczsKZnVuY3Rpb24gaXNCeXRlcyh2YWx1ZSkgewogIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7Cn0KZXhwb3J0cy5pc0J5dGVzID0gaXNCeXRlczsKZnVuY3Rpb24gdmFsdWVUb0J5dGVzKHZhbHVlKSB7CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2JpZ2ludCcpIHsKICAgIHJldHVybiBiaWdJbnRUb0J5dGVzKHZhbHVlKTsKICB9CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgIHJldHVybiBudW1iZXJUb0J5dGVzKHZhbHVlKTsKICB9CiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCcweCcpKSB7CiAgICAgIHJldHVybiBoZXhUb0J5dGVzKHZhbHVlKTsKICAgIH0KICAgIHJldHVybiBzdHJpbmdUb0J5dGVzKHZhbHVlKTsKICB9CiAgaWYgKGlzQnl0ZXModmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIHRocm93IG5ldyBUeXBlRXJyb3IoYFVuc3VwcG9ydGVkIHZhbHVlIHR5cGU6ICIke3R5cGVvZiB2YWx1ZX0iLmApOwp9CmV4cG9ydHMudmFsdWVUb0J5dGVzID0gdmFsdWVUb0J5dGVzOwpmdW5jdGlvbiBjb25jYXRCeXRlcyh2YWx1ZXMpIHsKICBjb25zdCBub3JtYWxpemVkVmFsdWVzID0gbmV3IEFycmF5KHZhbHVlcy5sZW5ndGgpOwogIGxldCBieXRlTGVuZ3RoID0gMDsKICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgY29uc3QgdmFsdWUgPSB2YWx1ZVRvQnl0ZXModmFsdWVzW2ldKTsKICAgIG5vcm1hbGl6ZWRWYWx1ZXNbaV0gPSB2YWx1ZTsKICAgIGJ5dGVMZW5ndGggKz0gdmFsdWUubGVuZ3RoOwogIH0KICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ5dGVMZW5ndGgpOwogIGZvciAobGV0IGkgPSAwLCBvZmZzZXQgPSAwOyBpIDwgbm9ybWFsaXplZFZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgYnl0ZXMuc2V0KG5vcm1hbGl6ZWRWYWx1ZXNbaV0sIG9mZnNldCk7CiAgICBvZmZzZXQgKz0gbm9ybWFsaXplZFZhbHVlc1tpXS5sZW5ndGg7CiAgfQogIHJldHVybiBieXRlczsKfQpleHBvcnRzLmNvbmNhdEJ5dGVzID0gY29uY2F0Qnl0ZXM7CmZ1bmN0aW9uIGFzc2VydElzSGV4U3RyaW5nKHZhbHVlKSB7CiAgYXNzZXJ0KCgwLCBldGhlcmV1bWpzX3V0aWxfMS5pc0hleFN0cmluZykodmFsdWUpLCAnVmFsdWUgbXVzdCBiZSBhIGhleGFkZWNpbWFsIHN0cmluZy4nKTsKfQpleHBvcnRzLmFzc2VydElzSGV4U3RyaW5nID0gYXNzZXJ0SXNIZXhTdHJpbmc7CmZ1bmN0aW9uIGlzU3RyaWN0SGV4U3RyaW5nKHZhbHVlKSB7CiAgcmV0dXJuICgwLCBzdXBlcnN0cnVjdF8xLmlzKSh2YWx1ZSwgZXhwb3J0cy5TdHJpY3RIZXhTdHJ1Y3QpOwp9CmV4cG9ydHMuaXNTdHJpY3RIZXhTdHJpbmcgPSBpc1N0cmljdEhleFN0cmluZzsKZnVuY3Rpb24gaGV4VG9CeXRlcyh2YWx1ZSkgewogIHZhciBfdmFsdWUkdG9Mb3dlckNhc2U7CiAgaWYgKCh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWx1ZSR0b0xvd2VyQ2FzZSA9IHZhbHVlLnRvTG93ZXJDYXNlKSA9PT0gbnVsbCB8fCBfdmFsdWUkdG9Mb3dlckNhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZSR0b0xvd2VyQ2FzZS5jYWxsKHZhbHVlKSkgPT09ICcweCcpIHsKICAgIHJldHVybiBuZXcgVWludDhBcnJheSgpOwogIH0KICBhc3NlcnRJc0hleFN0cmluZyh2YWx1ZSk7CiAgY29uc3Qgc3RyaXBwZWRWYWx1ZSA9IHJlbW92ZTB4KHZhbHVlKS50b0xvd2VyQ2FzZSgpOwogIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9IHN0cmlwcGVkVmFsdWUubGVuZ3RoICUgMiA9PT0gMCA/IHN0cmlwcGVkVmFsdWUgOiBgMCR7c3RyaXBwZWRWYWx1ZX1gOwogIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobm9ybWFsaXplZFZhbHVlLmxlbmd0aCAvIDIpOwogIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpKyspIHsKICAgIGNvbnN0IGMxID0gbm9ybWFsaXplZFZhbHVlLmNoYXJDb2RlQXQoaSAqIDIpOwogICAgY29uc3QgYzIgPSBub3JtYWxpemVkVmFsdWUuY2hhckNvZGVBdChpICogMiArIDEpOwogICAgY29uc3QgbjEgPSBjMSAtIChjMSA8IEhFWF9NQVhJTVVNX05VTUJFUl9DSEFSQUNURVIgPyBIRVhfTUlOSU1VTV9OVU1CRVJfQ0hBUkFDVEVSIDogSEVYX0NIQVJBQ1RFUl9PRkZTRVQpOwogICAgY29uc3QgbjIgPSBjMiAtIChjMiA8IEhFWF9NQVhJTVVNX05VTUJFUl9DSEFSQUNURVIgPyBIRVhfTUlOSU1VTV9OVU1CRVJfQ0hBUkFDVEVSIDogSEVYX0NIQVJBQ1RFUl9PRkZTRVQpOwogICAgYnl0ZXNbaV0gPSBuMSAqIDE2ICsgbjI7CiAgfQogIHJldHVybiBieXRlczsKfQpleHBvcnRzLmhleFRvQnl0ZXMgPSBoZXhUb0J5dGVzOwpmdW5jdGlvbiBhZGQweChoZXhhZGVjaW1hbCkgewogIGlmIChoZXhhZGVjaW1hbC5zdGFydHNXaXRoKCcweCcpKSB7CiAgICByZXR1cm4gaGV4YWRlY2ltYWw7CiAgfQogIGlmIChoZXhhZGVjaW1hbC5zdGFydHNXaXRoKCcwWCcpKSB7CiAgICByZXR1cm4gYDB4JHtoZXhhZGVjaW1hbC5zdWJzdHJpbmcoMil9YDsKICB9CiAgcmV0dXJuIGAweCR7aGV4YWRlY2ltYWx9YDsKfQpleHBvcnRzLmFkZDB4ID0gYWRkMHg7CmZ1bmN0aW9uIHJlbW92ZTB4KGhleGFkZWNpbWFsKSB7CiAgaWYgKGhleGFkZWNpbWFsLnN0YXJ0c1dpdGgoJzB4JykgfHwgaGV4YWRlY2ltYWwuc3RhcnRzV2l0aCgnMFgnKSkgewogICAgcmV0dXJuIGhleGFkZWNpbWFsLnN1YnN0cmluZygyKTsKICB9CiAgcmV0dXJuIGhleGFkZWNpbWFsOwp9CmV4cG9ydHMucmVtb3ZlMHggPSByZW1vdmUweDsKZnVuY3Rpb24gYmlnSW50VG9CeXRlcyh2YWx1ZSkgewogIGFzc2VydCh0eXBlb2YgdmFsdWUgPT09ICdiaWdpbnQnLCAnVmFsdWUgbXVzdCBiZSBhIGJpZ2ludC4nKTsKICBhc3NlcnQodmFsdWUgPj0gQmlnSW50KDApLCAnVmFsdWUgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBiaWdpbnQuJyk7CiAgY29uc3QgaGV4YWRlY2ltYWwgPSB2YWx1ZS50b1N0cmluZygxNik7CiAgcmV0dXJuIGhleFRvQnl0ZXMoaGV4YWRlY2ltYWwpOwp9CmV4cG9ydHMuYmlnSW50VG9CeXRlcyA9IGJpZ0ludFRvQnl0ZXM7CmZ1bmN0aW9uIHBhZFN0YXJ0KGJ1ZmZlcikgewogIGxldCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IEJVRkZFUl9XSURUSDsKICBjb25zdCBwYWRkaW5nID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5tYXgobGVuZ3RoIC0gYnVmZmVyLmxlbmd0aCwgMCkpLmZpbGwoMHgwMCk7CiAgcmV0dXJuIGNvbmNhdEJ5dGVzKFtwYWRkaW5nLCBidWZmZXJdKTsKfQpleHBvcnRzLnBhZFN0YXJ0ID0gcGFkU3RhcnQ7CjsKY29uc3QgZ2V0RXJyb3JTdGFjayA9IGVycm9yID0+IHsKICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikgewogICAgcmV0dXJuIGVycm9yLnN0YWNrOwogIH0KICByZXR1cm4gdW5kZWZpbmVkOwp9OwpleHBvcnRzLmdldEVycm9yU3RhY2sgPSBnZXRFcnJvclN0YWNrOwpjb25zdCBnZXRMZW5ndGggPSB0eXBlID0+IHsKICB2YXIgX21hdGNoJGdyb3VwczsKICBpZiAodHlwZSA9PT0gJ2ludCcgfHwgdHlwZSA9PT0gJ3VpbnQnKSB7CiAgICByZXR1cm4gMjU2OwogIH0KICBjb25zdCBtYXRjaCA9IHR5cGUubWF0Y2goTlVNQkVSX1JFR0VYKTsKICBhc3NlcnQobWF0Y2ggPT09IG51bGwgfHwgbWF0Y2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfbWF0Y2gkZ3JvdXBzID0gbWF0Y2guZ3JvdXBzKSA9PT0gbnVsbCB8fCBfbWF0Y2gkZ3JvdXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbWF0Y2gkZ3JvdXBzLmxlbmd0aCwgYEludmFsaWQgbnVtYmVyIHR5cGUuIEV4cGVjdGVkIGEgbnVtYmVyIHR5cGUsIGJ1dCByZWNlaXZlZCAiJHt0eXBlfSIuYCk7CiAgY29uc3QgbGVuZ3RoID0gcGFyc2VJbnQobWF0Y2guZ3JvdXBzLmxlbmd0aCwgMTApOwogIGFzc2VydChsZW5ndGggPj0gOCAmJiBsZW5ndGggPD0gMjU2LCBgSW52YWxpZCBudW1iZXIgbGVuZ3RoLiBFeHBlY3RlZCBhIG51bWJlciBiZXR3ZWVuIDggYW5kIDI1NiwgYnV0IHJlY2VpdmVkICIke3R5cGV9Ii5gKTsKICBhc3NlcnQobGVuZ3RoICUgOCA9PT0gMCwgYEludmFsaWQgbnVtYmVyIGxlbmd0aC4gRXhwZWN0ZWQgYSBtdWx0aXBsZSBvZiA4LCBidXQgcmVjZWl2ZWQgIiR7dHlwZX0iLmApOwogIHJldHVybiBsZW5ndGg7Cn07CmV4cG9ydHMuZ2V0TGVuZ3RoID0gZ2V0TGVuZ3RoOwpleHBvcnRzLlRZUEVEX01FU1NBR0VfU0NIRU1BID0gewogIHR5cGU6ICdvYmplY3QnLAogIHByb3BlcnRpZXM6IHsKICAgIHR5cGVzOiB7CiAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogewogICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgaXRlbXM6IHsKICAgICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogewogICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLAogICAgICAgICAgICAgIGVudW06IGdldFNvbGlkaXR5VHlwZXMoKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgcmVxdWlyZWQ6IFsnbmFtZScsICd0eXBlJ10KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBwcmltYXJ5VHlwZTogewogICAgICB0eXBlOiAnc3RyaW5nJwogICAgfSwKICAgIGRvbWFpbjogewogICAgICB0eXBlOiAnb2JqZWN0JwogICAgfSwKICAgIG1lc3NhZ2U6IHsKICAgICAgdHlwZTogJ29iamVjdCcKICAgIH0KICB9LAogIHJlcXVpcmVkOiBbJ3R5cGVzJywgJ3ByaW1hcnlUeXBlJywgJ2RvbWFpbicsICdtZXNzYWdlJ10KfTsKZnVuY3Rpb24gZ2V0U29saWRpdHlUeXBlcygpIHsKICBjb25zdCB0eXBlcyA9IFsnYm9vbCcsICdhZGRyZXNzJywgJ3N0cmluZycsICdieXRlcyddOwogIGNvbnN0IGludHMgPSBBcnJheS5mcm9tKG5ldyBBcnJheSgzMikpLm1hcCgoXywgaW5kZXgpID0+IGBpbnQkeyhpbmRleCArIDEpICogOH1gKTsKICBjb25zdCB1aW50cyA9IEFycmF5LmZyb20obmV3IEFycmF5KDMyKSkubWFwKChfLCBpbmRleCkgPT4gYHVpbnQkeyhpbmRleCArIDEpICogOH1gKTsKICBjb25zdCBieXRlcyA9IEFycmF5LmZyb20obmV3IEFycmF5KDMyKSkubWFwKChfLCBpbmRleCkgPT4gYGJ5dGVzJHtpbmRleCArIDF9YCk7CiAgcmV0dXJuIFsuLi50eXBlcywgLi4uaW50cywgLi4udWludHMsIC4uLmJ5dGVzXTsKfQpmdW5jdGlvbiB2YWxpZGF0ZVZlcnNpb24odmVyc2lvbiwgYWxsb3dlZFZlcnNpb25zKSB7CiAgaWYgKCFPYmplY3Qua2V5cyhTaWduVHlwZWREYXRhVmVyc2lvbikuaW5jbHVkZXModmVyc2lvbikpIHsKICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB2ZXJzaW9uOiAnJHt2ZXJzaW9ufSdgKTsKICB9IGVsc2UgaWYgKGFsbG93ZWRWZXJzaW9ucyAmJiAhYWxsb3dlZFZlcnNpb25zLmluY2x1ZGVzKHZlcnNpb24pKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoYFNpZ25UeXBlZERhdGFWZXJzaW9uIG5vdCBhbGxvd2VkOiAnJHt2ZXJzaW9ufScuIEFsbG93ZWQgdmVyc2lvbnMgYXJlOiAke2FsbG93ZWRWZXJzaW9ucy5qb2luKCcsICcpfWApOwogIH0KfQpmdW5jdGlvbiByZWFsbHlTdHJhbmdlQWRkcmVzc1RvQnl0ZXMoYWRkcmVzcykgewogIGxldCBhZGRyZXNzVmFsdWUgPSBCaWdJbnQoMCk7CiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRyZXNzLmxlbmd0aDsgaSsrKSB7CiAgICBjb25zdCBjaGFyYWN0ZXIgPSBCaWdJbnQoYWRkcmVzcy5jaGFyQ29kZUF0KGkpIC0gNDgpOwogICAgYWRkcmVzc1ZhbHVlICo9IEJpZ0ludCgxMCk7CiAgICBpZiAoY2hhcmFjdGVyID49IDQ5KSB7CiAgICAgIGFkZHJlc3NWYWx1ZSArPSBjaGFyYWN0ZXIgLSBCaWdJbnQoNDkpICsgQmlnSW50KDB4YSk7CiAgICB9IGVsc2UgaWYgKGNoYXJhY3RlciA+PSAxNykgewogICAgICBhZGRyZXNzVmFsdWUgKz0gY2hhcmFjdGVyIC0gQmlnSW50KDE3KSArIEJpZ0ludCgweGEpOwogICAgfSBlbHNlIHsKICAgICAgYWRkcmVzc1ZhbHVlICs9IGNoYXJhY3RlcjsKICAgIH0KICB9CiAgcmV0dXJuIHBhZFN0YXJ0KGJpZ0ludFRvQnl0ZXMoYWRkcmVzc1ZhbHVlKSwgMjApOwp9CmZ1bmN0aW9uIHBhcnNlTnVtYmVyKHR5cGUsIHZhbHVlKSB7CiAgYXNzZXJ0KHZhbHVlICE9PSBudWxsLCBgVW5hYmxlIHRvIGVuY29kZSB2YWx1ZTogSW52YWxpZCBudW1iZXIuIEV4cGVjdGVkIGEgdmFsaWQgbnVtYmVyIHZhbHVlLCBidXQgcmVjZWl2ZWQgIiR7dmFsdWV9Ii5gKTsKICBjb25zdCBiaWdJbnRWYWx1ZSA9IEJpZ0ludCh2YWx1ZSk7CiAgY29uc3QgbGVuZ3RoID0gKDAsIGV4cG9ydHMuZ2V0TGVuZ3RoKSh0eXBlKTsKICBjb25zdCBtYXhWYWx1ZSA9IEJpZ0ludCgyKSAqKiBCaWdJbnQobGVuZ3RoKSAtIEJpZ0ludCgxKTsKICBhc3NlcnQoYmlnSW50VmFsdWUgPj0gLW1heFZhbHVlICYmIGJpZ0ludFZhbHVlIDw9IG1heFZhbHVlLCBgVW5hYmxlIHRvIGVuY29kZSB2YWx1ZTogTnVtYmVyICIke3ZhbHVlfSIgaXMgb3V0IG9mIHJhbmdlIGZvciB0eXBlICIke3R5cGV9Ii5gKTsKICByZXR1cm4gYmlnSW50VmFsdWU7Cn0KZnVuY3Rpb24gZW5jb2RlRmllbGQodHlwZXMsIG5hbWUsIHR5cGUsIHZhbHVlLCB2ZXJzaW9uKSB7CiAgdmFsaWRhdGVWZXJzaW9uKHZlcnNpb24sIFtTaWduVHlwZWREYXRhVmVyc2lvbi5WMywgU2lnblR5cGVkRGF0YVZlcnNpb24uVjRdKTsKICBpZiAodHlwZXNbdHlwZV0gIT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIFsnYnl0ZXMzMicsIHZlcnNpb24gPT09IFNpZ25UeXBlZERhdGFWZXJzaW9uLlY0ICYmIHZhbHVlID09IG51bGwgPyAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyA6ICgwLCBldGhlcmV1bWpzX3V0aWxfMS5rZWNjYWspKGVuY29kZURhdGEodHlwZSwgdmFsdWUsIHR5cGVzLCB2ZXJzaW9uKSldOwogIH0KICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBvciBpbnZhbGlkIHR5cGU6ICJmdW5jdGlvbiInKTsKICB9CiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcihgbWlzc2luZyB2YWx1ZSBmb3IgZmllbGQgJHtuYW1lfSBvZiB0eXBlICR7dHlwZX1gKTsKICB9CiAgaWYgKHR5cGUgPT09ICdhZGRyZXNzJykgewogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgICAgcmV0dXJuIFsnYWRkcmVzcycsIHBhZFN0YXJ0KG51bWJlclRvQnl0ZXModmFsdWUpLCAyMCldOwogICAgfSBlbHNlIGlmIChpc1N0cmljdEhleFN0cmluZyh2YWx1ZSkpIHsKICAgICAgcmV0dXJuIFsnYWRkcmVzcycsIGFkZDB4KHZhbHVlKV07CiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIFsnYWRkcmVzcycsIHJlYWxseVN0cmFuZ2VBZGRyZXNzVG9CeXRlcyh2YWx1ZSkuc3ViYXJyYXkoMCwgMjApXTsKICAgIH0KICB9CiAgaWYgKHR5cGUgPT09ICdib29sJykgewogICAgcmV0dXJuIFsnYm9vbCcsIEJvb2xlYW4odmFsdWUpXTsKICB9CiAgaWYgKHR5cGUgPT09ICdieXRlcycpIHsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICAgIHZhbHVlID0gbnVtYmVyVG9CeXRlcyh2YWx1ZSk7CiAgICB9IGVsc2UgaWYgKGlzU3RyaWN0SGV4U3RyaW5nKHZhbHVlKSkgewogICAgICB2YWx1ZSA9IGhleFRvQnl0ZXModmFsdWUpOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHZhbHVlID0gc3RyaW5nVG9CeXRlcyh2YWx1ZSk7CiAgICB9CiAgICByZXR1cm4gWydieXRlczMyJywgKDAsIGV0aGVyZXVtanNfdXRpbF8xLmtlY2NhaykodmFsdWUpXTsKICB9CiAgaWYgKHR5cGUuc3RhcnRzV2l0aCgnYnl0ZXMnKSAmJiB0eXBlICE9PSAnYnl0ZXMnICYmICF0eXBlLmluY2x1ZGVzKCdbJykpIHsKICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICAgIGlmICh2YWx1ZSA8IDApIHsKICAgICAgICByZXR1cm4gWydieXRlczMyJywgbmV3IFVpbnQ4QXJyYXkoMzIpXTsKICAgICAgfQogICAgICByZXR1cm4gWydieXRlczMyJywgYmlnSW50VG9CeXRlcyhCaWdJbnQodmFsdWUpKV07CiAgICB9IGVsc2UgaWYgKGlzU3RyaWN0SGV4U3RyaW5nKHZhbHVlKSkgewogICAgICByZXR1cm4gWydieXRlczMyJywgaGV4VG9CeXRlcyh2YWx1ZSldOwogICAgfQogICAgcmV0dXJuIFsnYnl0ZXMzMicsIHZhbHVlXTsKICB9CiAgaWYgKHR5cGUuc3RhcnRzV2l0aCgnaW50JykgJiYgIXR5cGUuaW5jbHVkZXMoJ1snKSkgewogICAgY29uc3QgYmlnSW50VmFsdWUgPSBwYXJzZU51bWJlcih0eXBlLCB2YWx1ZSk7CiAgICBpZiAoYmlnSW50VmFsdWUgPj0gQmlnSW50KDApKSB7CiAgICAgIHJldHVybiBbJ3VpbnQyNTYnLCBiaWdJbnRWYWx1ZV07CiAgICB9CiAgICByZXR1cm4gWydpbnQyNTYnLCBiaWdJbnRWYWx1ZV07CiAgfQogIGlmICh0eXBlID09PSAnc3RyaW5nJykgewogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHsKICAgICAgdmFsdWUgPSBudW1iZXJUb0J5dGVzKHZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciBfdmFsdWU7CiAgICAgIHZhbHVlID0gc3RyaW5nVG9CeXRlcygoX3ZhbHVlID0gdmFsdWUpICE9PSBudWxsICYmIF92YWx1ZSAhPT0gdm9pZCAwID8gX3ZhbHVlIDogJycpOwogICAgfQogICAgcmV0dXJuIFsnYnl0ZXMzMicsICgwLCBldGhlcmV1bWpzX3V0aWxfMS5rZWNjYWspKHZhbHVlKV07CiAgfQogIGlmICh0eXBlLmVuZHNXaXRoKCddJykpIHsKICAgIGlmICh2ZXJzaW9uID09PSBTaWduVHlwZWREYXRhVmVyc2lvbi5WMykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FycmF5cyBhcmUgdW5pbXBsZW1lbnRlZCBpbiBlbmNvZGVEYXRhOyB1c2UgVjQgZXh0ZW5zaW9uJyk7CiAgICB9CiAgICBjb25zdCBwYXJzZWRUeXBlID0gdHlwZS5zbGljZSgwLCB0eXBlLmxhc3RJbmRleE9mKCdbJykpOwogICAgY29uc3QgdHlwZVZhbHVlUGFpcnMgPSB2YWx1ZS5tYXAoaXRlbSA9PiBlbmNvZGVGaWVsZCh0eXBlcywgbmFtZSwgcGFyc2VkVHlwZSwgaXRlbSwgdmVyc2lvbikpOwogICAgY29uc3QgayA9IHR5cGVWYWx1ZVBhaXJzLm1hcChfcmVmID0+IHsKICAgICAgbGV0IFt0XSA9IF9yZWY7CiAgICAgIHJldHVybiB0OwogICAgfSk7CiAgICBjb25zdCB2ID0gdHlwZVZhbHVlUGFpcnMubWFwKF9yZWYyID0+IHsKICAgICAgbGV0IFssIHZdID0gX3JlZjI7CiAgICAgIHJldHVybiB2OwogICAgfSk7CiAgICByZXR1cm4gWydieXRlczMyJywgKDAsIGV0aGVyZXVtanNfdXRpbF8xLmtlY2NhaykoY3J5cHRvX2xpYl8xLmFiaS5SYXdFbmNvZGUoaywgdikpXTsKICB9CiAgcmV0dXJuIFt0eXBlLCB2YWx1ZV07Cn0KZnVuY3Rpb24gZW5jb2RlRGF0YShwcmltYXJ5VHlwZSwgZGF0YSwgdHlwZXMsIHZlcnNpb24pIHsKICB2YWxpZGF0ZVZlcnNpb24odmVyc2lvbiwgW1NpZ25UeXBlZERhdGFWZXJzaW9uLlYzLCBTaWduVHlwZWREYXRhVmVyc2lvbi5WNF0pOwogIGNvbnN0IGVuY29kZWRUeXBlcyA9IFsnYnl0ZXMzMiddOwogIGNvbnN0IGVuY29kZWRWYWx1ZXMgPSBbaGFzaFR5cGUocHJpbWFyeVR5cGUsIHR5cGVzKV07CiAgZm9yIChjb25zdCBmaWVsZCBvZiB0eXBlc1twcmltYXJ5VHlwZV0pIHsKICAgIGlmICh2ZXJzaW9uID09PSBTaWduVHlwZWREYXRhVmVyc2lvbi5WMyAmJiBkYXRhW2ZpZWxkLm5hbWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgY29udGludWU7CiAgICB9CiAgICBjb25zdCBbdHlwZSwgdmFsdWVdID0gZW5jb2RlRmllbGQodHlwZXMsIGZpZWxkLm5hbWUsIGZpZWxkLnR5cGUsIGRhdGFbZmllbGQubmFtZV0sIHZlcnNpb24pOwogICAgZW5jb2RlZFR5cGVzLnB1c2godHlwZSk7CiAgICBlbmNvZGVkVmFsdWVzLnB1c2godmFsdWUpOwogIH0KICByZXR1cm4gY3J5cHRvX2xpYl8xLmFiaS5SYXdFbmNvZGUoZW5jb2RlZFR5cGVzLCBlbmNvZGVkVmFsdWVzKTsKfQpmdW5jdGlvbiBlbmNvZGVUeXBlKHByaW1hcnlUeXBlLCB0eXBlcykgewogIGxldCByZXN1bHQgPSAnJzsKICBjb25zdCB1bnNvcnRlZERlcHMgPSBmaW5kVHlwZURlcGVuZGVuY2llcyhwcmltYXJ5VHlwZSwgdHlwZXMpOwogIHVuc29ydGVkRGVwcy5kZWxldGUocHJpbWFyeVR5cGUpOwogIGNvbnN0IGRlcHMgPSBbcHJpbWFyeVR5cGUsIC4uLkFycmF5LmZyb20odW5zb3J0ZWREZXBzKS5zb3J0KCldOwogIGZvciAoY29uc3QgdHlwZSBvZiBkZXBzKSB7CiAgICBjb25zdCBjaGlsZHJlbiA9IHR5cGVzW3R5cGVdOwogICAgaWYgKCFjaGlsZHJlbikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHR5cGUgZGVmaW5pdGlvbiBzcGVjaWZpZWQ6ICR7dHlwZX1gKTsKICAgIH0KICAgIHJlc3VsdCArPSBgJHt0eXBlfSgke3R5cGVzW3R5cGVdLm1hcChfcmVmMyA9PiB7CiAgICAgIGxldCB7CiAgICAgICAgbmFtZSwKICAgICAgICB0eXBlOiB0CiAgICAgIH0gPSBfcmVmMzsKICAgICAgcmV0dXJuIGAke3R9ICR7bmFtZX1gOwogICAgfSkuam9pbignLCcpfSlgOwogIH0KICByZXR1cm4gcmVzdWx0Owp9CmZ1bmN0aW9uIGZpbmRUeXBlRGVwZW5kZW5jaWVzKHByaW1hcnlUeXBlLCB0eXBlcykgewogIGxldCByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBuZXcgU2V0KCk7CiAgW3ByaW1hcnlUeXBlXSA9IHByaW1hcnlUeXBlLm1hdGNoKC9eXHcqL3UpOwogIGlmIChyZXN1bHRzLmhhcyhwcmltYXJ5VHlwZSkgfHwgdHlwZXNbcHJpbWFyeVR5cGVdID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiByZXN1bHRzOwogIH0KICByZXN1bHRzLmFkZChwcmltYXJ5VHlwZSk7CiAgZm9yIChjb25zdCBmaWVsZCBvZiB0eXBlc1twcmltYXJ5VHlwZV0pIHsKICAgIGZpbmRUeXBlRGVwZW5kZW5jaWVzKGZpZWxkLnR5cGUsIHR5cGVzLCByZXN1bHRzKTsKICB9CiAgcmV0dXJuIHJlc3VsdHM7Cn0KZnVuY3Rpb24gaGFzaFN0cnVjdChwcmltYXJ5VHlwZSwgZGF0YSwgdHlwZXMsIHZlcnNpb24pIHsKICB2YWxpZGF0ZVZlcnNpb24odmVyc2lvbiwgW1NpZ25UeXBlZERhdGFWZXJzaW9uLlYzLCBTaWduVHlwZWREYXRhVmVyc2lvbi5WNF0pOwogIHJldHVybiAoMCwgZXRoZXJldW1qc191dGlsXzEua2VjY2FrKShlbmNvZGVEYXRhKHByaW1hcnlUeXBlLCBkYXRhLCB0eXBlcywgdmVyc2lvbikpOwp9CmZ1bmN0aW9uIGhhc2hUeXBlKHByaW1hcnlUeXBlLCB0eXBlcykgewogIHJldHVybiAoMCwgZXRoZXJldW1qc191dGlsXzEua2VjY2FrKShCdWZmZXIuZnJvbShlbmNvZGVUeXBlKHByaW1hcnlUeXBlLCB0eXBlcykpKTsKfQpmdW5jdGlvbiBzYW5pdGl6ZURhdGEoZGF0YSkgewogIGNvbnN0IHNhbml0aXplZERhdGEgPSB7fTsKICBmb3IgKGNvbnN0IGtleSBpbiBleHBvcnRzLlRZUEVEX01FU1NBR0VfU0NIRU1BLnByb3BlcnRpZXMpIHsKICAgIGlmIChkYXRhW2tleV0pIHsKICAgICAgc2FuaXRpemVkRGF0YVtrZXldID0gZGF0YVtrZXldOwogICAgfQogIH0KICBpZiAoJ3R5cGVzJyBpbiBzYW5pdGl6ZWREYXRhKSB7CiAgICBzYW5pdGl6ZWREYXRhLnR5cGVzID0gewogICAgICBFSVA3MTJEb21haW46IFtdLAogICAgICAuLi5zYW5pdGl6ZWREYXRhLnR5cGVzCiAgICB9OwogIH0KICByZXR1cm4gc2FuaXRpemVkRGF0YTsKfQpmdW5jdGlvbiBlaXA3MTJIYXNoKHR5cGVkRGF0YSwgdmVyc2lvbikgewogIHZhbGlkYXRlVmVyc2lvbih2ZXJzaW9uLCBbU2lnblR5cGVkRGF0YVZlcnNpb24uVjMsIFNpZ25UeXBlZERhdGFWZXJzaW9uLlY0XSk7CiAgY29uc3Qgc2FuaXRpemVkRGF0YSA9IHNhbml0aXplRGF0YSh0eXBlZERhdGEpOwogIGNvbnN0IHBhcnRzID0gW0J1ZmZlci5mcm9tKCcxOTAxJywgJ2hleCcpXTsKICBwYXJ0cy5wdXNoKGhhc2hTdHJ1Y3QoJ0VJUDcxMkRvbWFpbicsIHNhbml0aXplZERhdGEuZG9tYWluLCBzYW5pdGl6ZWREYXRhLnR5cGVzLCB2ZXJzaW9uKSk7CiAgaWYgKHNhbml0aXplZERhdGEucHJpbWFyeVR5cGUgIT09ICdFSVA3MTJEb21haW4nKSB7CiAgICBwYXJ0cy5wdXNoKGhhc2hTdHJ1Y3Qoc2FuaXRpemVkRGF0YS5wcmltYXJ5VHlwZSwgc2FuaXRpemVkRGF0YS5tZXNzYWdlLCBzYW5pdGl6ZWREYXRhLnR5cGVzLCB2ZXJzaW9uKSk7CiAgfQogIHJldHVybiAoMCwgZXRoZXJldW1qc191dGlsXzEua2VjY2FrKShCdWZmZXIuY29uY2F0KHBhcnRzKSk7Cn0KZXhwb3J0cy5UeXBlZERhdGFVdGlscyA9IHsKICBlbmNvZGVEYXRhLAogIGVuY29kZVR5cGUsCiAgaGFzaFR5cGUsCiAgZWlwNzEySGFzaAp9OwpmdW5jdGlvbiB0eXBlZFNpZ25hdHVyZUhhc2godHlwZWREYXRhKSB7CiAgY29uc3QgaGFzaEJ1ZmZlciA9IF90eXBlZFNpZ25hdHVyZUhhc2godHlwZWREYXRhKTsKICByZXR1cm4gKDAsIGV0aGVyZXVtanNfdXRpbF8xLmJ1ZmZlclRvSGV4KShoYXNoQnVmZmVyKTsKfQpleHBvcnRzLnR5cGVkU2lnbmF0dXJlSGFzaCA9IHR5cGVkU2lnbmF0dXJlSGFzaDsKZnVuY3Rpb24gX3R5cGVkU2lnbmF0dXJlSGFzaCh0eXBlZERhdGEpIHsKICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignRXhwZWN0IGFyZ3VtZW50IHRvIGJlIG5vbi1lbXB0eSBhcnJheScpOwogIGlmICh0eXBlb2YgdHlwZWREYXRhICE9PSAnb2JqZWN0JyB8fCAhKCdsZW5ndGgnIGluIHR5cGVkRGF0YSkgfHwgIXR5cGVkRGF0YS5sZW5ndGgpIHsKICAgIHRocm93IGVycm9yOwogIH0KICBjb25zdCBkYXRhID0gdHlwZWREYXRhLm1hcChmdW5jdGlvbiAoZSkgewogICAgaWYgKGUudHlwZSAhPT0gJ2J5dGVzJykgewogICAgICByZXR1cm4gZS52YWx1ZTsKICAgIH0KICAgIHJldHVybiAoMCwgaW5kZXhfMS5sZWdhY3lUb0J1ZmZlcikoZS52YWx1ZSk7CiAgfSk7CiAgY29uc3QgdHlwZXMgPSB0eXBlZERhdGEubWFwKGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gZS50eXBlOwogIH0pOwogIGNvbnN0IHNjaGVtYSA9IHR5cGVkRGF0YS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZS5uYW1lKSB7CiAgICAgIHRocm93IGVycm9yOwogICAgfQogICAgcmV0dXJuIGAke2UudHlwZX0gJHtlLm5hbWV9YDsKICB9KTsKICBjb25zdCB0ZW1wMSA9IGNyeXB0b19saWJfMS5hYmkuQUJJLnNvbGlkaXR5UGFjayhuZXcgQXJyYXkodHlwZWREYXRhLmxlbmd0aCkuZmlsbCgnc3RyaW5nJyksIHNjaGVtYSk7CiAgY29uc3QgdGVtcDIgPSBjcnlwdG9fbGliXzEuYWJpLkFCSS5zb2xpZGl0eVBhY2sodHlwZXMsIGRhdGEpOwogIGNvbnN0IGhhc2gxID0gKDAsIGV0aGVyZXVtanNfdXRpbF8xLmtlY2NhazI1NikodGVtcDEpOwogIGNvbnN0IGhhc2gyID0gKDAsIGV0aGVyZXVtanNfdXRpbF8xLmtlY2NhazI1NikodGVtcDIpOwogIGNvbnN0IHRlbXAgPSBjcnlwdG9fbGliXzEuYWJpLkFCSS5zb2xpZGl0eVBhY2soWydieXRlczMyJywgJ2J5dGVzMzInXSwgW2hhc2gxLCBoYXNoMl0pOwogIHJldHVybiAoMCwgZXRoZXJldW1qc191dGlsXzEua2VjY2FrMjU2KSh0ZW1wKTsKfQ=="},{"version":3,"names":["ethereumjs_util_1","require","index_1","crypto_lib_1","superstruct_1","HEX_MINIMUM_NUMBER_CHARACTER","HEX_MAXIMUM_NUMBER_CHARACTER","HEX_CHARACTER_OFFSET","NUMBER_REGEX","BUFFER_WIDTH","exports","StrictHexStruct","pattern","string","SignTypedDataVersion","assert","condition","errorMsg","Error","numberToBytes","value","Number","isSafeInteger","hexadecimal","toString","hexToBytes","stringToBytes","TextEncoder","encode","isBytes","Uint8Array","valueToBytes","bigIntToBytes","startsWith","TypeError","concatBytes","values","normalizedValues","Array","length","byteLength","i","bytes","offset","set","assertIsHexString","isHexString","isStrictHexString","is","_value$toLowerCase","toLowerCase","call","strippedValue","remove0x","normalizedValue","c1","charCodeAt","c2","n1","n2","add0x","substring","BigInt","padStart","buffer","arguments","undefined","padding","Math","max","fill","getErrorStack","error","stack","getLength","type","_match$groups","match","groups","parseInt","TYPED_MESSAGE_SCHEMA","properties","types","additionalProperties","items","name","enum","getSolidityTypes","required","primaryType","domain","message","ints","from","map","_","index","uints","validateVersion","version","allowedVersions","Object","keys","includes","join","reallyStrangeAddressToBytes","address","addressValue","character","parseNumber","bigIntValue","maxValue","encodeField","V3","V4","keccak","encodeData","subarray","Boolean","_value","endsWith","parsedType","slice","lastIndexOf","typeValuePairs","item","k","_ref","t","v","_ref2","abi","RawEncode","data","encodedTypes","encodedValues","hashType","field","push","encodeType","result","unsortedDeps","findTypeDependencies","delete","deps","sort","children","_ref3","results","Set","has","add","hashStruct","Buffer","sanitizeData","sanitizedData","key","EIP712Domain","eip712Hash","typedData","parts","concat","TypedDataUtils","typedSignatureHash","hashBuffer","_typedSignatureHash","bufferToHex","e","legacyToBuffer","schema","temp1","ABI","solidityPack","temp2","hash1","keccak256","hash2","temp"],"sources":["../../../src/sdk/eth-sig-util/sign-typed-data.ts"],"sourcesContent":[null],"mappings":"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"}]}