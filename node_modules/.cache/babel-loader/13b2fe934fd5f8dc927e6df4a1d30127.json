{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/wallet/BtcWallet.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/wallet/BtcWallet.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKdmFyIF9fY3JlYXRlQmluZGluZyA9IHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgbSwgaywgazIpIHsKICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrOwogIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTsKICBpZiAoIWRlc2MgfHwgKCJnZXQiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHsKICAgIGRlc2MgPSB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBtW2tdOwogICAgICB9CiAgICB9OwogIH0KICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpOwp9IDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7CiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gazsKICBvW2syXSA9IG1ba107Cn0pOwp2YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gdGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCB2KSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sICJkZWZhdWx0IiwgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB2CiAgfSk7Cn0gOiBmdW5jdGlvbiAobywgdikgewogIG9bImRlZmF1bHQiXSA9IHY7Cn0pOwp2YXIgX19pbXBvcnRTdGFyID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhciB8fCBmdW5jdGlvbiAobW9kKSB7CiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDsKICB2YXIgcmVzdWx0ID0ge307CiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09ICJkZWZhdWx0IiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTsKICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpOwogIHJldHVybiByZXN1bHQ7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5jb252ZXJ0MlV0eG9UeCA9IGV4cG9ydHMubnVtYmVyMkhleCA9IGV4cG9ydHMuVEJ0Y1dhbGxldCA9IGV4cG9ydHMuQnRjV2FsbGV0ID0gZXhwb3J0cy5CSVRDT0lOX01FU1NBR0VfQklQMDMyMl9TSU1QTEUgPSBleHBvcnRzLkJJVENPSU5fTUVTU0FHRV9FQ0RTQSA9IHZvaWQgMDsKY29uc3QgY29pbl9iYXNlXzEgPSByZXF1aXJlKCJAb2t4d2ViMy9jb2luLWJhc2UiKTsKY29uc3QgY3J5cHRvX2xpYl8xID0gcmVxdWlyZSgiQG9reHdlYjMvY3J5cHRvLWxpYiIpOwpjb25zdCBiaXRjb2luID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4uL2luZGV4IikpOwpjb25zdCBpbmRleF8xID0gcmVxdWlyZSgiLi4vaW5kZXgiKTsKY29uc3QgcHNidF8xID0gcmVxdWlyZSgiLi4vYml0Y29pbmpzLWxpYi9wc2J0Iik7CmNvbnN0IGJpcDAzMjJfMSA9IHJlcXVpcmUoIi4uL2JpdGNvaW5qcy1saWIvYmlwMDMyMiIpOwpleHBvcnRzLkJJVENPSU5fTUVTU0FHRV9FQ0RTQSA9IDA7CmV4cG9ydHMuQklUQ09JTl9NRVNTQUdFX0JJUDAzMjJfU0lNUExFID0gMTsKY2xhc3MgQnRjV2FsbGV0IGV4dGVuZHMgY29pbl9iYXNlXzEuQmFzZVdhbGxldCB7CiAgbmV0d29yaygpIHsKICAgIHJldHVybiBiaXRjb2luLm5ldHdvcmtzLmJpdGNvaW47CiAgfQogIGFzeW5jIGdldERlcml2ZWRQYXRoKHBhcmFtKSB7CiAgICBpZiAoIXBhcmFtLnNlZ3dpdFR5cGUpIHsKICAgICAgcmV0dXJuIGBtLzQ0Jy8wJy8wJy8wLyR7cGFyYW0uaW5kZXh9YDsKICAgIH0KICAgIGlmIChwYXJhbS5zZWd3aXRUeXBlID09IGNvaW5fYmFzZV8xLnNlZ3dpdFR5cGUuU0VHV0lUX05FU1RFRCkgewogICAgICByZXR1cm4gYG0vODQnLzAnLzAnLzAvJHtwYXJhbS5pbmRleH1gOwogICAgfSBlbHNlIGlmIChwYXJhbS5zZWd3aXRUeXBlID09IGNvaW5fYmFzZV8xLnNlZ3dpdFR5cGUuU0VHV0lUX05FU1RFRF80OSkgewogICAgICByZXR1cm4gYG0vNDknLzAnLzAnLzAvJHtwYXJhbS5pbmRleH1gOwogICAgfSBlbHNlIGlmIChwYXJhbS5zZWd3aXRUeXBlID09IGNvaW5fYmFzZV8xLnNlZ3dpdFR5cGUuU0VHV0lUX05BVElWRSkgewogICAgICByZXR1cm4gYG0vODQnLzAnLzAnLzAvJHtwYXJhbS5pbmRleH1gOwogICAgfSBlbHNlIGlmIChwYXJhbS5zZWd3aXRUeXBlID09IGNvaW5fYmFzZV8xLnNlZ3dpdFR5cGUuU0VHV0lUX1RBUFJPT1QpIHsKICAgICAgcmV0dXJuIGBtLzg2Jy8wJy8wJy8wLyR7cGFyYW0uaW5kZXh9YDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5EZXJpdmVQYXRoRXJyb3IpOwogICAgfQogIH0KICBhc3luYyB2YWxpZFByaXZhdGVLZXkocGFyYW0pIHsKICAgIGxldCBpc1ZhbGlkOwogICAgdHJ5IHsKICAgICAgY29uc3QgewogICAgICAgIHZlcnNpb24KICAgICAgfSA9IGJpdGNvaW4ud2lmLmRlY29kZShwYXJhbS5wcml2YXRlS2V5KTsKICAgICAgaXNWYWxpZCA9IHZlcnNpb24gPT09IHRoaXMubmV0d29yaygpLndpZjsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgfQogICAgY29uc3QgZGF0YSA9IHsKICAgICAgaXNWYWxpZDogaXNWYWxpZCwKICAgICAgcHJpdmF0ZUtleTogcGFyYW0ucHJpdmF0ZUtleQogICAgfTsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7CiAgfQogIGFzeW5jIGdldE5ld0FkZHJlc3MocGFyYW0pIHsKICAgIHRyeSB7CiAgICAgIGxldCBuZXR3b3JrID0gdGhpcy5uZXR3b3JrKCk7CiAgICAgIGxldCBwcml2YXRlS2V5ID0gcGFyYW0ucHJpdmF0ZUtleTsKICAgICAgY29uc3QgYWRkcmVzc1R5cGUgPSBwYXJhbS5hZGRyZXNzVHlwZSB8fCAiTGVnYWN5IjsKICAgICAgY29uc3QgcHVibGljS2V5ID0gYml0Y29pbi53aWYyUHVibGljKHByaXZhdGVLZXksIG5ldHdvcmspOwogICAgICBsZXQgYWRkcmVzczsKICAgICAgaWYgKGFkZHJlc3NUeXBlID09PSAiTGVnYWN5IikgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGJpdGNvaW4ucGF5bWVudHMucDJwa2goewogICAgICAgICAgcHVia2V5OiBwdWJsaWNLZXksCiAgICAgICAgICBuZXR3b3JrCiAgICAgICAgfSk7CiAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzOwogICAgICB9IGVsc2UgaWYgKGFkZHJlc3NUeXBlID09PSAic2Vnd2l0X25hdGl2ZSIpIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBiaXRjb2luLnBheW1lbnRzLnAyd3BraCh7CiAgICAgICAgICBwdWJrZXk6IHB1YmxpY0tleSwKICAgICAgICAgIG5ldHdvcmsKICAgICAgICB9KTsKICAgICAgICBhZGRyZXNzID0gcmVzdWx0LmFkZHJlc3M7CiAgICAgIH0gZWxzZSBpZiAoYWRkcmVzc1R5cGUgPT09ICJzZWd3aXRfbmVzdGVkIikgewogICAgICAgIGNvbnN0IHJlc3VsdCA9IGJpdGNvaW4ucGF5bWVudHMucDJzaCh7CiAgICAgICAgICByZWRlZW06IGJpdGNvaW4ucGF5bWVudHMucDJ3cGtoKHsKICAgICAgICAgICAgcHVia2V5OiBwdWJsaWNLZXksCiAgICAgICAgICAgIG5ldHdvcmsKICAgICAgICAgIH0pCiAgICAgICAgfSk7CiAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzOwogICAgICB9IGVsc2UgaWYgKGFkZHJlc3NUeXBlID09PSAic2Vnd2l0X3RhcHJvb3QiKSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYml0Y29pbi5wYXltZW50cy5wMnRyKHsKICAgICAgICAgIGludGVybmFsUHVia2V5OiBwdWJsaWNLZXkuc2xpY2UoMSksCiAgICAgICAgICBuZXR3b3JrCiAgICAgICAgfSk7CiAgICAgICAgYWRkcmVzcyA9IHJlc3VsdC5hZGRyZXNzOwogICAgICB9CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIGFkZHJlc3M6IGFkZHJlc3MgfHwgIiIsCiAgICAgICAgcHVibGljS2V5OiBjcnlwdG9fbGliXzEuYmFzZS50b0hleChhZGRyZXNzVHlwZSA9PT0gInNlZ3dpdF90YXByb290IiA/IHB1YmxpY0tleS5zbGljZSgxKSA6IHB1YmxpY0tleSksCiAgICAgICAgY29tcHJlc3NlZFB1YmxpY0tleTogY3J5cHRvX2xpYl8xLmJhc2UudG9IZXgocHVibGljS2V5KQogICAgICB9OwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRhdGEpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuTmV3QWRkcmVzc0Vycm9yKTsKICAgIH0KICB9CiAgYXN5bmMgdmFsaWRBZGRyZXNzKHBhcmFtKSB7CiAgICBsZXQgaXNWYWxpZCA9IGZhbHNlOwogICAgbGV0IG5ldHdvcmsgPSB0aGlzLm5ldHdvcmsoKTsKICAgIHRyeSB7CiAgICAgIGxldCBvdXRwdXRTY3JpcHQgPSBiaXRjb2luLmFkZHJlc3MudG9PdXRwdXRTY3JpcHQocGFyYW0uYWRkcmVzcywgbmV0d29yayk7CiAgICAgIGlmIChvdXRwdXRTY3JpcHQpIHsKICAgICAgICBpc1ZhbGlkID0gdHJ1ZTsKICAgICAgfQogICAgfSBjYXRjaCAoZSkge30KICAgIGlmIChwYXJhbS5hZGRyZXNzVHlwZSkgewogICAgICBpc1ZhbGlkID0gcGFyYW0uYWRkcmVzc1R5cGUgPT09IGJpdGNvaW4uZ2V0QWRkcmVzc1R5cGUocGFyYW0uYWRkcmVzcywgbmV0d29yayk7CiAgICB9CiAgICBsZXQgZGF0YSA9IHsKICAgICAgaXNWYWxpZDogaXNWYWxpZCwKICAgICAgYWRkcmVzczogcGFyYW0uYWRkcmVzcwogICAgfTsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7CiAgfQogIGFzeW5jIHNpZ25UcmFuc2FjdGlvbihwYXJhbSkgewogICAgY29uc3QgdHlwZSA9IHBhcmFtLmRhdGEudHlwZSB8fCAwOwogICAgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuSU5TQ1JJQkUpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uaW5zY3JpYmUodGhpcy5uZXR3b3JrKCksIHBhcmFtLmRhdGEpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5QU0JUKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLnBzYnRTaWduKHBhcmFtLmRhdGEucHNidCwgcGFyYW0ucHJpdmF0ZUtleSwgdGhpcy5uZXR3b3JrKCkpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5QU0JUX0RFT0RFKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLnBzYnREZWNvZGUocGFyYW0uZGF0YS5wc2J0LCB0aGlzLm5ldHdvcmsoKSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLlNpZ25UeEVycm9yKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlBTQlRfTVBDX1VOU0lHTkVEX0xJU1QpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uZ2VuZXJhdGVNUENVbnNpZ25lZExpc3RpbmdQU0JUKHBhcmFtLmRhdGEucHNidCwgcGFyYW0uZGF0YS5wdWJsaWNLZXksIHRoaXMubmV0d29yaygpKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUFNCVF9NUENfU0lHTkVEX0xJU1QpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uZ2VuZXJhdGVNUENTaWduZWRMaXN0aW5nUFNCVChwYXJhbS5kYXRhLnBzYnQsIHBhcmFtLmRhdGEucHVibGljS2V5LCBwYXJhbS5kYXRhLnNpZ25hdHVyZSwgdGhpcy5uZXR3b3JrKCkpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5QU0JUX01QQ19VTlNJR05FRF9CVVkpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uZ2VuZXJhdGVNUENVbnNpZ25lZEJ1eWluZ1BTQlQocGFyYW0uZGF0YS5wc2J0LCBwYXJhbS5kYXRhLnB1YmxpY0tleSwgdGhpcy5uZXR3b3JrKCksIHBhcmFtLmRhdGEuYmF0Y2hTaXplKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUFNCVF9NUENfU0lHTkVEX0JVWSkgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5nZW5lcmF0ZU1QQ1NpZ25lZEJ1eWluZ1R4KHBhcmFtLmRhdGEucHNidCwgcGFyYW0uZGF0YS5wdWJsaWNLZXksIHBhcmFtLmRhdGEuc2lnbmF0dXJlTGlzdCwgdGhpcy5uZXR3b3JrKCksIHBhcmFtLmRhdGEuYmF0Y2hTaXplKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUFNCVF9NUENfVU5TSUdORUQpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uZ2VuZXJhdGVNUENVbnNpZ25lZFBTQlQocGFyYW0uZGF0YS5wc2J0LCBwYXJhbS5kYXRhLnB1YmxpY0tleSwgdGhpcy5uZXR3b3JrKCkpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5QU0JUX01QQ19TSUdORUQpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4uZ2VuZXJhdGVNUENTaWduZWRQU0JUKHBhcmFtLmRhdGEucHNidCwgcGFyYW0uZGF0YS5wdWJsaWNLZXksIHBhcmFtLmRhdGEuc2lnbmF0dXJlTGlzdCwgdGhpcy5uZXR3b3JrKCkpKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5QU0JUX0tFWV9TQ1JJUFRfUEFUSCkgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5zaWduUHNidFdpdGhLZXlQYXRoQW5kU2NyaXB0UGF0aChwYXJhbS5kYXRhLnBzYnQsIHBhcmFtLnByaXZhdGVLZXksIHRoaXMubmV0d29yaygpLCB7CiAgICAgICAgICBhdXRvRmluYWxpemVkOiBwYXJhbS5kYXRhLmF1dG9GaW5hbGl6ZWQsCiAgICAgICAgICB0b1NpZ25JbnB1dHM6IHBhcmFtLmRhdGEudG9TaWduSW5wdXRzCiAgICAgICAgfSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLlNpZ25UeEVycm9yKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlBTQlRfS0VZX1NDUklQVF9QQVRIX0JBVENIKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLnNpZ25Qc2J0V2l0aEtleVBhdGhBbmRTY3JpcHRQYXRoQmF0Y2gocGFyYW0uZGF0YS5wc2J0SGV4cywgcGFyYW0ucHJpdmF0ZUtleSwgdGhpcy5uZXR3b3JrKCksIHBhcmFtLmRhdGEub3B0aW9ucykpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLlNpZ25UeEVycm9yKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlNSQzIwKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLnNyY0luc2NyaWJlKHRoaXMubmV0d29yaygpLCBwYXJhbS5kYXRhKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUlVORSkgewogICAgICB0cnkgewogICAgICAgIGxldCB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lV2FsbGV0KCk7CiAgICAgICAgaWYgKHRoaXMubmV0d29yaygpID09PSBpbmRleF8xLm5ldHdvcmtzLnRlc3RuZXQpIHsKICAgICAgICAgIHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVUZXN0V2FsbGV0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUod2FsbGV0LnNpZ25UcmFuc2FjdGlvbihwYXJhbSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLlNpZ25UeEVycm9yKTsKICAgICAgfQogICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlJVTkVNQUlOKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVNYWluV2FsbGV0KCk7CiAgICAgICAgaWYgKHRoaXMubmV0d29yaygpID09PSBpbmRleF8xLm5ldHdvcmtzLnRlc3RuZXQpIHsKICAgICAgICAgIHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVNYWluVGVzdFdhbGxldCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHdhbGxldC5zaWduVHJhbnNhY3Rpb24ocGFyYW0pKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5BUkMyMCkgewogICAgICB0cnkgewogICAgICAgIGxldCB3YWxsZXQgPSBuZXcgaW5kZXhfMS5BdG9taWNhbFdhbGxldCgpOwogICAgICAgIGlmICh0aGlzLm5ldHdvcmsoKSA9PT0gaW5kZXhfMS5uZXR3b3Jrcy50ZXN0bmV0KSB7CiAgICAgICAgICB3YWxsZXQgPSBuZXcgaW5kZXhfMS5BdG9taWNhbFRlc3RXYWxsZXQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh3YWxsZXQuc2lnblRyYW5zYWN0aW9uKHBhcmFtKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUFNCVF9SVU5FTUFJTikgewogICAgICB0cnkgewogICAgICAgIGxldCB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lTWFpbldhbGxldCgpOwogICAgICAgIGlmICh0aGlzLm5ldHdvcmsoKSA9PT0gaW5kZXhfMS5uZXR3b3Jrcy50ZXN0bmV0KSB7CiAgICAgICAgICB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lTWFpblRlc3RXYWxsZXQoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh3YWxsZXQuYnVpbGRQc2J0KHBhcmFtKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBsZXQgdHhIZXggPSBudWxsOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHByaXZhdGVLZXkgPSBwYXJhbS5wcml2YXRlS2V5OwogICAgICAgIGNvbnN0IHV0eG9UeCA9IGNvbnZlcnQyVXR4b1R4KHBhcmFtLmRhdGEpOwogICAgICAgIHR4SGV4ID0gYml0Y29pbi5zaWduQnRjKHV0eG9UeCwgcHJpdmF0ZUtleSwgdGhpcy5uZXR3b3JrKCkpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHhIZXgpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLlNpZ25UeEVycm9yKTsKICAgICAgfQogICAgfQogIH0KICBnZXRSYW5kb21Qcml2YXRlS2V5KCkgewogICAgdHJ5IHsKICAgICAgbGV0IG5ldHdvcmsgPSB0aGlzLm5ldHdvcmsoKTsKICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICBjb25zdCBwcml2YXRlS2V5ID0gY3J5cHRvX2xpYl8xLmJhc2UucmFuZG9tQnl0ZXMoMzIpOwogICAgICAgIGlmICgoMCwgY29pbl9iYXNlXzEuc2VjcDI1NmsxU2lnblRlc3QpKHByaXZhdGVLZXkpKSB7CiAgICAgICAgICBjb25zdCB3aWYgPSBiaXRjb2luLnByaXZhdGUyV2lmKHByaXZhdGVLZXksIG5ldHdvcmspOwogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh3aWYpOwogICAgICAgIH0KICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuR2VuUHJpdmF0ZUtleUVycm9yKTsKICAgIH0KICB9CiAgZ2V0RGVyaXZlZFByaXZhdGVLZXkocGFyYW0pIHsKICAgIGxldCBuZXR3b3JrID0gdGhpcy5uZXR3b3JrKCk7CiAgICByZXR1cm4gY3J5cHRvX2xpYl8xLmJpcDM5Lm1uZW1vbmljVG9TZWVkKHBhcmFtLm1uZW1vbmljKS50aGVuKG1hc3RlclNlZWQgPT4gewogICAgICBsZXQgY2hpbGRLZXkgPSBjcnlwdG9fbGliXzEuYmlwMzIuZnJvbVNlZWQobWFzdGVyU2VlZCkuZGVyaXZlUGF0aChwYXJhbS5oZFBhdGgpOwogICAgICBpZiAoIWNoaWxkS2V5LnByaXZhdGVLZXkpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuR2VuUHJpdmF0ZUtleUVycm9yKTsKICAgICAgfQogICAgICBjb25zdCB3aWYgPSBiaXRjb2luLnByaXZhdGUyV2lmKGNoaWxkS2V5LnByaXZhdGVLZXksIG5ldHdvcmspOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHdpZik7CiAgICB9KS5jYXRjaChlID0+IHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLkdlblByaXZhdGVLZXlFcnJvcik7CiAgICB9KTsKICB9CiAgZ2V0QWRkcmVzc0J5UHVibGljS2V5KHBhcmFtKSB7CiAgICB0cnkgewogICAgICBjb25zdCBuZXR3b3JrID0gdGhpcy5uZXR3b3JrKCk7CiAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGNyeXB0b19saWJfMS5iYXNlLmZyb21IZXgocGFyYW0ucHVibGljS2V5KTsKICAgICAgaWYgKCFwYXJhbS5hZGRyZXNzVHlwZSkgewogICAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IFtdOwogICAgICAgIGFkZHJlc3Nlcy5wdXNoKHsKICAgICAgICAgIGFkZHJlc3NUeXBlOiAiTGVnYWN5IiwKICAgICAgICAgIGFkZHJlc3M6IGJpdGNvaW4ucGF5bWVudHMucDJwa2goewogICAgICAgICAgICBwdWJrZXk6IHB1YmxpY0tleSwKICAgICAgICAgICAgbmV0d29yawogICAgICAgICAgfSkuYWRkcmVzcwogICAgICAgIH0pOwogICAgICAgIGFkZHJlc3Nlcy5wdXNoKHsKICAgICAgICAgIGFkZHJlc3NUeXBlOiAic2Vnd2l0X25lc3RlZCIsCiAgICAgICAgICBhZGRyZXNzOiBiaXRjb2luLnBheW1lbnRzLnAyc2goewogICAgICAgICAgICByZWRlZW06IGJpdGNvaW4ucGF5bWVudHMucDJ3cGtoKHsKICAgICAgICAgICAgICBwdWJrZXk6IHB1YmxpY0tleSwKICAgICAgICAgICAgICBuZXR3b3JrCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9KS5hZGRyZXNzCiAgICAgICAgfSk7CiAgICAgICAgYWRkcmVzc2VzLnB1c2goewogICAgICAgICAgYWRkcmVzc1R5cGU6ICJzZWd3aXRfbmF0aXZlIiwKICAgICAgICAgIGFkZHJlc3M6IGJpdGNvaW4ucGF5bWVudHMucDJ3cGtoKHsKICAgICAgICAgICAgcHVia2V5OiBwdWJsaWNLZXksCiAgICAgICAgICAgIG5ldHdvcmsKICAgICAgICAgIH0pLmFkZHJlc3MKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFkZHJlc3Nlcyk7CiAgICAgIH0gZWxzZSBpZiAocGFyYW0uYWRkcmVzc1R5cGUgPT09ICdMZWdhY3knKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLnBheW1lbnRzLnAycGtoKHsKICAgICAgICAgIHB1YmtleTogcHVibGljS2V5LAogICAgICAgICAgbmV0d29yawogICAgICAgIH0pLmFkZHJlc3MpOwogICAgICB9IGVsc2UgaWYgKHBhcmFtLmFkZHJlc3NUeXBlID09PSAnc2Vnd2l0X25lc3RlZCcpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4ucGF5bWVudHMucDJzaCh7CiAgICAgICAgICByZWRlZW06IGJpdGNvaW4ucGF5bWVudHMucDJ3cGtoKHsKICAgICAgICAgICAgcHVia2V5OiBwdWJsaWNLZXksCiAgICAgICAgICAgIG5ldHdvcmsKICAgICAgICAgIH0pCiAgICAgICAgfSkuYWRkcmVzcyk7CiAgICAgIH0gZWxzZSBpZiAocGFyYW0uYWRkcmVzc1R5cGUgPT09ICdzZWd3aXRfbmF0aXZlJykgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5wYXltZW50cy5wMndwa2goewogICAgICAgICAgcHVia2V5OiBwdWJsaWNLZXksCiAgICAgICAgICBuZXR3b3JrCiAgICAgICAgfSkuYWRkcmVzcyk7CiAgICAgIH0gZWxzZSBpZiAocGFyYW0uYWRkcmVzc1R5cGUgPT09ICdzZWd3aXRfdGFwcm9vdCcpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGJpdGNvaW4ucGF5bWVudHMucDJ0cih7CiAgICAgICAgICBpbnRlcm5hbFB1YmtleTogcHVibGljS2V5LnNsaWNlKDEpLAogICAgICAgICAgbmV0d29yawogICAgICAgIH0pLmFkZHJlc3MpOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7fQogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLk5ld0FkZHJlc3NFcnJvcik7CiAgfQogIGdldE1QQ1Jhd1RyYW5zYWN0aW9uKHBhcmFtKSB7CiAgICB0cnkgewogICAgICBjb25zdCB1dHhvVHggPSBjb252ZXJ0MlV0eG9UeChwYXJhbS5kYXRhKTsKICAgICAgY29uc3QgaGFzaCA9IFtdOwogICAgICBjb25zdCB1bnNpZ25lZFR4ID0gYml0Y29pbi5zaWduQnRjKHV0eG9UeCwgIiIsIHRoaXMubmV0d29yaygpLCBoYXNoKTsKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICByYXc6IHVuc2lnbmVkVHgsCiAgICAgICAgaGFzaDogaGFzaAogICAgICB9OwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGRhdGEpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuR2V0TXBjUmF3VHJhbnNhY3Rpb25FcnJvcik7CiAgICB9CiAgfQogIGdldE1QQ1RyYW5zYWN0aW9uKHBhcmFtKSB7CiAgICB0cnkgewogICAgICBjb25zdCBoZXggPSBiaXRjb2luLmdldE1QQ1RyYW5zYWN0aW9uKHBhcmFtLnJhdywgcGFyYW0uc2lncywgZmFsc2UpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGhleCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5HZXRNcGNUcmFuc2FjdGlvbkVycm9yKTsKICAgIH0KICB9CiAgYXN5bmMgZ2V0TVBDUmF3TWVzc2FnZShwYXJhbSkgewogICAgdHJ5IHsKICAgICAgY29uc3QgbXNnSGFzaCA9IGF3YWl0IHRoaXMuc2lnbk1lc3NhZ2UocGFyYW0pOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsKICAgICAgICBoYXNoOiBtc2dIYXNoCiAgICAgIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuR2V0TXBjUmF3VHJhbnNhY3Rpb25FcnJvcik7CiAgICB9CiAgfQogIGFzeW5jIGdldE1QQ1NpZ25lZE1lc3NhZ2UocGFyYW0pIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5tZXNzYWdlLmdldE1QQ1NpZ25lZE1lc3NhZ2UocGFyYW0uaGFzaCwgcGFyYW0uc2lncywgcGFyYW0ucHVibGljS2V5KSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5HZXRNcGNUcmFuc2FjdGlvbkVycm9yKTsKICAgIH0KICB9CiAgZ2V0SGFyZFdhcmVSYXdUcmFuc2FjdGlvbihwYXJhbSkgewogICAgdHJ5IHsKICAgICAgY29uc3QgdHlwZSA9IHBhcmFtLmRhdGEudHlwZSB8fCAwOwogICAgICBjb25zdCB1dHhvVHggPSBjb252ZXJ0MlV0eG9UeChwYXJhbS5kYXRhKTsKICAgICAgaWYgKHR5cGUgPT09IDIpIHsKICAgICAgICBjb25zdCBjaGFuZ2UgPSBiaXRjb2luLnNpZ25CdGModXR4b1R4LCAiIiwgdGhpcy5uZXR3b3JrKCksIHVuZGVmaW5lZCwgdHJ1ZSwgdHJ1ZSk7CiAgICAgICAgY29uc3QgZHVzdFNpemUgPSB1dHhvVHguZHVzdFNpemUgfHwgNTQ2OwogICAgICAgIGlmIChwYXJzZUludChjaGFuZ2UpID49IGR1c3RTaXplKSB7CiAgICAgICAgICBjb25zdCBjaGFuZ2VVdHhvID0gewogICAgICAgICAgICBhZGRyZXNzOiB1dHhvVHguYWRkcmVzcywKICAgICAgICAgICAgYW1vdW50OiBwYXJzZUludChjaGFuZ2UpLAogICAgICAgICAgICBiaXAzMkRlcml2YXRpb246IHV0eG9UeC5iaXAzMkRlcml2YXRpb24KICAgICAgICAgIH07CiAgICAgICAgICB1dHhvVHgub3V0cHV0cy5wdXNoKGNoYW5nZVV0eG8pOwogICAgICAgIH0KICAgICAgICBjb25zdCBoZXggPSBiaXRjb2luLmJ1aWxkUHNidCh1dHhvVHgsIHRoaXMubmV0d29yaygpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGhleCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgaGV4ID0gYml0Y29pbi5zaWduQnRjKHV0eG9UeCwgIiIsIHRoaXMubmV0d29yaygpLCB1bmRlZmluZWQsIHRydWUpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoaGV4KTsKICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuR2V0SGFyZHdhcmVSYXdUcmFuc2FjdGlvbkVycm9yKTsKICAgIH0KICB9CiAgYXN5bmMgY2FsY1R4SGFzaChwYXJhbSkgewogICAgdHJ5IHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShiaXRjb2luLlRyYW5zYWN0aW9uLmZyb21IZXgocGFyYW0uZGF0YSkuZ2V0SWQoKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5DYWxjVHhIYXNoRXJyb3IpOwogICAgfQogIH0KICBnZW5Qc2J0T2ZCSVAzMjJTaW1wbGUoX3JlZikgewogICAgbGV0IHsKICAgICAgbWVzc2FnZSwKICAgICAgYWRkcmVzcwogICAgfSA9IF9yZWY7CiAgICByZXR1cm4gKDAsIGJpcDAzMjJfMS5nZW5Qc2J0T2ZCSVAzMjJTaW1wbGUpKHsKICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgYWRkcmVzczogYWRkcmVzcywKICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrKCkKICAgIH0pOwogIH0KICBnZXRTaWduYXR1cmVGcm9tUHNidE9mQklQMzIyU2ltcGxlKHR4RW5jb2RlZCkgewogICAgbGV0IHR4ID0gcHNidF8xLlBzYnQuZnJvbUJhc2U2NCh0eEVuY29kZWQpOwogICAgdHJ5IHsKICAgICAgdHguZmluYWxpemVBbGxJbnB1dHMoKTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgICBsZXQgc2lnbmF0dXJlID0gKDAsIGJpcDAzMjJfMS5nZXRTaWduYXR1cmVGcm9tUHNidE9mQklQMzIyU2ltcGxlKSh0eCk7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNpZ25hdHVyZSk7CiAgfQogIHNpZ25NZXNzYWdlKHBhcmFtKSB7CiAgICB0cnkgewogICAgICBjb25zdCB0eXBlZE1lc3NhZ2UgPSBwYXJhbS5kYXRhOwogICAgICBsZXQgc2lnbmF0dXJlOwogICAgICBpZiAodHlwZWRNZXNzYWdlLnR5cGUgPT09IGV4cG9ydHMuQklUQ09JTl9NRVNTQUdFX0VDRFNBKSB7CiAgICAgICAgc2lnbmF0dXJlID0gYml0Y29pbi5tZXNzYWdlLnNpZ24ocGFyYW0ucHJpdmF0ZUtleSwgdHlwZWRNZXNzYWdlLm1lc3NhZ2UsIHRoaXMubmV0d29yaygpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzaWduYXR1cmUgPSBiaXRjb2luLmJpcDAzMjIuc2lnblNpbXBsZSh0eXBlZE1lc3NhZ2UubWVzc2FnZSwgdHlwZWRNZXNzYWdlLmFkZHJlc3MsIHBhcmFtLnByaXZhdGVLZXksIHRoaXMubmV0d29yaygpKTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNpZ25hdHVyZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduTXNnRXJyb3IpOwogICAgfQogIH0KICBhc3luYyB2ZXJpZnlNZXNzYWdlKHBhcmFtKSB7CiAgICB0cnkgewogICAgICBjb25zdCB0eXBlZE1lc3NhZ2UgPSBwYXJhbS5kYXRhOwogICAgICBpZiAodHlwZWRNZXNzYWdlLnR5cGUgPT09IGV4cG9ydHMuQklUQ09JTl9NRVNTQUdFX0VDRFNBKSB7CiAgICAgICAgY29uc3QgcmV0ID0gYml0Y29pbi5tZXNzYWdlLnZlcmlmeSh0eXBlZE1lc3NhZ2UucHVibGljS2V5LCB0eXBlZE1lc3NhZ2UubWVzc2FnZSwgcGFyYW0uc2lnbmF0dXJlKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJldCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgcmV0ID0gYml0Y29pbi5iaXAwMzIyLnZlcmlmeVNpbXBsZSh0eXBlZE1lc3NhZ2UubWVzc2FnZSwgdHlwZWRNZXNzYWdlLmFkZHJlc3MsIHBhcmFtLnNpZ25hdHVyZSwgdHlwZWRNZXNzYWdlLnB1YmxpY0tleSwgdGhpcy5uZXR3b3JrKCkpOwogICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmV0KTsKICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnbk1zZ0Vycm9yKTsKICAgIH0KICB9CiAgc3RhdGljIGFzeW5jIGV4dHJhY3RQc2J0VHJhbnNhY3Rpb24odHhIZXgpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5leHRyYWN0UHNidFRyYW5zYWN0aW9uKHR4SGV4KSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduTXNnRXJyb3IpOwogICAgfQogIH0KICBhc3luYyB2YWxpZFNpZ25lZFRyYW5zYWN0aW9uKHBhcmFtKSB7CiAgICB0cnkgewogICAgICBpZiAocGFyYW0uZGF0YSkgewogICAgICAgIHBhcmFtLmRhdGEuZm9yRWFjaChvID0+IG8udmFsdWUgPSBvLmFtb3VudCk7CiAgICAgIH0KICAgICAgY29uc3QgdHggPSBiaXRjb2luLlZhbGlkU2lnbmVkVHJhbnNhY3Rpb24ocGFyYW0udHgsIHBhcmFtLmRhdGEsIHRoaXMubmV0d29yaygpKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgoMCwgY29pbl9iYXNlXzEuanNvblN0cmluZ2lmeVVuaWZvcm0pKHR4KSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS52YWxpZFNpZ25lZFRyYW5zYWN0aW9uRXJyb3IpOwogICAgfQogIH0KICBhc3luYyBlc3RpbWF0ZUZlZShwYXJhbSkgewogICAgdHJ5IHsKICAgICAgY29uc3QgdHlwZSA9IHBhcmFtLmRhdGEudHlwZSB8fCAwOwogICAgICBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5JTlNDUklCRSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5Fc3RpbWF0ZUZlZUVycm9yKTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlBTQlQpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuRXN0aW1hdGVGZWVFcnJvcik7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gYml0Y29pbi5CdGNYcmNUeXBlcy5SVU5FKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lV2FsbGV0KCk7CiAgICAgICAgICBpZiAodGhpcy5uZXR3b3JrKCkgPT09IGluZGV4XzEubmV0d29ya3MudGVzdG5ldCkgewogICAgICAgICAgICB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lVGVzdFdhbGxldCgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh3YWxsZXQuZXN0aW1hdGVGZWUocGFyYW0pKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuRXN0aW1hdGVGZWVFcnJvcik7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IGJpdGNvaW4uQnRjWHJjVHlwZXMuUlVORU1BSU4pIHsKICAgICAgICB0cnkgewogICAgICAgICAgbGV0IHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVNYWluV2FsbGV0KCk7CiAgICAgICAgICBpZiAodGhpcy5uZXR3b3JrKCkgPT09IGluZGV4XzEubmV0d29ya3MudGVzdG5ldCkgewogICAgICAgICAgICB3YWxsZXQgPSBuZXcgaW5kZXhfMS5SdW5lTWFpblRlc3RXYWxsZXQoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUod2FsbGV0LmVzdGltYXRlRmVlKHBhcmFtKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLkVzdGltYXRlRmVlRXJyb3IpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLkFSQzIwKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGxldCB3YWxsZXQgPSBuZXcgaW5kZXhfMS5BdG9taWNhbFdhbGxldCgpOwogICAgICAgICAgaWYgKHRoaXMubmV0d29yaygpID09PSBpbmRleF8xLm5ldHdvcmtzLnRlc3RuZXQpIHsKICAgICAgICAgICAgd2FsbGV0ID0gbmV3IGluZGV4XzEuQXRvbWljYWxUZXN0V2FsbGV0KCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHdhbGxldC5lc3RpbWF0ZUZlZShwYXJhbSkpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5Fc3RpbWF0ZUZlZUVycm9yKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdXR4b1R4ID0gY29udmVydDJVdHhvVHgocGFyYW0uZGF0YSk7CiAgICAgICAgY29uc3QgZmVlID0gYml0Y29pbi5lc3RpbWF0ZUJ0Y0ZlZSh1dHhvVHgsIHRoaXMubmV0d29yaygpKTsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZlZSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGNvaW5fYmFzZV8xLkVzdGltYXRlRmVlRXJyb3IpOwogICAgfQogIH0KICBzdGF0aWMgYXN5bmMgb25lS2V5QnVpbGRCdGNUeCh0eERhdGEpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYml0Y29pbi5vbmVLZXlCdWlsZEJ0Y1R4KHR4RGF0YSkpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgfQogIH0KICBhc3luYyBidWlsZFBzYnQocGFyYW0pIHsKICAgIGNvbnN0IHR5cGUgPSBwYXJhbS5kYXRhLnR5cGUgfHwgMDsKICAgIGlmICh0eXBlID09PSBiaXRjb2luLkJ0Y1hyY1R5cGVzLlJVTkVNQUlOKSB7CiAgICAgIHRyeSB7CiAgICAgICAgbGV0IHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVNYWluV2FsbGV0KCk7CiAgICAgICAgaWYgKHRoaXMubmV0d29yaygpID09PSBpbmRleF8xLm5ldHdvcmtzLnRlc3RuZXQpIHsKICAgICAgICAgIHdhbGxldCA9IG5ldyBpbmRleF8xLlJ1bmVNYWluVGVzdFdhbGxldCgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHdhbGxldC5idWlsZFBzYnQocGFyYW0pKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChjb2luX2Jhc2VfMS5TaWduVHhFcnJvcik7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxldCB0eEhleCA9IG51bGw7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0eEhleCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY29pbl9iYXNlXzEuU2lnblR4RXJyb3IpOwogICAgICB9CiAgICB9CiAgfQp9CmV4cG9ydHMuQnRjV2FsbGV0ID0gQnRjV2FsbGV0OwpjbGFzcyBUQnRjV2FsbGV0IGV4dGVuZHMgQnRjV2FsbGV0IHsKICBuZXR3b3JrKCkgewogICAgcmV0dXJuIGJpdGNvaW4ubmV0d29ya3MudGVzdG5ldDsKICB9Cn0KZXhwb3J0cy5UQnRjV2FsbGV0ID0gVEJ0Y1dhbGxldDsKZnVuY3Rpb24gbnVtYmVyMkhleChuLCBsZW5ndGgpIHsKICBsZXQgcyA9IG4udG9TdHJpbmcoMTYpOwogIGNvbnN0IGQgPSBsZW5ndGggLSBzLmxlbmd0aDsKICBpZiAoZCA+IDApIHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZDsgaSsrKSB7CiAgICAgIHMgPSAiMCIgKyBzOwogICAgfQogIH0KICByZXR1cm4gczsKfQpleHBvcnRzLm51bWJlcjJIZXggPSBudW1iZXIySGV4OwpmdW5jdGlvbiBjb252ZXJ0MlV0eG9UeCh1dHhvVHgpIHsKICBjb25zdCB0eCA9ICgwLCBjb2luX2Jhc2VfMS5jbG9uZU9iamVjdCkodXR4b1R4KTsKICB0eC5pbnB1dHMuZm9yRWFjaChpdCA9PiB7CiAgICBpdC5hbW91bnQgPSAoMCwgY29pbl9iYXNlXzEuY29udmVydDJOdW1iZXIpKGl0LmFtb3VudCk7CiAgfSk7CiAgdHgub3V0cHV0cy5mb3JFYWNoKGl0ID0+IHsKICAgIGl0LmFtb3VudCA9ICgwLCBjb2luX2Jhc2VfMS5jb252ZXJ0Mk51bWJlcikoaXQuYW1vdW50KTsKICB9KTsKICBpZiAodHgub21uaSkgewogICAgdHgub21uaS5hbW91bnQgPSAoMCwgY29pbl9iYXNlXzEuY29udmVydDJOdW1iZXIpKHR4Lm9tbmkuYW1vdW50KTsKICB9CiAgaWYgKHV0eG9UeC5kdXN0U2l6ZSkgewogICAgdHguZHVzdFNpemUgPSAoMCwgY29pbl9iYXNlXzEuY29udmVydDJOdW1iZXIpKHV0eG9UeC5kdXN0U2l6ZSk7CiAgfQogIHJldHVybiB0eDsKfQpleHBvcnRzLmNvbnZlcnQyVXR4b1R4ID0gY29udmVydDJVdHhvVHg7"},{"version":3,"names":["coin_base_1","require","crypto_lib_1","bitcoin","__importStar","index_1","psbt_1","bip0322_1","exports","BITCOIN_MESSAGE_ECDSA","BITCOIN_MESSAGE_BIP0322_SIMPLE","BtcWallet","BaseWallet","network","networks","getDerivedPath","param","segwitType","index","SEGWIT_NESTED","SEGWIT_NESTED_49","SEGWIT_NATIVE","SEGWIT_TAPROOT","Promise","reject","DerivePathError","validPrivateKey","isValid","version","wif","decode","privateKey","e","data","resolve","getNewAddress","addressType","publicKey","wif2Public","address","result","payments","p2pkh","pubkey","p2wpkh","p2sh","redeem","p2tr","internalPubkey","slice","base","toHex","compressedPublicKey","NewAddressError","validAddress","outputScript","toOutputScript","getAddressType","signTransaction","type","BtcXrcTypes","INSCRIBE","inscribe","SignTxError","PSBT","psbtSign","psbt","PSBT_DEODE","psbtDecode","PSBT_MPC_UNSIGNED_LIST","generateMPCUnsignedListingPSBT","PSBT_MPC_SIGNED_LIST","generateMPCSignedListingPSBT","signature","PSBT_MPC_UNSIGNED_BUY","generateMPCUnsignedBuyingPSBT","batchSize","PSBT_MPC_SIGNED_BUY","generateMPCSignedBuyingTx","signatureList","PSBT_MPC_UNSIGNED","generateMPCUnsignedPSBT","PSBT_MPC_SIGNED","generateMPCSignedPSBT","PSBT_KEY_SCRIPT_PATH","signPsbtWithKeyPathAndScriptPath","autoFinalized","toSignInputs","PSBT_KEY_SCRIPT_PATH_BATCH","signPsbtWithKeyPathAndScriptPathBatch","psbtHexs","options","SRC20","srcInscribe","RUNE","wallet","RuneWallet","testnet","RuneTestWallet","RUNEMAIN","RuneMainWallet","RuneMainTestWallet","ARC20","AtomicalWallet","AtomicalTestWallet","PSBT_RUNEMAIN","buildPsbt","txHex","utxoTx","convert2UtxoTx","signBtc","getRandomPrivateKey","randomBytes","secp256k1SignTest","private2Wif","GenPrivateKeyError","getDerivedPrivateKey","bip39","mnemonicToSeed","mnemonic","then","masterSeed","childKey","bip32","fromSeed","derivePath","hdPath","catch","getAddressByPublicKey","fromHex","addresses","push","getMPCRawTransaction","hash","unsignedTx","raw","GetMpcRawTransactionError","getMPCTransaction","hex","sigs","GetMpcTransactionError","getMPCRawMessage","msgHash","signMessage","getMPCSignedMessage","message","getHardWareRawTransaction","change","undefined","dustSize","parseInt","changeUtxo","amount","bip32Derivation","outputs","GetHardwareRawTransactionError","calcTxHash","Transaction","getId","CalcTxHashError","genPsbtOfBIP322Simple","_ref","getSignatureFromPsbtOfBIP322Simple","txEncoded","tx","Psbt","fromBase64","finalizeAllInputs","typedMessage","sign","bip0322","signSimple","SignMsgError","verifyMessage","ret","verify","verifySimple","extractPsbtTransaction","validSignedTransaction","forEach","o","value","ValidSignedTransaction","jsonStringifyUniform","validSignedTransactionError","estimateFee","EstimateFeeError","fee","estimateBtcFee","oneKeyBuildBtcTx","txData","TBtcWallet","number2Hex","n","length","s","toString","d","i","cloneObject","inputs","it","convert2Number","omni"],"sources":["../../src/wallet/BtcWallet.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,WAAA,GAAAC,OAAA;AAqCA,MAAAC,YAAA,GAAAD,OAAA;AACA,MAAAE,OAAA,GAAAC,YAAA,CAAAH,OAAA;AACA,MAAAI,OAAA,GAAAJ,OAAA;AAUA,MAAAK,MAAA,GAAAL,OAAA;AACA,MAAAM,SAAA,GAAAN,OAAA;AAGaO,OAAA,CAAAC,qBAAqB,GAAG,CAAC;AACzBD,OAAA,CAAAE,8BAA8B,GAAG,CAAC;AAE/C,MAAaC,SAAU,SAAQX,WAAA,CAAAY,UAAU;EAErCC,OAAOA,CAAA;IACH,OAAOV,OAAO,CAACW,QAAQ,CAACX,OAAO;EACnC;EAEA,MAAMY,cAAcA,CAACC,KAA0B;IAC3C,IAAI,CAACA,KAAK,CAACC,UAAU,EAAE;MAEnB,OAAO,iBAAiBD,KAAK,CAACE,KAAK,EAAE;;IAGzC,IAAIF,KAAK,CAACC,UAAU,IAAIjB,WAAA,CAAAiB,UAAU,CAACE,aAAa,EAAE;MAC9C,OAAO,iBAAiBH,KAAK,CAACE,KAAK,EAAE;KACxC,MAAM,IAAIF,KAAK,CAACC,UAAU,IAAIjB,WAAA,CAAAiB,UAAU,CAACG,gBAAgB,EAAE;MACxD,OAAO,iBAAiBJ,KAAK,CAACE,KAAK,EAAE;KACxC,MAAM,IAAIF,KAAK,CAACC,UAAU,IAAIjB,WAAA,CAAAiB,UAAU,CAACI,aAAa,EAAE;MACrD,OAAO,iBAAiBL,KAAK,CAACE,KAAK,EAAE;KACxC,MAAM,IAAIF,KAAK,CAACC,UAAU,IAAIjB,WAAA,CAAAiB,UAAU,CAACK,cAAc,EAAE;MACtD,OAAO,iBAAiBN,KAAK,CAACE,KAAK,EAAE;KACxC,MAAM;MACH,OAAOK,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAyB,eAAe,CAAC;;EAE9C;EAEA,MAAMC,eAAeA,CAACV,KAA4B;IAC9C,IAAIW,OAAgB;IACpB,IAAI;MACA,MAAM;QAACC;MAAO,CAAC,GAAGzB,OAAO,CAAC0B,GAAG,CAACC,MAAM,CAACd,KAAK,CAACe,UAAU,CAAC;MACtDJ,OAAO,GAAIC,OAAO,KAAK,IAAI,CAACf,OAAO,EAAE,CAACgB,GAAI;KAC7C,CAAC,OAAOG,CAAC,EAAE;MACRL,OAAO,GAAG,KAAK;;IAEnB,MAAMM,IAAI,GAAwB;MAC9BN,OAAO,EAAEA,OAAO;MAChBI,UAAU,EAAEf,KAAK,CAACe;KACrB;IACD,OAAOR,OAAO,CAACW,OAAO,CAACD,IAAI,CAAC;EAChC;EAGA,MAAME,aAAaA,CAACnB,KAAuB;IACvC,IAAI;MACA,IAAIH,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;MAC5B,IAAIkB,UAAU,GAAGf,KAAK,CAACe,UAAU;MAEjC,MAAMK,WAAW,GAAGpB,KAAK,CAACoB,WAAW,IAAI,QAAQ;MACjD,MAAMC,SAAS,GAAGlC,OAAO,CAACmC,UAAU,CAACP,UAAU,EAAElB,OAAO,CAAC;MACzD,IAAI0B,OAA2B;MAC/B,IAAIH,WAAW,KAAK,QAAQ,EAAE;QAE1B,MAAMI,MAAM,GAAGrC,OAAO,CAACsC,QAAQ,CAACC,KAAK,CAAC;UAACC,MAAM,EAAEN,SAAS;UAAExB;QAAO,CAAC,CAAC;QACnE0B,OAAO,GAAGC,MAAM,CAACD,OAAO;OAC3B,MAAM,IAAIH,WAAW,KAAK,eAAe,EAAE;QAExC,MAAMI,MAAM,GAAGrC,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;UAACD,MAAM,EAAEN,SAAS;UAAExB;QAAO,CAAC,CAAC;QACpE0B,OAAO,GAAGC,MAAM,CAACD,OAAO;OAC3B,MAAM,IAAIH,WAAW,KAAK,eAAe,EAAE;QAExC,MAAMI,MAAM,GAAGrC,OAAO,CAACsC,QAAQ,CAACI,IAAI,CAAC;UACjCC,MAAM,EAAE3C,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;YAACD,MAAM,EAAEN,SAAS;YAAExB;UAAO,CAAC;SAC/D,CAAC;QACF0B,OAAO,GAAGC,MAAM,CAACD,OAAO;OAC3B,MAAM,IAAIH,WAAW,KAAK,gBAAgB,EAAE;QAEzC,MAAMI,MAAM,GAAGrC,OAAO,CAACsC,QAAQ,CAACM,IAAI,CAAC;UAACC,cAAc,EAAEX,SAAS,CAACY,KAAK,CAAC,CAAC,CAAC;UAAEpC;QAAO,CAAC,CAAC;QACnF0B,OAAO,GAAGC,MAAM,CAACD,OAAO;;MAG5B,IAAIN,IAAI,GAAmB;QACvBM,OAAO,EAAEA,OAAO,IAAI,EAAE;QACtBF,SAAS,EAAEnC,YAAA,CAAAgD,IAAI,CAACC,KAAK,CAACf,WAAW,KAAK,gBAAgB,GAAGC,SAAS,CAACY,KAAK,CAAC,CAAC,CAAC,GAAGZ,SAAS,CAAC;QACxFe,mBAAmB,EAAElD,YAAA,CAAAgD,IAAI,CAACC,KAAK,CAACd,SAAS;OAC5C;MACD,OAAOd,OAAO,CAACW,OAAO,CAACD,IAAI,CAAC;KAC/B,CAAC,OAAOD,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAqD,eAAe,CAAC;;EAE9C;EAEA,MAAMC,YAAYA,CAACtC,KAAyB;IACxC,IAAIW,OAAO,GAAG,KAAK;IACnB,IAAId,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;IAC5B,IAAI;MACA,IAAI0C,YAAY,GAAGpD,OAAO,CAACoC,OAAO,CAACiB,cAAc,CAACxC,KAAK,CAACuB,OAAO,EAAE1B,OAAO,CAAC;MACzE,IAAI0C,YAAY,EAAE;QACd5B,OAAO,GAAG,IAAI;;KAErB,CAAC,OAAOK,CAAC,EAAE,C;IAEZ,IAAIhB,KAAK,CAACoB,WAAW,EAAE;MACnBT,OAAO,GAAGX,KAAK,CAACoB,WAAW,KAAKjC,OAAO,CAACsD,cAAc,CAACzC,KAAK,CAACuB,OAAO,EAAE1B,OAAO,CAAC;;IAElF,IAAIoB,IAAI,GAAqB;MACzBN,OAAO,EAAEA,OAAO;MAChBY,OAAO,EAAEvB,KAAK,CAACuB;KAClB;IACD,OAAOhB,OAAO,CAACW,OAAO,CAACD,IAAI,CAAC;EAChC;EAEA,MAAMyB,eAAeA,CAAC1C,KAAmB;IACrC,MAAM2C,IAAI,GAAG3C,KAAK,CAACiB,IAAI,CAAC0B,IAAI,IAAI,CAAC;IACjC,IAAIA,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACC,QAAQ,EAAE;MACvC,IAAI;QACA,OAAOtC,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC2D,QAAQ,CAAC,IAAI,CAACjD,OAAO,EAAE,EAAEG,KAAK,CAACiB,IAAI,CAAC,CAAC;OACvE,CAAC,OAAOD,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACI,IAAI,EAAE;MAC1C,IAAI;QACA,OAAOzC,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC8D,QAAQ,CAACjD,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACe,UAAU,EAAE,IAAI,CAAClB,OAAO,EAAE,CAAC,CAAC;OAC9F,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACO,UAAU,EAAE;MAChD,IAAI;QACA,OAAO5C,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACiE,UAAU,CAACpD,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAC,IAAI,CAACrD,OAAO,EAAE,CAAC,CAAC;OAC7E,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAMxD,OAAO,CAACyD,WAAW,CAACS,sBAAsB,EAAE;MAC7D,IAAI;QACA,OAAO9C,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACmE,8BAA8B,CAACtD,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAE,IAAI,CAACxB,OAAO,EAAE,CAAC,CAAC;OACxH,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAMxD,OAAO,CAACyD,WAAW,CAACW,oBAAoB,EAAE;MAC3D,IAAI;QACA,OAAOhD,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACqE,4BAA4B,CAACxD,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAErB,KAAK,CAACiB,IAAI,CAACwC,SAAS,EAAE,IAAI,CAAC5D,OAAO,EAAE,CAAC,CAAC;OAC5I,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACc,qBAAqB,EAAE;MAC3D,IAAI;QACA,OAAOnD,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACwE,6BAA6B,CAAC3D,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAE,IAAI,CAACxB,OAAO,EAAE,EAAEG,KAAK,CAACiB,IAAI,CAAC2C,SAAS,CAAC,CAAC;OAC7I,CAAC,OAAO5C,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACiB,mBAAmB,EAAE;MACzD,IAAI;QACA,OAAOtD,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC2E,yBAAyB,CAAC9D,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAErB,KAAK,CAACiB,IAAI,CAAC8C,aAAa,EAAE,IAAI,CAAClE,OAAO,EAAE,EAAEG,KAAK,CAACiB,IAAI,CAAC2C,SAAS,CAAC,CAAC;OACnK,CAAC,OAAO5C,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACoB,iBAAiB,EAAE;MACvD,IAAI;QACA,OAAOzD,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC8E,uBAAuB,CAACjE,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAE,IAAI,CAACxB,OAAO,EAAE,CAAC,CAAC;OACjH,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACsB,eAAe,EAAE;MACrD,IAAI;QACA,OAAO3D,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACgF,qBAAqB,CAACnE,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACiB,IAAI,CAACI,SAAS,EAAErB,KAAK,CAACiB,IAAI,CAAC8C,aAAa,EAAE,IAAI,CAAClE,OAAO,EAAE,CAAC,CAAC;OACzI,CAAC,OAAOmB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACwB,oBAAoB,EAAE;MAC1D,IAAI;QACA,OAAO7D,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACkF,gCAAgC,CAACrE,KAAK,CAACiB,IAAI,CAACiC,IAAI,EAAElD,KAAK,CAACe,UAAU,EAAE,IAAI,CAAClB,OAAO,EAAE,EAAE;UAC/GyE,aAAa,EAAEtE,KAAK,CAACiB,IAAI,CAACqD,aAAa;UACvCC,YAAY,EAAEvE,KAAK,CAACiB,IAAI,CAACsD;SAC5B,CAAC,CAAC;OACN,CAAC,OAAOvD,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAAC4B,0BAA0B,EAAE;MAChE,IAAI;QACA,OAAOjE,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACsF,qCAAqC,CAACzE,KAAK,CAACiB,IAAI,CAACyD,QAAQ,EAAE1E,KAAK,CAACe,UAAU,EAAE,IAAI,CAAClB,OAAO,EAAE,EAAEG,KAAK,CAACiB,IAAI,CAAC0D,OAAO,CAAC,CAAC;OACnJ,CAAC,OAAO3D,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACgC,KAAK,EAAE;MAC3C,IAAI;QACA,OAAOrE,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC0F,WAAW,CAAC,IAAI,CAAChF,OAAO,EAAE,EAAEG,KAAK,CAACiB,IAAI,CAAC,CAAC;OAC1E,CAAC,OAAOD,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACkC,IAAI,EAAE;MAC1C,IAAI;QACA,IAAIC,MAAM,GAAG,IAAI1F,OAAA,CAAA2F,UAAU,EAAE;QAC7B,IAAI,IAAI,CAACnF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;UACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAA6F,cAAc,EAAE;;QAEjC,OAAO3E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAACrC,eAAe,CAAC1C,KAAK,CAAC,CAAC;OACxD,CAAC,OAAOgB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACuC,QAAQ,EAAE;MAC9C,IAAI;QACA,IAAIJ,MAAM,GAAG,IAAI1F,OAAA,CAAA+F,cAAc,EAAE;QACjC,IAAI,IAAI,CAACvF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;UACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAgG,kBAAkB,EAAE;;QAErC,OAAO9E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAACrC,eAAe,CAAC1C,KAAK,CAAC,CAAC;OACxD,CAAC,OAAOgB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAK,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAAC0C,KAAK,EAAE;MAC1C,IAAI;QACA,IAAIP,MAAM,GAAG,IAAI1F,OAAA,CAAAkG,cAAc,EAAE;QACjC,IAAI,IAAI,CAAC1F,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;UACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAmG,kBAAkB,EAAE;;QAErC,OAAOjF,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAACrC,eAAe,CAAC1C,KAAK,CAAC,CAAC;OACxD,CAAC,OAAOgB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM,IAAIJ,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAAC6C,aAAa,EAAC;MAClD,IAAI;QACA,IAAIV,MAAM,GAAG,IAAI1F,OAAA,CAAA+F,cAAc,EAAE;QACjC,IAAI,IAAI,CAACvF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;UACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAgG,kBAAkB,EAAE;;QAErC,OAAO9E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAACW,SAAS,CAAC1F,KAAK,CAAC,CAAC;OAClD,CAAC,OAAOgB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM;MACH,IAAI4C,KAAK,GAAG,IAAI;MAChB,IAAI;QACA,MAAM5E,UAAU,GAAGf,KAAK,CAACe,UAAU;QACnC,MAAM6E,MAAM,GAAGC,cAAc,CAAC7F,KAAK,CAACiB,IAAI,CAAC;QACzC0E,KAAK,GAAGxG,OAAO,CAAC2G,OAAO,CAACF,MAAM,EAAE7E,UAAU,EAAE,IAAI,CAAClB,OAAO,EAAE,CAAC;QAC3D,OAAOU,OAAO,CAACW,OAAO,CAACyE,KAAK,CAAC;OAChC,CAAC,OAAO3E,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;;EAG9C;EAEAgD,mBAAmBA,CAAA;IACf,IAAI;MACA,IAAIlG,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;MAC5B,OAAO,IAAI,EAAE;QACT,MAAMkB,UAAU,GAAG7B,YAAA,CAAAgD,IAAI,CAAC8D,WAAW,CAAC,EAAE,CAAC;QACvC,IAAI,IAAAhH,WAAA,CAAAiH,iBAAiB,EAAClF,UAAU,CAAC,EAAE;UAC/B,MAAMF,GAAG,GAAG1B,OAAO,CAAC+G,WAAW,CAACnF,UAAU,EAAElB,OAAO,CAAC;UACpD,OAAOU,OAAO,CAACW,OAAO,CAACL,GAAG,CAAC;;;KAGtC,CAAC,OAAOG,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAmH,kBAAkB,CAAC;;EAEjD;EAEAC,oBAAoBA,CAACpG,KAAyB;IAC1C,IAAIH,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;IAC5B,OAAOX,YAAA,CAAAmH,KAAK,CAACC,cAAc,CAACtG,KAAK,CAACuG,QAAQ,CAAC,CACtCC,IAAI,CAACC,UAAU,IAAG;MACf,IAAIC,QAAQ,GAAGxH,YAAA,CAAAyH,KAAK,CAACC,QAAQ,CAACH,UAAU,CAAC,CAACI,UAAU,CAAC7G,KAAK,CAAC8G,MAAM,CAAC;MAClE,IAAI,CAACJ,QAAQ,CAAC3F,UAAU,EAAE;QACtB,OAAOR,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAmH,kBAAkB,CAAC;;MAE7C,MAAMtF,GAAG,GAAG1B,OAAO,CAAC+G,WAAW,CAACQ,QAAQ,CAAC3F,UAAU,EAAElB,OAAO,CAAC;MAC7D,OAAOU,OAAO,CAACW,OAAO,CAACL,GAAG,CAAC;IAC/B,CAAC,CAAC,CAACkG,KAAK,CAAE/F,CAAC,IAAI;MACX,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAmH,kBAAkB,CAAC;IAC7C,CAAC,CAAC;EACV;EAEAa,qBAAqBA,CAAChH,KAAuB;IACzC,IAAI;MACA,MAAMH,OAAO,GAAG,IAAI,CAACA,OAAO,EAAE;MAC9B,MAAMwB,SAAS,GAAGnC,YAAA,CAAAgD,IAAI,CAAC+E,OAAO,CAACjH,KAAK,CAACqB,SAAS,CAAC;MAC/C,IAAI,CAACrB,KAAK,CAACoB,WAAW,EAAE;QACpB,MAAM8F,SAAS,GAAG,EAAE;QACpBA,SAAS,CAACC,IAAI,CAAC;UACX/F,WAAW,EAAE,QAAQ;UACrBG,OAAO,EAAEpC,OAAO,CAACsC,QAAQ,CAACC,KAAK,CAAC;YAACC,MAAM,EAAEN,SAAS;YAAExB;UAAO,CAAC,CAAC,CAAC0B;SACjE,CAAC;QACF2F,SAAS,CAACC,IAAI,CAAC;UACX/F,WAAW,EAAE,eAAe;UAC5BG,OAAO,EAAEpC,OAAO,CAACsC,QAAQ,CAACI,IAAI,CAAC;YAC3BC,MAAM,EAAE3C,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;cAACD,MAAM,EAAEN,SAAS;cAAExB;YAAO,CAAC;WAC/D,CAAC,CAAC0B;SACN,CAAC;QACF2F,SAAS,CAACC,IAAI,CAAC;UACX/F,WAAW,EAAE,eAAe;UAC5BG,OAAO,EAAEpC,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;YAACD,MAAM,EAAEN,SAAS;YAAExB;UAAO,CAAC,CAAC,CAAC0B;SAClE,CAAC;QACF,OAAOhB,OAAO,CAACW,OAAO,CAACgG,SAAS,CAAC;OACpC,MAAM,IAAIlH,KAAK,CAACoB,WAAW,KAAK,QAAQ,EAAE;QACvC,OAAOb,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACsC,QAAQ,CAACC,KAAK,CAAC;UAACC,MAAM,EAAEN,SAAS;UAAExB;QAAO,CAAC,CAAC,CAAC0B,OAAO,CAAC;OACvF,MAAM,IAAIvB,KAAK,CAACoB,WAAW,KAAK,eAAe,EAAE;QAC9C,OAAOb,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACsC,QAAQ,CAACI,IAAI,CAAC;UACzCC,MAAM,EAAE3C,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;YAACD,MAAM,EAAEN,SAAS;YAAExB;UAAO,CAAC;SAC/D,CAAC,CAAC0B,OAAO,CAAC;OACd,MAAM,IAAIvB,KAAK,CAACoB,WAAW,KAAK,eAAe,EAAE;QAC9C,OAAOb,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACsC,QAAQ,CAACG,MAAM,CAAC;UAACD,MAAM,EAAEN,SAAS;UAAExB;QAAO,CAAC,CAAC,CAAC0B,OAAO,CAAC;OACxF,MAAM,IAAIvB,KAAK,CAACoB,WAAW,KAAK,gBAAgB,EAAE;QAC/C,OAAOb,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAACsC,QAAQ,CAACM,IAAI,CAAC;UAACC,cAAc,EAAEX,SAAS,CAACY,KAAK,CAAC,CAAC,CAAC;UAAEpC;QAAO,CAAC,CAAC,CAAC0B,OAAO,CAAC;;KAE3G,CAAC,OAAOP,CAAC,EAAE,C;IAEZ,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAqD,eAAe,CAAC;EAC1C;EAEA+E,oBAAoBA,CAACpH,KAA6B;IAC9C,IAAI;MACA,MAAM4F,MAAM,GAAGC,cAAc,CAAC7F,KAAK,CAACiB,IAAI,CAAC;MACzC,MAAMoG,IAAI,GAAa,EAAE;MACzB,MAAMC,UAAU,GAAGnI,OAAO,CAAC2G,OAAO,CAACF,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC/F,OAAO,EAAE,EAAEwH,IAAI,CAAC;MACpE,MAAMpG,IAAI,GAA0B;QAChCsG,GAAG,EAAED,UAAU;QACfD,IAAI,EAAEA;OACT;MACD,OAAO9G,OAAO,CAACW,OAAO,CAACD,IAAI,CAAC;KAC/B,CAAC,OAAOD,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAwI,yBAAyB,CAAC;;EAExD;EAEAC,iBAAiBA,CAACzH,KAA0B;IACxC,IAAI;MACA,MAAM0H,GAAG,GAAGvI,OAAO,CAACsI,iBAAiB,CAACzH,KAAK,CAACuH,GAAG,EAAEvH,KAAK,CAAC2H,IAAgB,EAAE,KAAK,CAAC;MAC/E,OAAOpH,OAAO,CAACW,OAAO,CAACwG,GAAG,CAAC;KAC9B,CAAC,OAAO1G,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA4I,sBAAsB,CAAC;;EAErD;EAEA,MAAMC,gBAAgBA,CAAC7H,KAA6B;IAChD,IAAI;MACA,MAAM8H,OAAO,GAAG,MAAM,IAAI,CAACC,WAAW,CAAC/H,KAAqB,CAAC;MAC7D,OAAOO,OAAO,CAACW,OAAO,CAAC;QAACmG,IAAI,EAAES;MAAO,CAAC,CAAC;KAC1C,CAAC,OAAO9G,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAwI,yBAAyB,CAAC;;EAExD;EAEA,MAAMQ,mBAAmBA,CAAChI,KAAsB;IAC5C,IAAI;MACA,OAAOO,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC8I,OAAO,CAACD,mBAAmB,CAAChI,KAAK,CAACqH,IAAI,EAAErH,KAAK,CAAC2H,IAAc,EAAE3H,KAAK,CAACqB,SAAU,CAAC,CAAC;KAClH,CAAC,OAAOL,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA4I,sBAAsB,CAAC;;EAErD;EAEAM,yBAAyBA,CAAClI,KAAmB;IACzC,IAAI;MACA,MAAM2C,IAAI,GAAG3C,KAAK,CAACiB,IAAI,CAAC0B,IAAI,IAAI,CAAC;MACjC,MAAMiD,MAAM,GAAGC,cAAc,CAAC7F,KAAK,CAACiB,IAAI,CAAC;MACzC,IAAI0B,IAAI,KAAK,CAAC,EAAE;QACZ,MAAMwF,MAAM,GAAGhJ,OAAO,CAAC2G,OAAO,CAACF,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC/F,OAAO,EAAE,EAAEuI,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;QACjF,MAAMC,QAAQ,GAAGzC,MAAM,CAACyC,QAAQ,IAAI,GAAG;QACvC,IAAIC,QAAQ,CAACH,MAAM,CAAC,IAAIE,QAAQ,EAAE;UAC9B,MAAME,UAAU,GAAG;YACfhH,OAAO,EAAEqE,MAAM,CAACrE,OAAO;YACvBiH,MAAM,EAAEF,QAAQ,CAACH,MAAM,CAAC;YACxBM,eAAe,EAAE7C,MAAM,CAAC6C;WACL;UACvB7C,MAAM,CAAC8C,OAAO,CAACvB,IAAI,CAACoB,UAAmB,CAAC;;QAE5C,MAAMb,GAAG,GAAGvI,OAAO,CAACuG,SAAS,CAACE,MAAM,EAAE,IAAI,CAAC/F,OAAO,EAAE,CAAC;QACrD,OAAOU,OAAO,CAACW,OAAO,CAACwG,GAAG,CAAC;OAC9B,MAAM;QAEH,MAAMA,GAAG,GAAGvI,OAAO,CAAC2G,OAAO,CAACF,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC/F,OAAO,EAAE,EAAEuI,SAAS,EAAE,IAAI,CAAC;QACxE,OAAO7H,OAAO,CAACW,OAAO,CAACwG,GAAG,CAAC;;KAElC,CAAC,OAAO1G,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA2J,8BAA8B,CAAC;;EAE7D;EAEA,MAAMC,UAAUA,CAAC5I,KAAuB;IACpC,IAAI;MACA,OAAOO,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC0J,WAAW,CAAC5B,OAAO,CAACjH,KAAK,CAACiB,IAAc,CAAC,CAAC6H,KAAK,EAAE,CAAC;KACpF,CAAC,OAAO9H,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+J,eAAe,CAAC;;EAE9C;EAEAC,qBAAqBA,CAAAC,IAAA,EAA0D;IAAA,IAAzD;MAAChB,OAAO;MAAE1G;IAAO,CAAwC,GAAA0H,IAAA;IAC3E,OAAO,IAAA1J,SAAA,CAAAyJ,qBAAqB,EAAC;MAACf,OAAO,EAACA,OAAO;MAAC1G,OAAO,EAACA,OAAO;MAAC1B,OAAO,EAAC,IAAI,CAACA,OAAO;IAAE,CAAC,CAAC;EAC1F;EAEAqJ,kCAAkCA,CAACC,SAAiB;IAChD,IAAIC,EAAE,GAAG9J,MAAA,CAAA+J,IAAI,CAACC,UAAU,CAACH,SAAS,CAAC;IACnC,IAAI;MACAC,EAAE,CAACG,iBAAiB,EAAE;KACzB,CAAC,OAAOvI,CAAC,EAAE,C;IAEZ,IAAIyC,SAAS,GAAG,IAAAlE,SAAA,CAAA2J,kCAAkC,EAACE,EAAE,CAAC;IACtD,OAAO7I,OAAO,CAACW,OAAO,CAACuC,SAAS,CAAC;EACrC;EAEAsE,WAAWA,CAAC/H,KAAmB;IAC3B,IAAI;MACA,MAAMwJ,YAAY,GAAGxJ,KAAK,CAACiB,IAAoB;MAC/C,IAAIwC,SAAS;MACb,IAAI+F,YAAY,CAAC7G,IAAI,KAAKnD,OAAA,CAAAC,qBAAqB,EAAE;QAC7CgE,SAAS,GAAGtE,OAAO,CAAC8I,OAAO,CAACwB,IAAI,CAACzJ,KAAK,CAACe,UAAU,EAAEyI,YAAY,CAACvB,OAAO,EAAE,IAAI,CAACpI,OAAO,EAAE,CAAC;OAC3F,MAAM;QACH4D,SAAS,GAAGtE,OAAO,CAACuK,OAAO,CAACC,UAAU,CAACH,YAAY,CAACvB,OAAO,EAAEuB,YAAY,CAACjI,OAAQ,EAAEvB,KAAK,CAACe,UAAU,EAAE,IAAI,CAAClB,OAAO,EAAE,CAAC;;MAEzH,OAAOU,OAAO,CAACW,OAAO,CAACuC,SAAS,CAAC;KACpC,CAAC,OAAOzC,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA4K,YAAY,CAAC;;EAE3C;EAEA,MAAMC,aAAaA,CAAC7J,KAA0B;IAC1C,IAAI;MACA,MAAMwJ,YAAY,GAAGxJ,KAAK,CAACiB,IAAoB;MAC/C,IAAIuI,YAAY,CAAC7G,IAAI,KAAKnD,OAAA,CAAAC,qBAAqB,EAAE;QAC7C,MAAMqK,GAAG,GAAG3K,OAAO,CAAC8I,OAAO,CAAC8B,MAAM,CAACP,YAAY,CAACnI,SAAU,EAAEmI,YAAY,CAACvB,OAAO,EAAEjI,KAAK,CAACyD,SAAS,CAAC;QAClG,OAAOlD,OAAO,CAACW,OAAO,CAAC4I,GAAG,CAAC;OAC9B,MAAM;QACH,MAAMA,GAAG,GAAG3K,OAAO,CAACuK,OAAO,CAACM,YAAY,CAACR,YAAY,CAACvB,OAAO,EAAEuB,YAAY,CAACjI,OAAQ,EAAEvB,KAAK,CAACyD,SAAS,EAAE+F,YAAY,CAACnI,SAAU,EAAE,IAAI,CAACxB,OAAO,EAAE,CAAC;QAC/I,OAAOU,OAAO,CAACW,OAAO,CAAC4I,GAAG,CAAC;;KAElC,CAAC,OAAO9I,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA4K,YAAY,CAAC;;EAE3C;EAEA,aAAaK,sBAAsBA,CAACtE,KAAa;IAC7C,IAAI;MACA,OAAOpF,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC8K,sBAAsB,CAACtE,KAAK,CAAC,CAAC;KAChE,CAAC,OAAO3E,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA4K,YAAY,CAAC;;EAE3C;EAEA,MAAMM,sBAAsBA,CAAClK,KAAmC;IAC5D,IAAI;MACA,IAAIA,KAAK,CAACiB,IAAI,EAAE;QACZjB,KAAK,CAACiB,IAAI,CAACkJ,OAAO,CAAEC,CAAM,IAAKA,CAAC,CAACC,KAAK,GAAGD,CAAC,CAAC5B,MAAM,CAAC;;MAGtD,MAAMY,EAAE,GAAGjK,OAAO,CAACmL,sBAAsB,CAACtK,KAAK,CAACoJ,EAAE,EAAEpJ,KAAK,CAACiB,IAAI,EAAE,IAAI,CAACpB,OAAO,EAAE,CAAC;MAC/E,OAAOU,OAAO,CAACW,OAAO,CAAC,IAAAlC,WAAA,CAAAuL,oBAAoB,EAACnB,EAAE,CAAC,CAAC;KACnD,CAAC,OAAOpI,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAAwL,2BAA2B,CAAC;;EAE1D;EAEA,MAAMC,WAAWA,CAACzK,KAAmB;IACjC,IAAI;MACA,MAAM2C,IAAI,GAAG3C,KAAK,CAACiB,IAAI,CAAC0B,IAAI,IAAI,CAAC;MACjC,IAAIA,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACC,QAAQ,EAAE;QACvC,OAAOtC,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;OAC1C,MAAM,IAAI/H,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACI,IAAI,EAAE;QAC1C,OAAOzC,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;OAC1C,MAAM,IAAI/H,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACkC,IAAI,EAAE;QAC1C,IAAI;UACA,IAAIC,MAAM,GAAG,IAAI1F,OAAA,CAAA2F,UAAU,EAAE;UAC7B,IAAI,IAAI,CAACnF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;YACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAA6F,cAAc,EAAE;;UAEjC,OAAO3E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAAC0F,WAAW,CAACzK,KAAK,CAAC,CAAC;SACpD,CAAC,OAAOgB,CAAC,EAAE;UACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;;OAE9C,MAAM,IAAI/H,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACuC,QAAQ,EAAE;QAC9C,IAAI;UACA,IAAIJ,MAAM,GAAG,IAAI1F,OAAA,CAAA+F,cAAc,EAAE;UACjC,IAAI,IAAI,CAACvF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;YACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAgG,kBAAkB,EAAE;;UAErC,OAAO9E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAAC0F,WAAW,CAACzK,KAAK,CAAC,CAAC;SACpD,CAAC,OAAOgB,CAAC,EAAE;UACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;;OAE9C,MAAM,IAAI/H,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAAC0C,KAAK,EAAE;QAC3C,IAAI;UACA,IAAIP,MAAM,GAAG,IAAI1F,OAAA,CAAAkG,cAAc,EAAE;UACjC,IAAI,IAAI,CAAC1F,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;YACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAmG,kBAAkB,EAAE;;UAErC,OAAOjF,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAAC0F,WAAW,CAACzK,KAAK,CAAC,CAAC;SACpD,CAAC,OAAOgB,CAAC,EAAE;UACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;;OAE9C,MAAM;QACH,MAAM9E,MAAM,GAAGC,cAAc,CAAC7F,KAAK,CAACiB,IAAI,CAAC;QACzC,MAAM0J,GAAG,GAAGxL,OAAO,CAACyL,cAAc,CAAChF,MAAM,EAAE,IAAI,CAAC/F,OAAO,EAAE,CAAC;QAC1D,OAAOU,OAAO,CAACW,OAAO,CAACyJ,GAAG,CAAC;;KAElC,CAAC,OAAO3J,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA0L,gBAAgB,CAAC;;EAE/C;EAEA,aAAaG,gBAAgBA,CAACC,MAAsB;IAChD,IAAI;MACA,OAAOvK,OAAO,CAACW,OAAO,CAAC/B,OAAO,CAAC0L,gBAAgB,CAACC,MAAM,CAAC,CAAC;KAC3D,CAAC,OAAO9J,CAAC,EAAE;MACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;EAE1C;EAEA,MAAM2C,SAASA,CAAC1F,KAAmB;IAC/B,MAAM2C,IAAI,GAAG3C,KAAK,CAACiB,IAAI,CAAC0B,IAAI,IAAI,CAAC;IACjC,IAAIA,IAAI,KAAKxD,OAAO,CAACyD,WAAW,CAACuC,QAAQ,EAAE;MACvC,IAAI;QACA,IAAIJ,MAAM,GAAG,IAAI1F,OAAA,CAAA+F,cAAc,EAAE;QACjC,IAAI,IAAI,CAACvF,OAAO,EAAE,KAAKR,OAAA,CAAAS,QAAQ,CAACmF,OAAO,EAAE;UACrCF,MAAM,GAAG,IAAI1F,OAAA,CAAAgG,kBAAkB,EAAE;;QAErC,OAAO9E,OAAO,CAACW,OAAO,CAAC6D,MAAM,CAACW,SAAS,CAAC1F,KAAK,CAAC,CAAC;OAClD,CAAC,OAAOgB,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;KAEzC,MAAM;MACH,IAAI4C,KAAK,GAAG,IAAI;MAChB,IAAI;QACA,OAAOpF,OAAO,CAACW,OAAO,CAACyE,KAAK,CAAC;OAChC,CAAC,OAAO3E,CAAC,EAAE;QACR,OAAOT,OAAO,CAACC,MAAM,CAACxB,WAAA,CAAA+D,WAAW,CAAC;;;EAG9C;;AAjgBJvD,OAAA,CAAAG,SAAA,GAAAA,SAAA;AAqgBA,MAAaoL,UAAW,SAAQpL,SAAS;EACrCE,OAAOA,CAAA;IACH,OAAOV,OAAO,CAACW,QAAQ,CAACmF,OAAO;EACnC;;AAHJzF,OAAA,CAAAuL,UAAA,GAAAA,UAAA;AAMA,SAAgBC,UAAUA,CAACC,CAAS,EAAEC,MAAc;EAChD,IAAIC,CAAC,GAAGF,CAAC,CAACG,QAAQ,CAAC,EAAE,CAAC;EACtB,MAAMC,CAAC,GAAGH,MAAM,GAAGC,CAAC,CAACD,MAAM;EAC3B,IAAIG,CAAC,GAAG,CAAC,EAAE;IACP,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,CAAC,EAAEC,CAAC,EAAE,EAAE;MACxBH,CAAC,GAAG,GAAG,GAAGA,CAAC;;;EAGnB,OAAOA,CAAC;AACZ;AATA3L,OAAA,CAAAwL,UAAA,GAAAA,UAAA;AAWA,SAAgBnF,cAAcA,CAACD,MAAW;EACtC,MAAMwD,EAAE,GAAG,IAAApK,WAAA,CAAAuM,WAAW,EAAC3F,MAAM,CAAC;EAC9BwD,EAAE,CAACoC,MAAM,CAACrB,OAAO,CAAEsB,EAAO,IAAI;IAC1BA,EAAE,CAACjD,MAAM,GAAG,IAAAxJ,WAAA,CAAA0M,cAAc,EAACD,EAAE,CAACjD,MAAM,CAAC;EACzC,CAAC,CAAC;EAEFY,EAAE,CAACV,OAAO,CAACyB,OAAO,CAAEsB,EAAO,IAAI;IAC3BA,EAAE,CAACjD,MAAM,GAAG,IAAAxJ,WAAA,CAAA0M,cAAc,EAACD,EAAE,CAACjD,MAAM,CAAC;EACzC,CAAC,CAAC;EAEF,IAAIY,EAAE,CAACuC,IAAI,EAAE;IACTvC,EAAE,CAACuC,IAAI,CAACnD,MAAM,GAAG,IAAAxJ,WAAA,CAAA0M,cAAc,EAACtC,EAAE,CAACuC,IAAI,CAACnD,MAAM,CAAC;;EAGnD,IAAI5C,MAAM,CAACyC,QAAQ,EAAE;IACjBe,EAAE,CAACf,QAAQ,GAAG,IAAArJ,WAAA,CAAA0M,cAAc,EAAC9F,MAAM,CAACyC,QAAQ,CAAC;;EAEjD,OAAOe,EAAE;AACb;AAlBA5J,OAAA,CAAAqG,cAAA,GAAAA,cAAA"}]}