{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--16!/Users/apple/IdeaProjects/onLinePayMerchant/src/utils/okxReq.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/utils/okxReq.js","mtime":1730111979269},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Y29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpOwpjb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTsKY29uc3QgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpOwpjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7CgovLyDlrprkuYkgQVBJIOWHreivgeWSjOmhueebriBJRApjb25zdCBhcGlfY29uZmlnID0gewogICJhcGlfa2V5IjogJzFiMGNlMDc4LWZhYmMtNDQxMS1iMmIzLWRhM2FhYTVmNmNiMycsCiAgInNlY3JldF9rZXkiOiAnMkRFNDJDODA4RTkxQ0Q3NTFCMDdCMUZEMjZCRDVENUUnLAogICJwYXNzcGhyYXNlIjogJ1FhendzeDY2Ni4nLAogICJwcm9qZWN0IjogJ2JlNWY1YjNmMzUxZmRhOTVhNmE5NDNhYmIyM2FkYjRkJyAvLyDmraTlpITku4XpgILnlKjkuo4gV2FhUyBBUElzCn07CmNvbnN0IHVybCA9ICJodHRwczovL3d3dy5va3guY29tIjsKZnVuY3Rpb24gcHJlSGFzaCh0aW1lc3RhbXAsIG1ldGhvZCwgcmVxdWVzdF9wYXRoLCBwYXJhbXMpIHsKICAvLyDmoLnmja7lrZfnrKbkuLLlkozlj4LmlbDliJvlu7rpooTnrb7lkI0KICBsZXQgcXVlcnlfc3RyaW5nID0gJyc7CiAgaWYgKG1ldGhvZCA9PT0gJ0dFVCcgJiYgcGFyYW1zKSB7CiAgICBxdWVyeV9zdHJpbmcgPSAnPycgKyBxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKTsKICB9CiAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnICYmIHBhcmFtcykgewogICAgcXVlcnlfc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zKTsKICB9CiAgcmV0dXJuIHRpbWVzdGFtcCArIG1ldGhvZCArIHJlcXVlc3RfcGF0aCArIHF1ZXJ5X3N0cmluZzsKfQpmdW5jdGlvbiBzaWduKG1lc3NhZ2UsIHNlY3JldF9rZXkpIHsKICAvLyDkvb/nlKggSE1BQy1TSEEyNTYg5a+56aKE562+5ZCN5a2X56ym5Liy6L+b6KGM562+5ZCNCiAgY29uc3QgaG1hYyA9IGNyeXB0by5jcmVhdGVIbWFjKCdzaGEyNTYnLCBzZWNyZXRfa2V5KTsKICBobWFjLnVwZGF0ZShtZXNzYWdlKTsKICByZXR1cm4gaG1hYy5kaWdlc3QoJ2Jhc2U2NCcpOwp9CmZ1bmN0aW9uIGNyZWF0ZVNpZ25hdHVyZShtZXRob2QsIHJlcXVlc3RfcGF0aCwgcGFyYW1zKSB7CiAgLy8g6I635Y+WIElTTyA4NjAxIOagvOW8j+aXtumXtOaIswogIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtNSkgKyAnWic7CiAgLy8g55Sf5oiQ562+5ZCNCiAgY29uc3QgbWVzc2FnZSA9IHByZUhhc2godGltZXN0YW1wLCBtZXRob2QsIHJlcXVlc3RfcGF0aCwgcGFyYW1zKTsKICBjb25zb2xlLmxvZyhtZXNzYWdlKTsKICBjb25zdCBzaWduYXR1cmUgPSBzaWduKG1lc3NhZ2UsIGFwaV9jb25maWdbJ3NlY3JldF9rZXknXSk7CiAgY29uc29sZS5sb2coc2lnbmF0dXJlKTsKICByZXR1cm4gewogICAgc2lnbmF0dXJlLAogICAgdGltZXN0YW1wCiAgfTsKfQphc3luYyBmdW5jdGlvbiBzZW5kR2V0UmVxdWVzdChyZXF1ZXN0X3BhdGgsIHBhcmFtcykgewogIC8vIOeUn+aIkOetvuWQjQogIGNvbnN0IHsKICAgIHNpZ25hdHVyZSwKICAgIHRpbWVzdGFtcAogIH0gPSBjcmVhdGVTaWduYXR1cmUoIkdFVCIsIHJlcXVlc3RfcGF0aCwgcGFyYW1zKTsKCiAgLy8g55Sf5oiQ6K+35rGC5aS0CiAgY29uc3QgaGVhZGVycyA9IHsKICAgICdPSy1BQ0NFU1MtS0VZJzogYXBpX2NvbmZpZ1snYXBpX2tleSddLAogICAgJ09LLUFDQ0VTUy1TSUdOJzogc2lnbmF0dXJlLAogICAgJ09LLUFDQ0VTUy1USU1FU1RBTVAnOiB0aW1lc3RhbXAsCiAgICAnT0stQUNDRVNTLVBBU1NQSFJBU0UnOiBhcGlfY29uZmlnWydwYXNzcGhyYXNlJ10sCiAgICAnT0stQUNDRVNTLVBST0pFQ1QnOiBhcGlfY29uZmlnWydwcm9qZWN0J10gLy8g6L+Z5LuF6YCC55So5LqOIFdhYVMgQVBJcwogIH07CiAgdHJ5IHsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAke3VybH0ke3JlcXVlc3RfcGF0aH0ke3BhcmFtcyA/IGA/JHtxdWVyeXN0cmluZy5zdHJpbmdpZnkocGFyYW1zKX1gIDogJyd9YCwgewogICAgICBoZWFkZXJzOiBoZWFkZXJzCiAgICB9KTsKICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yLnJlc3BvbnNlID8gZXJyb3IucmVzcG9uc2UuZGF0YSA6IGVycm9yLm1lc3NhZ2UpOwogICAgdGhyb3cgZXJyb3I7CiAgfQp9CmFzeW5jIGZ1bmN0aW9uIHNlbmRQb3N0UmVxdWVzdChyZXF1ZXN0X3BhdGgsIHBhcmFtcykgewogIC8vIOeUn+aIkOetvuWQjQogIGNvbnN0IHsKICAgIHNpZ25hdHVyZSwKICAgIHRpbWVzdGFtcAogIH0gPSBjcmVhdGVTaWduYXR1cmUoIlBPU1QiLCByZXF1ZXN0X3BhdGgsIHBhcmFtcyk7CgogIC8vIOeUn+aIkOivt+axguWktAogIGNvbnN0IGhlYWRlcnMgPSB7CiAgICAnT0stQUNDRVNTLUtFWSc6IGFwaV9jb25maWdbJ2FwaV9rZXknXSwKICAgICdPSy1BQ0NFU1MtU0lHTic6IHNpZ25hdHVyZSwKICAgICdPSy1BQ0NFU1MtVElNRVNUQU1QJzogdGltZXN0YW1wLAogICAgJ09LLUFDQ0VTUy1QQVNTUEhSQVNFJzogYXBpX2NvbmZpZ1sncGFzc3BocmFzZSddLAogICAgJ09LLUFDQ0VTUy1QUk9KRUNUJzogYXBpX2NvbmZpZ1sncHJvamVjdCddLAogICAgLy8g6L+Z5LuF6YCC55So5LqOIFdhYVMgQVBJcwogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyAvLyDmoLnmja7lrp7pmYXmg4XlhrXosIPmlbQgQ29udGVudC1UeXBlCiAgfTsKICB0cnkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KGAke3VybH0ke3JlcXVlc3RfcGF0aH1gLCBwYXJhbXMsIHsKICAgICAgaGVhZGVyczogaGVhZGVycwogICAgfSk7CiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IucmVzcG9uc2UgPyBlcnJvci5yZXNwb25zZS5kYXRhIDogZXJyb3IubWVzc2FnZSk7CiAgICB0aHJvdyBlcnJvcjsKICB9Cn0KZXhwb3J0IGRlZmF1bHQgewogIHNlbmRHZXRSZXF1ZXN0LAogIHNlbmRQb3N0UmVxdWVzdAp9Ow=="},{"version":3,"names":["https","require","crypto","querystring","axios","api_config","url","preHash","timestamp","method","request_path","params","query_string","stringify","JSON","sign","message","secret_key","hmac","createHmac","update","digest","createSignature","Date","toISOString","slice","console","log","signature","sendGetRequest","headers","response","get","data","error","sendPostRequest","post"],"sources":["/Users/apple/IdeaProjects/onLinePayMerchant/src/utils/okxReq.js"],"sourcesContent":["const https = require('https');\nconst crypto = require('crypto');\nconst querystring = require('querystring');\nconst axios = require('axios');\n\n// 定义 API 凭证和项目 ID\nconst api_config = {\n\t\"api_key\": '1b0ce078-fabc-4411-b2b3-da3aaa5f6cb3',\n\t\"secret_key\": '2DE42C808E91CD751B07B1FD26BD5D5E',\n\t\"passphrase\": 'Qazwsx666.',\n\t\"project\": 'be5f5b3f351fda95a6a943abb23adb4d' // 此处仅适用于 WaaS APIs\n};\n\nconst url = \"https://www.okx.com\";\n\nfunction preHash(timestamp, method, request_path, params) {\n\t// 根据字符串和参数创建预签名\n\tlet query_string = '';\n\tif (method === 'GET' && params) {\n\t\tquery_string = '?' + querystring.stringify(params);\n\t}\n\tif (method === 'POST' && params) {\n\t\tquery_string = JSON.stringify(params);\n\t}\n\treturn timestamp + method + request_path + query_string;\n}\n\nfunction sign(message, secret_key) {\n\t// 使用 HMAC-SHA256 对预签名字符串进行签名\n\tconst hmac = crypto.createHmac('sha256', secret_key);\n\thmac.update(message);\n\treturn hmac.digest('base64');\n}\n\nfunction createSignature(method, request_path, params) {\n\t// 获取 ISO 8601 格式时间戳\n\tconst timestamp = new Date().toISOString().slice(0, -5) + 'Z';\n\t// 生成签名\n\tconst message = preHash(timestamp, method, request_path, params);\n\tconsole.log(message);\n\tconst signature = sign(message, api_config['secret_key']);\n\tconsole.log(signature);\n\treturn { signature, timestamp };\n}\n\nasync function sendGetRequest(request_path, params) {\n\t// 生成签名\n\tconst { signature, timestamp } = createSignature(\"GET\", request_path, params);\n\n\t// 生成请求头\n\tconst headers = {\n\t\t'OK-ACCESS-KEY': api_config['api_key'],\n\t\t'OK-ACCESS-SIGN': signature,\n\t\t'OK-ACCESS-TIMESTAMP': timestamp,\n\t\t'OK-ACCESS-PASSPHRASE': api_config['passphrase'],\n\t\t'OK-ACCESS-PROJECT': api_config['project'] // 这仅适用于 WaaS APIs\n\t};\n\n\ttry {\n\t\tconst response = await axios.get(`${url}${request_path}${params ? `?${querystring.stringify(params)}` : ''}`, {\n\t\t\theaders: headers\n\t\t});\n\n\t\tconsole.log(response.data);\n\t\treturn response.data;\n\t} catch (error) {\n\t\tconsole.error('Error:', error.response ? error.response.data : error.message);\n\t\tthrow error;\n\t}\n}\n\nasync function sendPostRequest(request_path, params) {\n\t// 生成签名\n\tconst { signature, timestamp } = createSignature(\"POST\", request_path, params);\n\n\t// 生成请求头\n\tconst headers = {\n\t\t'OK-ACCESS-KEY': api_config['api_key'],\n\t\t'OK-ACCESS-SIGN': signature,\n\t\t'OK-ACCESS-TIMESTAMP': timestamp,\n\t\t'OK-ACCESS-PASSPHRASE': api_config['passphrase'],\n\t\t'OK-ACCESS-PROJECT': api_config['project'], // 这仅适用于 WaaS APIs\n\t\t'Content-Type': 'application/json' // 根据实际情况调整 Content-Type\n\t};\n\n\ttry {\n\t\tconst response = await axios.post(`${url}${request_path}`, params, {\n\t\t\theaders: headers\n\t\t});\n\n\t\treturn response.data;\n\t} catch (error) {\n\t\tconsole.error('Error:', error.response ? error.response.data : error.message);\n\t\tthrow error;\n\t}\n}\nexport default {sendGetRequest,sendPostRequest}\n"],"mappings":"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"}]}