{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/psbt/bip371.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/psbt/bip371.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuY2hlY2tUYXByb290SW5wdXRGb3JTaWdzID0gZXhwb3J0cy50YXBUcmVlRnJvbUxpc3QgPSBleHBvcnRzLnRhcFRyZWVUb0xpc3QgPSBleHBvcnRzLnR3ZWFrSW50ZXJuYWxQdWJLZXkgPSBleHBvcnRzLmNoZWNrVGFwcm9vdE91dHB1dEZpZWxkcyA9IGV4cG9ydHMuY2hlY2tUYXByb290SW5wdXRGaWVsZHMgPSBleHBvcnRzLmlzVGFwcm9vdE91dHB1dCA9IGV4cG9ydHMuaXNUYXByb290SW5wdXQgPSBleHBvcnRzLnNlcmlhbGl6ZVRhcHJvb3RTaWduYXR1cmUgPSBleHBvcnRzLnRhcFNjcmlwdEZpbmFsaXplciA9IGV4cG9ydHMudG9YT25seSA9IHZvaWQgMDsKY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoIi4uL3R5cGVzIik7CmNvbnN0IHRyYW5zYWN0aW9uXzEgPSByZXF1aXJlKCIuLi90cmFuc2FjdGlvbiIpOwpjb25zdCBwc2J0dXRpbHNfMSA9IHJlcXVpcmUoIi4vcHNidHV0aWxzIik7CmNvbnN0IGJpcDM0MV8xID0gcmVxdWlyZSgiLi4vcGF5bWVudHMvYmlwMzQxIik7CmNvbnN0IHBheW1lbnRzXzEgPSByZXF1aXJlKCIuLi9wYXltZW50cyIpOwpjb25zdCBwc2J0dXRpbHNfMiA9IHJlcXVpcmUoIi4vcHNidHV0aWxzIik7CmNvbnN0IHRvWE9ubHkgPSBwdWJLZXkgPT4gcHViS2V5Lmxlbmd0aCA9PT0gMzIgPyBwdWJLZXkgOiBwdWJLZXkuc2xpY2UoMSwgMzMpOwpleHBvcnRzLnRvWE9ubHkgPSB0b1hPbmx5OwpmdW5jdGlvbiB0YXBTY3JpcHRGaW5hbGl6ZXIoaW5wdXRJbmRleCwgaW5wdXQsIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSkgewogIGNvbnN0IHRhcExlYWYgPSBmaW5kVGFwTGVhZlRvRmluYWxpemUoaW5wdXQsIGlucHV0SW5kZXgsIHRhcExlYWZIYXNoVG9GaW5hbGl6ZSk7CiAgdHJ5IHsKICAgIGNvbnN0IHNpZ3MgPSBzb3J0U2lnbmF0dXJlcyhpbnB1dCwgdGFwTGVhZik7CiAgICBjb25zdCB3aXRuZXNzID0gc2lncy5jb25jYXQodGFwTGVhZi5zY3JpcHQpLmNvbmNhdCh0YXBMZWFmLmNvbnRyb2xCbG9jayk7CiAgICByZXR1cm4gewogICAgICBmaW5hbFNjcmlwdFdpdG5lc3M6ICgwLCBwc2J0dXRpbHNfMS53aXRuZXNzU3RhY2tUb1NjcmlwdFdpdG5lc3MpKHdpdG5lc3MpCiAgICB9OwogIH0gY2F0Y2ggKGVycikgewogICAgdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGZpbmFsaXplIHRhcHJvb3QgaW5wdXQgIyR7aW5wdXRJbmRleH06ICR7ZXJyfWApOwogIH0KfQpleHBvcnRzLnRhcFNjcmlwdEZpbmFsaXplciA9IHRhcFNjcmlwdEZpbmFsaXplcjsKZnVuY3Rpb24gc2VyaWFsaXplVGFwcm9vdFNpZ25hdHVyZShzaWcsIHNpZ2hhc2hUeXBlKSB7CiAgY29uc3Qgc2lnaGFzaFR5cGVCeXRlID0gc2lnaGFzaFR5cGUgPyBCdWZmZXIuZnJvbShbc2lnaGFzaFR5cGVdKSA6IEJ1ZmZlci5mcm9tKFtdKTsKICByZXR1cm4gQnVmZmVyLmNvbmNhdChbc2lnLCBzaWdoYXNoVHlwZUJ5dGVdKTsKfQpleHBvcnRzLnNlcmlhbGl6ZVRhcHJvb3RTaWduYXR1cmUgPSBzZXJpYWxpemVUYXByb290U2lnbmF0dXJlOwpmdW5jdGlvbiBpc1RhcHJvb3RJbnB1dChpbnB1dCkgewogIHJldHVybiBpbnB1dCAmJiAhIShpbnB1dC50YXBJbnRlcm5hbEtleSB8fCBpbnB1dC50YXBNZXJrbGVSb290IHx8IGlucHV0LnRhcExlYWZTY3JpcHQgJiYgaW5wdXQudGFwTGVhZlNjcmlwdC5sZW5ndGggfHwgaW5wdXQudGFwQmlwMzJEZXJpdmF0aW9uICYmIGlucHV0LnRhcEJpcDMyRGVyaXZhdGlvbi5sZW5ndGggfHwgaW5wdXQud2l0bmVzc1V0eG8gJiYgKDAsIHBzYnR1dGlsc18xLmlzUDJUUikoaW5wdXQud2l0bmVzc1V0eG8uc2NyaXB0KSk7Cn0KZXhwb3J0cy5pc1RhcHJvb3RJbnB1dCA9IGlzVGFwcm9vdElucHV0OwpmdW5jdGlvbiBpc1RhcHJvb3RPdXRwdXQob3V0cHV0LCBzY3JpcHQpIHsKICByZXR1cm4gb3V0cHV0ICYmICEhKG91dHB1dC50YXBJbnRlcm5hbEtleSB8fCBvdXRwdXQudGFwVHJlZSB8fCBvdXRwdXQudGFwQmlwMzJEZXJpdmF0aW9uICYmIG91dHB1dC50YXBCaXAzMkRlcml2YXRpb24ubGVuZ3RoIHx8IHNjcmlwdCAmJiAoMCwgcHNidHV0aWxzXzEuaXNQMlRSKShzY3JpcHQpKTsKfQpleHBvcnRzLmlzVGFwcm9vdE91dHB1dCA9IGlzVGFwcm9vdE91dHB1dDsKZnVuY3Rpb24gY2hlY2tUYXByb290SW5wdXRGaWVsZHMoaW5wdXREYXRhLCBuZXdJbnB1dERhdGEsIGFjdGlvbikgewogIGNoZWNrTWl4ZWRUYXByb290QW5kTm9uVGFwcm9vdElucHV0RmllbGRzKGlucHV0RGF0YSwgbmV3SW5wdXREYXRhLCBhY3Rpb24pOwogIGNoZWNrSWZUYXBMZWFmSW5UcmVlKGlucHV0RGF0YSwgbmV3SW5wdXREYXRhLCBhY3Rpb24pOwp9CmV4cG9ydHMuY2hlY2tUYXByb290SW5wdXRGaWVsZHMgPSBjaGVja1RhcHJvb3RJbnB1dEZpZWxkczsKZnVuY3Rpb24gY2hlY2tUYXByb290T3V0cHV0RmllbGRzKG91dHB1dERhdGEsIG5ld091dHB1dERhdGEsIGFjdGlvbikgewogIGNoZWNrTWl4ZWRUYXByb290QW5kTm9uVGFwcm9vdE91dHB1dEZpZWxkcyhvdXRwdXREYXRhLCBuZXdPdXRwdXREYXRhLCBhY3Rpb24pOwogIGNoZWNrVGFwcm9vdFNjcmlwdFB1YmtleShvdXRwdXREYXRhLCBuZXdPdXRwdXREYXRhKTsKfQpleHBvcnRzLmNoZWNrVGFwcm9vdE91dHB1dEZpZWxkcyA9IGNoZWNrVGFwcm9vdE91dHB1dEZpZWxkczsKZnVuY3Rpb24gY2hlY2tUYXByb290U2NyaXB0UHVia2V5KG91dHB1dERhdGEsIG5ld091dHB1dERhdGEpIHsKICBpZiAoIW5ld091dHB1dERhdGEudGFwVHJlZSAmJiAhbmV3T3V0cHV0RGF0YS50YXBJbnRlcm5hbEtleSkgcmV0dXJuOwogIGNvbnN0IHRhcEludGVybmFsS2V5ID0gbmV3T3V0cHV0RGF0YS50YXBJbnRlcm5hbEtleSB8fCBvdXRwdXREYXRhLnRhcEludGVybmFsS2V5OwogIGNvbnN0IHRhcFRyZWUgPSBuZXdPdXRwdXREYXRhLnRhcFRyZWUgfHwgb3V0cHV0RGF0YS50YXBUcmVlOwogIGlmICh0YXBJbnRlcm5hbEtleSkgewogICAgY29uc3QgewogICAgICBzY3JpcHQ6IHNjcmlwdFB1YmtleQogICAgfSA9IG91dHB1dERhdGE7CiAgICBjb25zdCBzY3JpcHQgPSBnZXRUYXByb290U2NyaXBQdWJrZXkodGFwSW50ZXJuYWxLZXksIHRhcFRyZWUpOwogICAgaWYgKHNjcmlwdFB1YmtleSAmJiAhc2NyaXB0UHVia2V5LmVxdWFscyhzY3JpcHQpKSB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGFkZGluZyBvdXRwdXQuIFNjcmlwdCBvciBhZGRyZXNzIG1pc3NtYXRjaC4nKTsKICB9Cn0KZnVuY3Rpb24gZ2V0VGFwcm9vdFNjcmlwUHVia2V5KHRhcEludGVybmFsS2V5LCB0YXBUcmVlKSB7CiAgY29uc3Qgc2NyaXB0VHJlZSA9IHRhcFRyZWUgJiYgdGFwVHJlZUZyb21MaXN0KHRhcFRyZWUubGVhdmVzKTsKICBjb25zdCB7CiAgICBvdXRwdXQKICB9ID0gKDAsIHBheW1lbnRzXzEucDJ0cikoewogICAgaW50ZXJuYWxQdWJrZXk6IHRhcEludGVybmFsS2V5LAogICAgc2NyaXB0VHJlZQogIH0pOwogIHJldHVybiBvdXRwdXQ7Cn0KZnVuY3Rpb24gdHdlYWtJbnRlcm5hbFB1YktleShpbnB1dEluZGV4LCBpbnB1dCkgewogIGNvbnN0IHRhcEludGVybmFsS2V5ID0gaW5wdXQudGFwSW50ZXJuYWxLZXk7CiAgY29uc3Qgb3V0cHV0S2V5ID0gdGFwSW50ZXJuYWxLZXkgJiYgKDAsIGJpcDM0MV8xLnR3ZWFrS2V5KSh0YXBJbnRlcm5hbEtleSwgaW5wdXQudGFwTWVya2xlUm9vdCk7CiAgaWYgKCFvdXRwdXRLZXkpIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHR3ZWFrIHRhcCBpbnRlcm5hbCBrZXkgZm9yIGlucHV0ICMke2lucHV0SW5kZXh9LiBQdWJsaWMga2V5OiAke3RhcEludGVybmFsS2V5ICYmIHRhcEludGVybmFsS2V5LnRvU3RyaW5nKCdoZXgnKX1gKTsKICByZXR1cm4gb3V0cHV0S2V5Lng7Cn0KZXhwb3J0cy50d2Vha0ludGVybmFsUHViS2V5ID0gdHdlYWtJbnRlcm5hbFB1YktleTsKZnVuY3Rpb24gdGFwVHJlZVRvTGlzdCh0cmVlKSB7CiAgaWYgKCEoMCwgdHlwZXNfMS5pc1RhcHRyZWUpKHRyZWUpKSB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHRhcHRyZWUgdG8gdGFwbGVhZiBsaXN0LiBFeHBlY3RpbmcgYSB0YXByZWUgc3RydWN0dXJlLicpOwogIHJldHVybiBfdGFwVHJlZVRvTGlzdCh0cmVlKTsKfQpleHBvcnRzLnRhcFRyZWVUb0xpc3QgPSB0YXBUcmVlVG9MaXN0OwpmdW5jdGlvbiB0YXBUcmVlRnJvbUxpc3QoKSB7CiAgbGV0IGxlYXZlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgaWYgKGxlYXZlcy5sZW5ndGggPT09IDEgJiYgbGVhdmVzWzBdLmRlcHRoID09PSAwKSByZXR1cm4gewogICAgb3V0cHV0OiBsZWF2ZXNbMF0uc2NyaXB0LAogICAgdmVyc2lvbjogbGVhdmVzWzBdLmxlYWZWZXJzaW9uCiAgfTsKICByZXR1cm4gaW5zdGVydExlYXZlc0luVHJlZShsZWF2ZXMpOwp9CmV4cG9ydHMudGFwVHJlZUZyb21MaXN0ID0gdGFwVHJlZUZyb21MaXN0OwpmdW5jdGlvbiBjaGVja1RhcHJvb3RJbnB1dEZvclNpZ3MoaW5wdXQsIGFjdGlvbikgewogIGNvbnN0IHNpZ3MgPSBleHRyYWN0VGFwcm9vdFNpZ3MoaW5wdXQpOwogIHJldHVybiBzaWdzLnNvbWUoc2lnID0+ICgwLCBwc2J0dXRpbHNfMi5zaWduYXR1cmVCbG9ja3NBY3Rpb24pKHNpZywgZGVjb2RlU2Nobm9yclNpZ25hdHVyZSwgYWN0aW9uKSk7Cn0KZXhwb3J0cy5jaGVja1RhcHJvb3RJbnB1dEZvclNpZ3MgPSBjaGVja1RhcHJvb3RJbnB1dEZvclNpZ3M7CmZ1bmN0aW9uIGRlY29kZVNjaG5vcnJTaWduYXR1cmUoc2lnbmF0dXJlKSB7CiAgcmV0dXJuIHsKICAgIHNpZ25hdHVyZTogc2lnbmF0dXJlLnNsaWNlKDAsIDY0KSwKICAgIGhhc2hUeXBlOiBzaWduYXR1cmUuc2xpY2UoNjQpWzBdIHx8IHRyYW5zYWN0aW9uXzEuVHJhbnNhY3Rpb24uU0lHSEFTSF9ERUZBVUxUCiAgfTsKfQpmdW5jdGlvbiBleHRyYWN0VGFwcm9vdFNpZ3MoaW5wdXQpIHsKICBjb25zdCBzaWdzID0gW107CiAgaWYgKGlucHV0LnRhcEtleVNpZykgc2lncy5wdXNoKGlucHV0LnRhcEtleVNpZyk7CiAgaWYgKGlucHV0LnRhcFNjcmlwdFNpZykgc2lncy5wdXNoKC4uLmlucHV0LnRhcFNjcmlwdFNpZy5tYXAocyA9PiBzLnNpZ25hdHVyZSkpOwogIGlmICghc2lncy5sZW5ndGgpIHsKICAgIGNvbnN0IGZpbmFsVGFwS2V5U2lnID0gZ2V0VGFwS2V5U2lnRnJvbVdpdGhuZXNzKGlucHV0LmZpbmFsU2NyaXB0V2l0bmVzcyk7CiAgICBpZiAoZmluYWxUYXBLZXlTaWcpIHNpZ3MucHVzaChmaW5hbFRhcEtleVNpZyk7CiAgfQogIHJldHVybiBzaWdzOwp9CmZ1bmN0aW9uIGdldFRhcEtleVNpZ0Zyb21XaXRobmVzcyhmaW5hbFNjcmlwdFdpdG5lc3MpIHsKICBpZiAoIWZpbmFsU2NyaXB0V2l0bmVzcykgcmV0dXJuOwogIGNvbnN0IHdpdG5lc3MgPSBmaW5hbFNjcmlwdFdpdG5lc3Muc2xpY2UoMik7CiAgaWYgKHdpdG5lc3MubGVuZ3RoID09PSA2NCB8fCB3aXRuZXNzLmxlbmd0aCA9PT0gNjUpIHJldHVybiB3aXRuZXNzOwp9CmZ1bmN0aW9uIF90YXBUcmVlVG9MaXN0KHRyZWUpIHsKICBsZXQgbGVhdmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICBsZXQgZGVwdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7CiAgaWYgKGRlcHRoID4gYmlwMzQxXzEuTUFYX1RBUFRSRUVfREVQVEgpIHRocm93IG5ldyBFcnJvcignTWF4IHRhcHRyZWUgZGVwdGggZXhjZWVkZWQuJyk7CiAgaWYgKCF0cmVlKSByZXR1cm4gW107CiAgaWYgKCgwLCB0eXBlc18xLmlzVGFwbGVhZikodHJlZSkpIHsKICAgIGxlYXZlcy5wdXNoKHsKICAgICAgZGVwdGgsCiAgICAgIGxlYWZWZXJzaW9uOiB0cmVlLnZlcnNpb24gfHwgYmlwMzQxXzEuTEVBRl9WRVJTSU9OX1RBUFNDUklQVCwKICAgICAgc2NyaXB0OiB0cmVlLm91dHB1dAogICAgfSk7CiAgICByZXR1cm4gbGVhdmVzOwogIH0KICBpZiAodHJlZVswXSkgX3RhcFRyZWVUb0xpc3QodHJlZVswXSwgbGVhdmVzLCBkZXB0aCArIDEpOwogIGlmICh0cmVlWzFdKSBfdGFwVHJlZVRvTGlzdCh0cmVlWzFdLCBsZWF2ZXMsIGRlcHRoICsgMSk7CiAgcmV0dXJuIGxlYXZlczsKfQpmdW5jdGlvbiBpbnN0ZXJ0TGVhdmVzSW5UcmVlKGxlYXZlcykgewogIGxldCB0cmVlOwogIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHsKICAgIHRyZWUgPSBpbnN0ZXJ0TGVhZkluVHJlZShsZWFmLCB0cmVlKTsKICAgIGlmICghdHJlZSkgdGhyb3cgbmV3IEVycm9yKGBObyByb29tIGxlZnQgdG8gaW5zZXJ0IHRhcGxlYWYgaW4gdHJlZWApOwogIH0KICByZXR1cm4gdHJlZTsKfQpmdW5jdGlvbiBpbnN0ZXJ0TGVhZkluVHJlZShsZWFmLCB0cmVlKSB7CiAgbGV0IGRlcHRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogIGlmIChkZXB0aCA+IGJpcDM0MV8xLk1BWF9UQVBUUkVFX0RFUFRIKSB0aHJvdyBuZXcgRXJyb3IoJ01heCB0YXB0cmVlIGRlcHRoIGV4Y2VlZGVkLicpOwogIGlmIChsZWFmLmRlcHRoID09PSBkZXB0aCkgewogICAgaWYgKCF0cmVlKSByZXR1cm4gewogICAgICBvdXRwdXQ6IGxlYWYuc2NyaXB0LAogICAgICB2ZXJzaW9uOiBsZWFmLmxlYWZWZXJzaW9uCiAgICB9OwogICAgcmV0dXJuOwogIH0KICBpZiAoKDAsIHR5cGVzXzEuaXNUYXBsZWFmKSh0cmVlKSkgcmV0dXJuOwogIGNvbnN0IGxlZnRTaWRlID0gaW5zdGVydExlYWZJblRyZWUobGVhZiwgdHJlZSAmJiB0cmVlWzBdLCBkZXB0aCArIDEpOwogIGlmIChsZWZ0U2lkZSkgcmV0dXJuIFtsZWZ0U2lkZSwgdHJlZSAmJiB0cmVlWzFdXTsKICBjb25zdCByaWdodFNpZGUgPSBpbnN0ZXJ0TGVhZkluVHJlZShsZWFmLCB0cmVlICYmIHRyZWVbMV0sIGRlcHRoICsgMSk7CiAgaWYgKHJpZ2h0U2lkZSkgcmV0dXJuIFt0cmVlICYmIHRyZWVbMF0sIHJpZ2h0U2lkZV07Cn0KZnVuY3Rpb24gY2hlY2tNaXhlZFRhcHJvb3RBbmROb25UYXByb290SW5wdXRGaWVsZHMoaW5wdXREYXRhLCBuZXdJbnB1dERhdGEsIGFjdGlvbikgewogIGNvbnN0IGlzQmFkVGFwcm9vdFVwZGF0ZSA9IGlzVGFwcm9vdElucHV0KGlucHV0RGF0YSkgJiYgaGFzTm9uVGFwcm9vdEZpZWxkcyhuZXdJbnB1dERhdGEpOwogIGNvbnN0IGlzQmFkTm9uVGFwcm9vdFVwZGF0ZSA9IGhhc05vblRhcHJvb3RGaWVsZHMoaW5wdXREYXRhKSAmJiBpc1RhcHJvb3RJbnB1dChuZXdJbnB1dERhdGEpOwogIGNvbnN0IGhhc01peGVkRmllbGRzID0gaW5wdXREYXRhID09PSBuZXdJbnB1dERhdGEgJiYgaXNUYXByb290SW5wdXQobmV3SW5wdXREYXRhKSAmJiBoYXNOb25UYXByb290RmllbGRzKG5ld0lucHV0RGF0YSk7CiAgaWYgKGlzQmFkVGFwcm9vdFVwZGF0ZSB8fCBpc0JhZE5vblRhcHJvb3RVcGRhdGUgfHwgaGFzTWl4ZWRGaWVsZHMpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcmd1bWVudHMgZm9yIFBzYnQuJHthY3Rpb259LiBgICsgYENhbm5vdCB1c2UgYm90aCB0YXByb290IGFuZCBub24tdGFwcm9vdCBmaWVsZHMuYCk7Cn0KZnVuY3Rpb24gY2hlY2tNaXhlZFRhcHJvb3RBbmROb25UYXByb290T3V0cHV0RmllbGRzKGlucHV0RGF0YSwgbmV3SW5wdXREYXRhLCBhY3Rpb24pIHsKICBjb25zdCBpc0JhZFRhcHJvb3RVcGRhdGUgPSBpc1RhcHJvb3RPdXRwdXQoaW5wdXREYXRhKSAmJiBoYXNOb25UYXByb290RmllbGRzKG5ld0lucHV0RGF0YSk7CiAgY29uc3QgaXNCYWROb25UYXByb290VXBkYXRlID0gaGFzTm9uVGFwcm9vdEZpZWxkcyhpbnB1dERhdGEpICYmIGlzVGFwcm9vdE91dHB1dChuZXdJbnB1dERhdGEpOwogIGNvbnN0IGhhc01peGVkRmllbGRzID0gaW5wdXREYXRhID09PSBuZXdJbnB1dERhdGEgJiYgaXNUYXByb290T3V0cHV0KG5ld0lucHV0RGF0YSkgJiYgaGFzTm9uVGFwcm9vdEZpZWxkcyhuZXdJbnB1dERhdGEpOwogIGlmIChpc0JhZFRhcHJvb3RVcGRhdGUgfHwgaXNCYWROb25UYXByb290VXBkYXRlIHx8IGhhc01peGVkRmllbGRzKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnRzIGZvciBQc2J0LiR7YWN0aW9ufS4gYCArIGBDYW5ub3QgdXNlIGJvdGggdGFwcm9vdCBhbmQgbm9uLXRhcHJvb3QgZmllbGRzLmApOwp9CmZ1bmN0aW9uIGNoZWNrSWZUYXBMZWFmSW5UcmVlKGlucHV0RGF0YSwgbmV3SW5wdXREYXRhLCBhY3Rpb24pIHsKICBpZiAobmV3SW5wdXREYXRhLnRhcE1lcmtsZVJvb3QpIHsKICAgIGNvbnN0IG5ld0xlYWZzSW5UcmVlID0gKG5ld0lucHV0RGF0YS50YXBMZWFmU2NyaXB0IHx8IFtdKS5ldmVyeShsID0+IGlzVGFwTGVhZkluVHJlZShsLCBuZXdJbnB1dERhdGEudGFwTWVya2xlUm9vdCkpOwogICAgY29uc3Qgb2xkTGVhZnNJblRyZWUgPSAoaW5wdXREYXRhLnRhcExlYWZTY3JpcHQgfHwgW10pLmV2ZXJ5KGwgPT4gaXNUYXBMZWFmSW5UcmVlKGwsIG5ld0lucHV0RGF0YS50YXBNZXJrbGVSb290KSk7CiAgICBpZiAoIW5ld0xlYWZzSW5UcmVlIHx8ICFvbGRMZWFmc0luVHJlZSkgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50cyBmb3IgUHNidC4ke2FjdGlvbn0uIFRhcGxlYWYgbm90IHBhcnQgb2YgdGFwdHJlZS5gKTsKICB9IGVsc2UgaWYgKGlucHV0RGF0YS50YXBNZXJrbGVSb290KSB7CiAgICBjb25zdCBuZXdMZWFmc0luVHJlZSA9IChuZXdJbnB1dERhdGEudGFwTGVhZlNjcmlwdCB8fCBbXSkuZXZlcnkobCA9PiBpc1RhcExlYWZJblRyZWUobCwgaW5wdXREYXRhLnRhcE1lcmtsZVJvb3QpKTsKICAgIGlmICghbmV3TGVhZnNJblRyZWUpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcmd1bWVudHMgZm9yIFBzYnQuJHthY3Rpb259LiBUYXBsZWFmIG5vdCBwYXJ0IG9mIHRhcHRyZWUuYCk7CiAgfQp9CmZ1bmN0aW9uIGlzVGFwTGVhZkluVHJlZSh0YXBMZWFmLCBtZXJrbGVSb290KSB7CiAgaWYgKCFtZXJrbGVSb290KSByZXR1cm4gdHJ1ZTsKICBjb25zdCBsZWFmSGFzaCA9ICgwLCBiaXAzNDFfMS50YXBsZWFmSGFzaCkoewogICAgb3V0cHV0OiB0YXBMZWFmLnNjcmlwdCwKICAgIHZlcnNpb246IHRhcExlYWYubGVhZlZlcnNpb24KICB9KTsKICBjb25zdCByb290SGFzaCA9ICgwLCBiaXAzNDFfMS5yb290SGFzaEZyb21QYXRoKSh0YXBMZWFmLmNvbnRyb2xCbG9jaywgbGVhZkhhc2gpOwogIHJldHVybiByb290SGFzaC5lcXVhbHMobWVya2xlUm9vdCk7Cn0KZnVuY3Rpb24gc29ydFNpZ25hdHVyZXMoaW5wdXQsIHRhcExlYWYpIHsKICBjb25zdCBsZWFmSGFzaCA9ICgwLCBiaXAzNDFfMS50YXBsZWFmSGFzaCkoewogICAgb3V0cHV0OiB0YXBMZWFmLnNjcmlwdCwKICAgIHZlcnNpb246IHRhcExlYWYubGVhZlZlcnNpb24KICB9KTsKICByZXR1cm4gKGlucHV0LnRhcFNjcmlwdFNpZyB8fCBbXSkuZmlsdGVyKHRzcyA9PiB0c3MubGVhZkhhc2guZXF1YWxzKGxlYWZIYXNoKSkubWFwKHRzcyA9PiBhZGRQdWJrZXlQb3NpdGlvbkluU2NyaXB0KHRhcExlYWYuc2NyaXB0LCB0c3MpKS5zb3J0KCh0MSwgdDIpID0+IHQyLnBvc2l0aW9uSW5TY3JpcHQgLSB0MS5wb3NpdGlvbkluU2NyaXB0KS5tYXAodCA9PiB0LnNpZ25hdHVyZSk7Cn0KZnVuY3Rpb24gYWRkUHVia2V5UG9zaXRpb25JblNjcmlwdChzY3JpcHQsIHRzcykgewogIHJldHVybiBPYmplY3QuYXNzaWduKHsKICAgIHBvc2l0aW9uSW5TY3JpcHQ6ICgwLCBwc2J0dXRpbHNfMS5wdWJrZXlQb3NpdGlvbkluU2NyaXB0KSh0c3MucHVia2V5LCBzY3JpcHQpCiAgfSwgdHNzKTsKfQpmdW5jdGlvbiBmaW5kVGFwTGVhZlRvRmluYWxpemUoaW5wdXQsIGlucHV0SW5kZXgsIGxlYWZIYXNoVG9GaW5hbGl6ZSkgewogIGlmICghaW5wdXQudGFwU2NyaXB0U2lnIHx8ICFpbnB1dC50YXBTY3JpcHRTaWcubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgZmluYWxpemUgdGFwcm9vdCBpbnB1dCAjJHtpbnB1dEluZGV4fS4gTm8gdGFwbGVhZiBzY3JpcHQgc2lnbmF0dXJlIHByb3ZpZGVkLmApOwogIGNvbnN0IHRhcExlYWYgPSAoaW5wdXQudGFwTGVhZlNjcmlwdCB8fCBbXSkuc29ydCgoYSwgYikgPT4gYS5jb250cm9sQmxvY2subGVuZ3RoIC0gYi5jb250cm9sQmxvY2subGVuZ3RoKS5maW5kKGxlYWYgPT4gY2FuRmluYWxpemVMZWFmKGxlYWYsIGlucHV0LnRhcFNjcmlwdFNpZywgbGVhZkhhc2hUb0ZpbmFsaXplKSk7CiAgaWYgKCF0YXBMZWFmKSB0aHJvdyBuZXcgRXJyb3IoYENhbiBub3QgZmluYWxpemUgdGFwcm9vdCBpbnB1dCAjJHtpbnB1dEluZGV4fS4gU2lnbmF0dXJlIGZvciB0YXBsZWFmIHNjcmlwdCBub3QgZm91bmQuYCk7CiAgcmV0dXJuIHRhcExlYWY7Cn0KZnVuY3Rpb24gY2FuRmluYWxpemVMZWFmKGxlYWYsIHRhcFNjcmlwdFNpZywgaGFzaCkgewogIGNvbnN0IGxlYWZIYXNoID0gKDAsIGJpcDM0MV8xLnRhcGxlYWZIYXNoKSh7CiAgICBvdXRwdXQ6IGxlYWYuc2NyaXB0LAogICAgdmVyc2lvbjogbGVhZi5sZWFmVmVyc2lvbgogIH0pOwogIGNvbnN0IHdoaXRlTGlzdGVkSGFzaCA9ICFoYXNoIHx8IGhhc2guZXF1YWxzKGxlYWZIYXNoKTsKICByZXR1cm4gd2hpdGVMaXN0ZWRIYXNoICYmIHRhcFNjcmlwdFNpZy5maW5kKHRzcyA9PiB0c3MubGVhZkhhc2guZXF1YWxzKGxlYWZIYXNoKSkgIT09IHVuZGVmaW5lZDsKfQpmdW5jdGlvbiBoYXNOb25UYXByb290RmllbGRzKGlvKSB7CiAgcmV0dXJuIGlvICYmICEhKGlvLnJlZGVlbVNjcmlwdCB8fCBpby53aXRuZXNzU2NyaXB0IHx8IGlvLmJpcDMyRGVyaXZhdGlvbiAmJiBpby5iaXAzMkRlcml2YXRpb24ubGVuZ3RoKTsKfQ=="},{"version":3,"names":["types_1","require","transaction_1","psbtutils_1","bip341_1","payments_1","psbtutils_2","toXOnly","pubKey","length","slice","exports","tapScriptFinalizer","inputIndex","input","tapLeafHashToFinalize","tapLeaf","findTapLeafToFinalize","sigs","sortSignatures","witness","concat","script","controlBlock","finalScriptWitness","witnessStackToScriptWitness","err","Error","serializeTaprootSignature","sig","sighashType","sighashTypeByte","Buffer","from","isTaprootInput","tapInternalKey","tapMerkleRoot","tapLeafScript","tapBip32Derivation","witnessUtxo","isP2TR","isTaprootOutput","output","tapTree","checkTaprootInputFields","inputData","newInputData","action","checkMixedTaprootAndNonTaprootInputFields","checkIfTapLeafInTree","checkTaprootOutputFields","outputData","newOutputData","checkMixedTaprootAndNonTaprootOutputFields","checkTaprootScriptPubkey","scriptPubkey","getTaprootScripPubkey","equals","scriptTree","tapTreeFromList","leaves","p2tr","internalPubkey","tweakInternalPubKey","outputKey","tweakKey","toString","x","tapTreeToList","tree","isTaptree","_tapTreeToList","arguments","undefined","depth","version","leafVersion","instertLeavesInTree","checkTaprootInputForSigs","extractTaprootSigs","some","signatureBlocksAction","decodeSchnorrSignature","signature","hashType","Transaction","SIGHASH_DEFAULT","tapKeySig","push","tapScriptSig","map","s","finalTapKeySig","getTapKeySigFromWithness","MAX_TAPTREE_DEPTH","isTapleaf","LEAF_VERSION_TAPSCRIPT","leaf","instertLeafInTree","leftSide","rightSide","isBadTaprootUpdate","hasNonTaprootFields","isBadNonTaprootUpdate","hasMixedFields","newLeafsInTree","every","l","isTapLeafInTree","oldLeafsInTree","merkleRoot","leafHash","tapleafHash","rootHash","rootHashFromPath","filter","tss","addPubkeyPositionInScript","sort","t1","t2","positionInScript","t","Object","assign","pubkeyPositionInScript","pubkey","leafHashToFinalize","a","b","find","canFinalizeLeaf","hash","whiteListedHash","io","redeemScript","witnessScript","bip32Derivation"],"sources":["../../../src/bitcoinjs-lib/psbt/bip371.ts"],"sourcesContent":[null],"mappings":"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"}]}