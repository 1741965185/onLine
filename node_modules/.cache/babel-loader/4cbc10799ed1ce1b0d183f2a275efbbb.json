{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/inscribe.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/inscribe.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyIpOwp2YXIgX19jcmVhdGVCaW5kaW5nID0gdGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZyB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikgewogIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7CiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspOwogIGlmICghZGVzYyB8fCAoImdldCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkgewogICAgZGVzYyA9IHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG1ba107CiAgICAgIH0KICAgIH07CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7Cn0gOiBmdW5jdGlvbiAobywgbSwgaywgazIpIHsKICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrOwogIG9bazJdID0gbVtrXTsKfSk7CnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSB0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0IHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIHYpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgImRlZmF1bHQiLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHYKICB9KTsKfSA6IGZ1bmN0aW9uIChvLCB2KSB7CiAgb1siZGVmYXVsdCJdID0gdjsKfSk7CnZhciBfX2ltcG9ydFN0YXIgPSB0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyIHx8IGZ1bmN0aW9uIChtb2QpIHsKICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kOwogIHZhciByZXN1bHQgPSB7fTsKICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gImRlZmF1bHQiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspOwogIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7CiAgcmV0dXJuIHJlc3VsdDsKfTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmluc2NyaWJlRm9yTVBDU2lnbmVkID0gZXhwb3J0cy5pbnNjcmliZUZvck1QQ1Vuc2lnbmVkID0gZXhwb3J0cy5pbnNjcmliZSA9IGV4cG9ydHMuSW5zY3JpcHRpb25Ub29sID0gdm9pZCAwOwpjb25zdCBiaXRjb2luID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4vYml0Y29pbmpzLWxpYiIpKTsKY29uc3QgY3J5cHRvX2xpYl8xID0gcmVxdWlyZSgiQG9reHdlYjMvY3J5cHRvLWxpYiIpOwpjb25zdCB0YXByb290ID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4vdGFwcm9vdCIpKTsKY29uc3QgYmNyeXB0byA9IF9faW1wb3J0U3RhcihyZXF1aXJlKCIuL2JpdGNvaW5qcy1saWIvY3J5cHRvIikpOwpjb25zdCB0cmFuc2FjdGlvbl8xID0gcmVxdWlyZSgiLi9iaXRjb2luanMtbGliL3RyYW5zYWN0aW9uIik7CmNvbnN0IHR4QnVpbGRfMSA9IHJlcXVpcmUoIi4vdHhCdWlsZCIpOwpjb25zdCBwc2J0dXRpbHNfMSA9IHJlcXVpcmUoIi4vYml0Y29pbmpzLWxpYi9wc2J0L3BzYnR1dGlscyIpOwpjb25zdCBzaWdjb3N0XzEgPSByZXF1aXJlKCIuL3NpZ2Nvc3QiKTsKY29uc3Qgc2Nobm9yciA9IGNyeXB0b19saWJfMS5zaWduVXRpbC5zY2hub3JyLnNlY3AyNTZrMS5zY2hub3JyOwpjb25zdCBkZWZhdWx0VHhWZXJzaW9uID0gMjsKY29uc3QgZGVmYXVsdFNlcXVlbmNlTnVtID0gMHhmZmZmZmZmZDsKY29uc3QgZGVmYXVsdFJldmVhbE91dFZhbHVlID0gNTQ2Owpjb25zdCBkZWZhdWx0TWluQ2hhbmdlVmFsdWUgPSA1NDY7CmNvbnN0IG1heFN0YW5kYXJkVHhXZWlnaHQgPSA0MDAwMDAwIC8gMTA7CmNsYXNzIEluc2NyaXB0aW9uVG9vbCB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLm5ldHdvcmsgPSBiaXRjb2luLm5ldHdvcmtzLmJpdGNvaW47CiAgICB0aGlzLmluc2NyaXB0aW9uVHhDdHhEYXRhTGlzdCA9IFtdOwogICAgdGhpcy5yZXZlYWxUeHMgPSBbXTsKICAgIHRoaXMuY29tbWl0VHggPSBuZXcgYml0Y29pbi5UcmFuc2FjdGlvbigpOwogICAgdGhpcy5jb21taXRUeFByZXZPdXRwdXRGZXRjaGVyID0gW107CiAgICB0aGlzLnJldmVhbFR4UHJldk91dHB1dEZldGNoZXIgPSBbXTsKICAgIHRoaXMubXVzdENvbW1pdFR4RmVlID0gMDsKICAgIHRoaXMubXVzdFJldmVhbFR4RmVlcyA9IFtdOwogICAgdGhpcy5jb21taXRBZGRycyA9IFtdOwogIH0KICBzdGF0aWMgbmV3SW5zY3JpcHRpb25Ub29sKG5ldHdvcmssIHJlcXVlc3QpIHsKICAgIGNvbnN0IHRvb2wgPSBuZXcgSW5zY3JpcHRpb25Ub29sKCk7CiAgICB0b29sLm5ldHdvcmsgPSBuZXR3b3JrOwogICAgY29uc3QgcmV2ZWFsT3V0VmFsdWUgPSByZXF1ZXN0LnJldmVhbE91dFZhbHVlIHx8IGRlZmF1bHRSZXZlYWxPdXRWYWx1ZTsKICAgIGNvbnN0IG1pbkNoYW5nZVZhbHVlID0gcmVxdWVzdC5taW5DaGFuZ2VWYWx1ZSB8fCBkZWZhdWx0TWluQ2hhbmdlVmFsdWU7CiAgICBjb25zdCBwcml2YXRlS2V5ID0gcmVxdWVzdC5jb21taXRUeFByZXZPdXRwdXRMaXN0WzBdLnByaXZhdGVLZXk7CiAgICByZXF1ZXN0Lmluc2NyaXB0aW9uRGF0YUxpc3QuZm9yRWFjaChpbnNjcmlwdGlvbkRhdGEgPT4gewogICAgICB0b29sLmluc2NyaXB0aW9uVHhDdHhEYXRhTGlzdC5wdXNoKGNyZWF0ZUluc2NyaXB0aW9uVHhDdHhEYXRhKG5ldHdvcmssIGluc2NyaXB0aW9uRGF0YSwgcHJpdmF0ZUtleSkpOwogICAgfSk7CiAgICBjb25zdCB0b3RhbFJldmVhbFByZXZPdXRwdXRWYWx1ZSA9IHRvb2wuYnVpbGRFbXB0eVJldmVhbFR4KG5ldHdvcmssIHJldmVhbE91dFZhbHVlLCByZXF1ZXN0LnJldmVhbEZlZVJhdGUpOwogICAgY29uc3QgaW5zdWZmaWNpZW50ID0gdG9vbC5idWlsZENvbW1pdFR4KG5ldHdvcmssIHJlcXVlc3QuY29tbWl0VHhQcmV2T3V0cHV0TGlzdCwgcmVxdWVzdC5jaGFuZ2VBZGRyZXNzLCB0b3RhbFJldmVhbFByZXZPdXRwdXRWYWx1ZSwgcmVxdWVzdC5jb21taXRGZWVSYXRlLCBtaW5DaGFuZ2VWYWx1ZSk7CiAgICBpZiAoaW5zdWZmaWNpZW50KSB7CiAgICAgIHJldHVybiB0b29sOwogICAgfQogICAgdG9vbC5zaWduQ29tbWl0VHgocmVxdWVzdC5jb21taXRUeFByZXZPdXRwdXRMaXN0KTsKICAgIHRvb2wuY29tcGxldGVSZXZlYWxUeCgpOwogICAgcmV0dXJuIHRvb2w7CiAgfQogIGJ1aWxkRW1wdHlSZXZlYWxUeChuZXR3b3JrLCByZXZlYWxPdXRWYWx1ZSwgcmV2ZWFsRmVlUmF0ZSkgewogICAgbGV0IHRvdGFsUHJldk91dHB1dFZhbHVlID0gMDsKICAgIGNvbnN0IHJldmVhbFR4cyA9IFtdOwogICAgY29uc3QgbXVzdFJldmVhbFR4RmVlcyA9IFtdOwogICAgY29uc3QgY29tbWl0QWRkcnMgPSBbXTsKICAgIHRoaXMuaW5zY3JpcHRpb25UeEN0eERhdGFMaXN0LmZvckVhY2goKGluc2NyaXB0aW9uVHhDdHhEYXRhLCBpKSA9PiB7CiAgICAgIGNvbnN0IHR4ID0gbmV3IGJpdGNvaW4uVHJhbnNhY3Rpb24oKTsKICAgICAgdHgudmVyc2lvbiA9IGRlZmF1bHRUeFZlcnNpb247CiAgICAgIHR4LmFkZElucHV0KEJ1ZmZlci5hbGxvYygzMiksIGksIGRlZmF1bHRTZXF1ZW5jZU51bSk7CiAgICAgIHR4LmFkZE91dHB1dChpbnNjcmlwdGlvblR4Q3R4RGF0YS5yZXZlYWxQa1NjcmlwdCwgcmV2ZWFsT3V0VmFsdWUpOwogICAgICBjb25zdCBlbXB0eVNpZ25hdHVyZSA9IEJ1ZmZlci5hbGxvYyg2NCk7CiAgICAgIGNvbnN0IGVtcHR5Q29udHJvbEJsb2NrV2l0bmVzcyA9IEJ1ZmZlci5hbGxvYygzMyk7CiAgICAgIGNvbnN0IHR4V2l0bmVzcyA9IFtdOwogICAgICB0eFdpdG5lc3MucHVzaChlbXB0eVNpZ25hdHVyZSk7CiAgICAgIHR4V2l0bmVzcy5wdXNoKGluc2NyaXB0aW9uVHhDdHhEYXRhLmluc2NyaXB0aW9uU2NyaXB0KTsKICAgICAgdHhXaXRuZXNzLnB1c2goZW1wdHlDb250cm9sQmxvY2tXaXRuZXNzKTsKICAgICAgY29uc3QgZmVlID0gTWF0aC5mbG9vcigodHguYnl0ZUxlbmd0aCgpICsgTWF0aC5mbG9vcigoKDAsIHRyYW5zYWN0aW9uXzEudmVjdG9yU2l6ZSkodHhXaXRuZXNzKSArIDIgKyAzKSAvIDQpKSAqIHJldmVhbEZlZVJhdGUpOwogICAgICBjb25zdCBwcmV2T3V0cHV0VmFsdWUgPSByZXZlYWxPdXRWYWx1ZSArIGZlZTsKICAgICAgaW5zY3JpcHRpb25UeEN0eERhdGEucmV2ZWFsVHhQcmV2T3V0cHV0ID0gewogICAgICAgIHBrU2NyaXB0OiBpbnNjcmlwdGlvblR4Q3R4RGF0YS5jb21taXRUeEFkZHJlc3NQa1NjcmlwdCwKICAgICAgICB2YWx1ZTogcHJldk91dHB1dFZhbHVlCiAgICAgIH07CiAgICAgIHRvdGFsUHJldk91dHB1dFZhbHVlICs9IHByZXZPdXRwdXRWYWx1ZTsKICAgICAgcmV2ZWFsVHhzLnB1c2godHgpOwogICAgICBtdXN0UmV2ZWFsVHhGZWVzLnB1c2goZmVlKTsKICAgICAgY29tbWl0QWRkcnMucHVzaChpbnNjcmlwdGlvblR4Q3R4RGF0YS5jb21taXRUeEFkZHJlc3MpOwogICAgfSk7CiAgICB0aGlzLnJldmVhbFR4cyA9IHJldmVhbFR4czsKICAgIHRoaXMubXVzdFJldmVhbFR4RmVlcyA9IG11c3RSZXZlYWxUeEZlZXM7CiAgICB0aGlzLmNvbW1pdEFkZHJzID0gY29tbWl0QWRkcnM7CiAgICByZXR1cm4gdG90YWxQcmV2T3V0cHV0VmFsdWU7CiAgfQogIGJ1aWxkQ29tbWl0VHgobmV0d29yaywgY29tbWl0VHhQcmV2T3V0cHV0TGlzdCwgY2hhbmdlQWRkcmVzcywgdG90YWxSZXZlYWxQcmV2T3V0cHV0VmFsdWUsIGNvbW1pdEZlZVJhdGUsIG1pbkNoYW5nZVZhbHVlKSB7CiAgICBsZXQgdG90YWxTZW5kZXJBbW91bnQgPSAwOwogICAgY29uc3QgdHggPSBuZXcgYml0Y29pbi5UcmFuc2FjdGlvbigpOwogICAgdHgudmVyc2lvbiA9IGRlZmF1bHRUeFZlcnNpb247CiAgICBjb21taXRUeFByZXZPdXRwdXRMaXN0LmZvckVhY2goY29tbWl0VHhQcmV2T3V0cHV0ID0+IHsKICAgICAgY29uc3QgaGFzaCA9IGNyeXB0b19saWJfMS5iYXNlLnJldmVyc2VCdWZmZXIoY3J5cHRvX2xpYl8xLmJhc2UuZnJvbUhleChjb21taXRUeFByZXZPdXRwdXQudHhJZCkpOwogICAgICB0eC5hZGRJbnB1dChoYXNoLCBjb21taXRUeFByZXZPdXRwdXQudk91dCwgZGVmYXVsdFNlcXVlbmNlTnVtKTsKICAgICAgdGhpcy5jb21taXRUeFByZXZPdXRwdXRGZXRjaGVyLnB1c2goY29tbWl0VHhQcmV2T3V0cHV0LmFtb3VudCk7CiAgICAgIHRvdGFsU2VuZGVyQW1vdW50ICs9IGNvbW1pdFR4UHJldk91dHB1dC5hbW91bnQ7CiAgICB9KTsKICAgIHRoaXMuaW5zY3JpcHRpb25UeEN0eERhdGFMaXN0LmZvckVhY2goaW5zY3JpcHRpb25UeEN0eERhdGEgPT4gewogICAgICB0eC5hZGRPdXRwdXQoaW5zY3JpcHRpb25UeEN0eERhdGEucmV2ZWFsVHhQcmV2T3V0cHV0LnBrU2NyaXB0LCBpbnNjcmlwdGlvblR4Q3R4RGF0YS5yZXZlYWxUeFByZXZPdXRwdXQudmFsdWUpOwogICAgfSk7CiAgICBjb25zdCBjaGFuZ2VQa1NjcmlwdCA9IGJpdGNvaW4uYWRkcmVzcy50b091dHB1dFNjcmlwdChjaGFuZ2VBZGRyZXNzLCBuZXR3b3JrKTsKICAgIHR4LmFkZE91dHB1dChjaGFuZ2VQa1NjcmlwdCwgMCk7CiAgICBjb25zdCB0eEZvckVzdGltYXRlID0gdHguY2xvbmUoKTsKICAgIHNpZ25UeCh0eEZvckVzdGltYXRlLCBjb21taXRUeFByZXZPdXRwdXRMaXN0LCB0aGlzLm5ldHdvcmspOwogICAgY29uc3QgdnNpemUgPSAoMCwgc2lnY29zdF8xLmNvdW50QWRqdXN0ZWRWc2l6ZSkodHhGb3JFc3RpbWF0ZSwgY29tbWl0VHhQcmV2T3V0cHV0TGlzdC5tYXAoYSA9PiBhLmFkZHJlc3MpLCBuZXR3b3JrKTsKICAgIGNvbnN0IGZlZSA9IE1hdGguZmxvb3IodnNpemUgKiBjb21taXRGZWVSYXRlKTsKICAgIGNvbnN0IGNoYW5nZUFtb3VudCA9IHRvdGFsU2VuZGVyQW1vdW50IC0gdG90YWxSZXZlYWxQcmV2T3V0cHV0VmFsdWUgLSBmZWU7CiAgICBpZiAoY2hhbmdlQW1vdW50ID49IG1pbkNoYW5nZVZhbHVlKSB7CiAgICAgIHR4Lm91dHNbdHgub3V0cy5sZW5ndGggLSAxXS52YWx1ZSA9IGNoYW5nZUFtb3VudDsKICAgIH0gZWxzZSB7CiAgICAgIHR4Lm91dHMgPSB0eC5vdXRzLnNsaWNlKDAsIHR4Lm91dHMubGVuZ3RoIC0gMSk7CiAgICAgIHR4Rm9yRXN0aW1hdGUub3V0cyA9IHR4Rm9yRXN0aW1hdGUub3V0cy5zbGljZSgwLCB0eEZvckVzdGltYXRlLm91dHMubGVuZ3RoIC0gMSk7CiAgICAgIGNvbnN0IHZzaXplV2l0aG91dENoYW5nZSA9ICgwLCBzaWdjb3N0XzEuY291bnRBZGp1c3RlZFZzaXplKSh0eEZvckVzdGltYXRlLCBjb21taXRUeFByZXZPdXRwdXRMaXN0Lm1hcChhID0+IGEuYWRkcmVzcyksIG5ldHdvcmspOwogICAgICBjb25zdCBmZWVXaXRob3V0Q2hhbmdlID0gTWF0aC5mbG9vcih2c2l6ZVdpdGhvdXRDaGFuZ2UgKiBjb21taXRGZWVSYXRlKTsKICAgICAgaWYgKHRvdGFsU2VuZGVyQW1vdW50IC0gdG90YWxSZXZlYWxQcmV2T3V0cHV0VmFsdWUgLSBmZWVXaXRob3V0Q2hhbmdlIDwgMCkgewogICAgICAgIHRoaXMubXVzdENvbW1pdFR4RmVlID0gZmVlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgICB0aGlzLmNvbW1pdFR4ID0gdHg7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHNpZ25Db21taXRUeChjb21taXRUeFByZXZPdXRwdXRMaXN0KSB7CiAgICBzaWduVHgodGhpcy5jb21taXRUeCwgY29tbWl0VHhQcmV2T3V0cHV0TGlzdCwgdGhpcy5uZXR3b3JrKTsKICB9CiAgY29tcGxldGVSZXZlYWxUeCgpIHsKICAgIHRoaXMucmV2ZWFsVHhzLmZvckVhY2goKHJldmVhbFR4LCBpKSA9PiB7CiAgICAgIHJldmVhbFR4Lmluc1swXS5oYXNoID0gdGhpcy5jb21taXRUeC5nZXRIYXNoKCk7CiAgICAgIGNvbnN0IHByZXZPdXRTY3JpcHRzID0gW3RoaXMuaW5zY3JpcHRpb25UeEN0eERhdGFMaXN0W2ldLnJldmVhbFR4UHJldk91dHB1dC5wa1NjcmlwdF07CiAgICAgIGNvbnN0IHZhbHVlcyA9IFt0aGlzLmluc2NyaXB0aW9uVHhDdHhEYXRhTGlzdFtpXS5yZXZlYWxUeFByZXZPdXRwdXQudmFsdWVdOwogICAgICB0aGlzLnJldmVhbFR4UHJldk91dHB1dEZldGNoZXIucHVzaCh0aGlzLmluc2NyaXB0aW9uVHhDdHhEYXRhTGlzdFtpXS5yZXZlYWxUeFByZXZPdXRwdXQudmFsdWUpOwogICAgICBjb25zdCBoYXNoID0gcmV2ZWFsVHguaGFzaEZvcldpdG5lc3NWMSgwLCBwcmV2T3V0U2NyaXB0cywgdmFsdWVzLCBiaXRjb2luLlRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVCwgdGhpcy5pbnNjcmlwdGlvblR4Q3R4RGF0YUxpc3RbaV0uaGFzaCk7CiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IEJ1ZmZlci5mcm9tKHNjaG5vcnIuc2lnbihoYXNoLCB0aGlzLmluc2NyaXB0aW9uVHhDdHhEYXRhTGlzdFtpXS5wcml2YXRlS2V5LCBjcnlwdG9fbGliXzEuYmFzZS5yYW5kb21CeXRlcygzMikpKTsKICAgICAgcmV2ZWFsVHguaW5zWzBdLndpdG5lc3MgPSBbQnVmZmVyLmZyb20oc2lnbmF0dXJlKSwgLi4udGhpcy5pbnNjcmlwdGlvblR4Q3R4RGF0YUxpc3RbaV0ud2l0bmVzc107CiAgICAgIGNvbnN0IHJldmVhbFdlaWdodCA9IHJldmVhbFR4LndlaWdodCgpOwogICAgICBpZiAocmV2ZWFsV2VpZ2h0ID4gbWF4U3RhbmRhcmRUeFdlaWdodCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgcmV2ZWFsKGluZGV4ICR7aX0pIHRyYW5zYWN0aW9uIHdlaWdodCBncmVhdGVyIHRoYW4gJHttYXhTdGFuZGFyZFR4V2VpZ2h0fSAoTUFYX1NUQU5EQVJEX1RYX1dFSUdIVCk6ICR7cmV2ZWFsV2VpZ2h0fWApOwogICAgICB9CiAgICB9KTsKICB9CiAgY2FsY3VsYXRlRmVlKCkgewogICAgbGV0IGNvbW1pdFR4RmVlID0gMDsKICAgIHRoaXMuY29tbWl0VHguaW5zLmZvckVhY2goKF8sIGkpID0+IHsKICAgICAgY29tbWl0VHhGZWUgKz0gdGhpcy5jb21taXRUeFByZXZPdXRwdXRGZXRjaGVyW2ldOwogICAgfSk7CiAgICB0aGlzLmNvbW1pdFR4Lm91dHMuZm9yRWFjaChvdXQgPT4gewogICAgICBjb21taXRUeEZlZSAtPSBvdXQudmFsdWU7CiAgICB9KTsKICAgIGxldCByZXZlYWxUeEZlZXMgPSBbXTsKICAgIHRoaXMucmV2ZWFsVHhzLmZvckVhY2goKHJldmVhbFR4LCBpKSA9PiB7CiAgICAgIGxldCByZXZlYWxUeEZlZSA9IDA7CiAgICAgIHJldmVhbFR4RmVlICs9IHRoaXMucmV2ZWFsVHhQcmV2T3V0cHV0RmV0Y2hlcltpXTsKICAgICAgcmV2ZWFsVHhGZWUgLT0gcmV2ZWFsVHgub3V0c1swXS52YWx1ZTsKICAgICAgcmV2ZWFsVHhGZWVzLnB1c2gocmV2ZWFsVHhGZWUpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjb21taXRUeEZlZSwKICAgICAgcmV2ZWFsVHhGZWVzCiAgICB9OwogIH0KfQpleHBvcnRzLkluc2NyaXB0aW9uVG9vbCA9IEluc2NyaXB0aW9uVG9vbDsKZnVuY3Rpb24gc2lnblR4KHR4LCBjb21taXRUeFByZXZPdXRwdXRMaXN0LCBuZXR3b3JrKSB7CiAgdHguaW5zLmZvckVhY2goKGlucHV0LCBpKSA9PiB7CiAgICBjb25zdCBhZGRyZXNzVHlwZSA9ICgwLCB0eEJ1aWxkXzEuZ2V0QWRkcmVzc1R5cGUpKGNvbW1pdFR4UHJldk91dHB1dExpc3RbaV0uYWRkcmVzcywgbmV0d29yayk7CiAgICBjb25zdCBwcml2YXRlS2V5ID0gY3J5cHRvX2xpYl8xLmJhc2UuZnJvbUhleCgoMCwgdHhCdWlsZF8xLnByaXZhdGVLZXlGcm9tV0lGKShjb21taXRUeFByZXZPdXRwdXRMaXN0W2ldLnByaXZhdGVLZXksIG5ldHdvcmspKTsKICAgIGNvbnN0IHByaXZhdGVLZXlIZXggPSBjcnlwdG9fbGliXzEuYmFzZS50b0hleChwcml2YXRlS2V5KTsKICAgIGNvbnN0IHB1YmxpY0tleSA9ICgwLCB0eEJ1aWxkXzEucHJpdmF0ZTJwdWJsaWMpKHByaXZhdGVLZXlIZXgpOwogICAgaWYgKGFkZHJlc3NUeXBlID09PSAnc2Vnd2l0X3RhcHJvb3QnKSB7CiAgICAgIGNvbnN0IHByZXZPdXRTY3JpcHRzID0gY29tbWl0VHhQcmV2T3V0cHV0TGlzdC5tYXAobyA9PiBiaXRjb2luLmFkZHJlc3MudG9PdXRwdXRTY3JpcHQoby5hZGRyZXNzLCBuZXR3b3JrKSk7CiAgICAgIGNvbnN0IHZhbHVlcyA9IGNvbW1pdFR4UHJldk91dHB1dExpc3QubWFwKG8gPT4gby5hbW91bnQpOwogICAgICBjb25zdCBoYXNoID0gdHguaGFzaEZvcldpdG5lc3NWMShpLCBwcmV2T3V0U2NyaXB0cywgdmFsdWVzLCBiaXRjb2luLlRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVCk7CiAgICAgIGNvbnN0IHR3ZWFrZWRQcml2S2V5ID0gdGFwcm9vdC50YXByb290VHdlYWtQcml2S2V5KHByaXZhdGVLZXkpOwogICAgICBjb25zdCBzaWduYXR1cmUgPSBCdWZmZXIuZnJvbShzY2hub3JyLnNpZ24oaGFzaCwgdHdlYWtlZFByaXZLZXksIGNyeXB0b19saWJfMS5iYXNlLnJhbmRvbUJ5dGVzKDMyKSkpOwogICAgICBpbnB1dC53aXRuZXNzID0gW0J1ZmZlci5mcm9tKHNpZ25hdHVyZSldOwogICAgfSBlbHNlIGlmIChhZGRyZXNzVHlwZSA9PT0gJ2xlZ2FjeScpIHsKICAgICAgY29uc3QgcHJldlNjcmlwdCA9IGJpdGNvaW4uYWRkcmVzcy50b091dHB1dFNjcmlwdChjb21taXRUeFByZXZPdXRwdXRMaXN0W2ldLmFkZHJlc3MsIG5ldHdvcmspOwogICAgICBjb25zdCBoYXNoID0gdHguaGFzaEZvclNpZ25hdHVyZShpLCBwcmV2U2NyaXB0LCBiaXRjb2luLlRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMKTsKICAgICAgY29uc3Qgc2lnbmF0dXJlID0gKDAsIHR4QnVpbGRfMS5zaWduKShoYXNoLCBwcml2YXRlS2V5SGV4KTsKICAgICAgY29uc3QgcGF5bWVudCA9IGJpdGNvaW4ucGF5bWVudHMucDJwa2goewogICAgICAgIHNpZ25hdHVyZTogYml0Y29pbi5zY3JpcHQuc2lnbmF0dXJlLmVuY29kZShzaWduYXR1cmUsIGJpdGNvaW4uVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwpLAogICAgICAgIHB1YmtleTogcHVibGljS2V5CiAgICAgIH0pOwogICAgICBpbnB1dC5zY3JpcHQgPSBwYXltZW50LmlucHV0OwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgcHViS2V5SGFzaCA9IGJjcnlwdG8uaGFzaDE2MChwdWJsaWNLZXkpOwogICAgICBjb25zdCBwcmV2T3V0U2NyaXB0ID0gQnVmZmVyLm9mKDB4MTksIDB4NzYsIDB4YTksIDB4MTQsIC4uLnB1YktleUhhc2gsIDB4ODgsIDB4YWMpOwogICAgICBjb25zdCB2YWx1ZSA9IGNvbW1pdFR4UHJldk91dHB1dExpc3RbaV0uYW1vdW50OwogICAgICBjb25zdCBoYXNoID0gdHguaGFzaEZvcldpdG5lc3MoaSwgcHJldk91dFNjcmlwdCwgdmFsdWUsIGJpdGNvaW4uVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwpOwogICAgICBjb25zdCBzaWduYXR1cmUgPSAoMCwgdHhCdWlsZF8xLnNpZ24pKGhhc2gsIHByaXZhdGVLZXlIZXgpOwogICAgICBpbnB1dC53aXRuZXNzID0gW2JpdGNvaW4uc2NyaXB0LnNpZ25hdHVyZS5lbmNvZGUoc2lnbmF0dXJlLCBiaXRjb2luLlRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMKSwgcHVibGljS2V5XTsKICAgICAgY29uc3QgcmVkZWVtU2NyaXB0ID0gQnVmZmVyLm9mKDB4MTYsIDAsIDIwLCAuLi5wdWJLZXlIYXNoKTsKICAgICAgaWYgKGFkZHJlc3NUeXBlID09PSAic2Vnd2l0X25lc3RlZCIpIHsKICAgICAgICBpbnB1dC5zY3JpcHQgPSByZWRlZW1TY3JpcHQ7CiAgICAgIH0KICAgIH0KICB9KTsKfQpmdW5jdGlvbiBjcmVhdGVJbnNjcmlwdGlvblR4Q3R4RGF0YShuZXR3b3JrLCBpbnNjcmlwdGlvbkRhdGEsIHByaXZhdGVLZXlXaWYpIHsKICBjb25zdCBwcml2YXRlS2V5ID0gY3J5cHRvX2xpYl8xLmJhc2UuZnJvbUhleCgoMCwgdHhCdWlsZF8xLnByaXZhdGVLZXlGcm9tV0lGKShwcml2YXRlS2V5V2lmLCBuZXR3b3JrKSk7CiAgY29uc3QgaW50ZXJuYWxQdWJLZXkgPSAoMCwgdHhCdWlsZF8xLndpZjJQdWJsaWMpKHByaXZhdGVLZXlXaWYsIG5ldHdvcmspLnNsaWNlKDEpOwogIGNvbnN0IG9wcyA9IGJpdGNvaW4uc2NyaXB0Lk9QUzsKICBjb25zdCBpbnNjcmlwdGlvbkJ1aWxkZXIgPSBbXTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChpbnRlcm5hbFB1YktleSk7CiAgaW5zY3JpcHRpb25CdWlsZGVyLnB1c2gob3BzLk9QX0NIRUNLU0lHKTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChvcHMuT1BfRkFMU0UpOwogIGluc2NyaXB0aW9uQnVpbGRlci5wdXNoKG9wcy5PUF9JRik7CiAgaW5zY3JpcHRpb25CdWlsZGVyLnB1c2goQnVmZmVyLmZyb20oIm9yZCIpKTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChvcHMuT1BfREFUQV8xKTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChvcHMuT1BfREFUQV8xKTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChCdWZmZXIuZnJvbShpbnNjcmlwdGlvbkRhdGEuY29udGVudFR5cGUpKTsKICBpbnNjcmlwdGlvbkJ1aWxkZXIucHVzaChvcHMuT1BfMCk7CiAgY29uc3QgbWF4Q2h1bmtTaXplID0gNTIwOwogIGxldCBib2R5ID0gQnVmZmVyLmZyb20oaW5zY3JpcHRpb25EYXRhLmJvZHkpOwogIGxldCBib2R5U2l6ZSA9IGJvZHkubGVuZ3RoOwogIGZvciAobGV0IGkgPSAwOyBpIDwgYm9keVNpemU7IGkgKz0gbWF4Q2h1bmtTaXplKSB7CiAgICBsZXQgZW5kID0gaSArIG1heENodW5rU2l6ZTsKICAgIGlmIChlbmQgPiBib2R5U2l6ZSkgewogICAgICBlbmQgPSBib2R5U2l6ZTsKICAgIH0KICAgIGluc2NyaXB0aW9uQnVpbGRlci5wdXNoKGJvZHkuc2xpY2UoaSwgZW5kKSk7CiAgfQogIGluc2NyaXB0aW9uQnVpbGRlci5wdXNoKG9wcy5PUF9FTkRJRik7CiAgY29uc3QgaW5zY3JpcHRpb25TY3JpcHQgPSBiaXRjb2luLnNjcmlwdC5jb21waWxlKGluc2NyaXB0aW9uQnVpbGRlcik7CiAgY29uc3Qgc2NyaXB0VHJlZSA9IHsKICAgIG91dHB1dDogaW5zY3JpcHRpb25TY3JpcHQKICB9OwogIGNvbnN0IHJlZGVlbSA9IHsKICAgIG91dHB1dDogaW5zY3JpcHRpb25TY3JpcHQsCiAgICByZWRlZW1WZXJzaW9uOiAweGMwCiAgfTsKICBjb25zdCB7CiAgICBvdXRwdXQsCiAgICB3aXRuZXNzLAogICAgaGFzaCwKICAgIGFkZHJlc3MKICB9ID0gYml0Y29pbi5wYXltZW50cy5wMnRyKHsKICAgIGludGVybmFsUHVia2V5OiBpbnRlcm5hbFB1YktleSwKICAgIHNjcmlwdFRyZWUsCiAgICByZWRlZW0sCiAgICBuZXR3b3JrCiAgfSk7CiAgcmV0dXJuIHsKICAgIHByaXZhdGVLZXksCiAgICBpbnNjcmlwdGlvblNjcmlwdCwKICAgIGNvbW1pdFR4QWRkcmVzczogYWRkcmVzcywKICAgIGNvbW1pdFR4QWRkcmVzc1BrU2NyaXB0OiBvdXRwdXQsCiAgICB3aXRuZXNzOiB3aXRuZXNzLAogICAgaGFzaDogaGFzaCwKICAgIHJldmVhbFR4UHJldk91dHB1dDogewogICAgICBwa1NjcmlwdDogQnVmZmVyLmFsbG9jKDApLAogICAgICB2YWx1ZTogMAogICAgfSwKICAgIHJldmVhbFBrU2NyaXB0OiBiaXRjb2luLmFkZHJlc3MudG9PdXRwdXRTY3JpcHQoaW5zY3JpcHRpb25EYXRhLnJldmVhbEFkZHIsIG5ldHdvcmspCiAgfTsKfQpmdW5jdGlvbiBpbnNjcmliZShuZXR3b3JrLCByZXF1ZXN0KSB7CiAgY29uc3QgdG9vbCA9IEluc2NyaXB0aW9uVG9vbC5uZXdJbnNjcmlwdGlvblRvb2wobmV0d29yaywgcmVxdWVzdCk7CiAgaWYgKHRvb2wubXVzdENvbW1pdFR4RmVlID4gMCkgewogICAgcmV0dXJuIHsKICAgICAgY29tbWl0VHg6ICIiLAogICAgICByZXZlYWxUeHM6IFtdLAogICAgICBjb21taXRUeEZlZTogdG9vbC5tdXN0Q29tbWl0VHhGZWUsCiAgICAgIHJldmVhbFR4RmVlczogdG9vbC5tdXN0UmV2ZWFsVHhGZWVzLAogICAgICBjb21taXRBZGRyczogdG9vbC5jb21taXRBZGRycwogICAgfTsKICB9CiAgcmV0dXJuIHsKICAgIGNvbW1pdFR4OiB0b29sLmNvbW1pdFR4LnRvSGV4KCksCiAgICByZXZlYWxUeHM6IHRvb2wucmV2ZWFsVHhzLm1hcChyZXZlYWxUeCA9PiByZXZlYWxUeC50b0hleCgpKSwKICAgIC4uLnRvb2wuY2FsY3VsYXRlRmVlKCksCiAgICBjb21taXRBZGRyczogdG9vbC5jb21taXRBZGRycwogIH07Cn0KZXhwb3J0cy5pbnNjcmliZSA9IGluc2NyaWJlOwpmdW5jdGlvbiBpbnNjcmliZUZvck1QQ1Vuc2lnbmVkKHJlcXVlc3QsIG5ldHdvcmssIHVuc2lnbmVkQ29tbWl0VHhIYXNoLCBzaWduZWRDb21taXRUeEhhc2gpIHsKICBjb25zdCBwcml2YXRlS2V5ID0gcmVxdWVzdC5jb21taXRUeFByZXZPdXRwdXRMaXN0WzBdLnByaXZhdGVLZXk7CiAgY29uc3Qgc2NyaXB0Q3R4TGlzdCA9IFtdOwogIHJlcXVlc3QuaW5zY3JpcHRpb25EYXRhTGlzdC5mb3JFYWNoKGluc2NyaXB0aW9uRGF0YSA9PiB7CiAgICBzY3JpcHRDdHhMaXN0LnB1c2goY3JlYXRlSW5zY3JpcHRpb25UeEN0eERhdGEobmV0d29yaywgaW5zY3JpcHRpb25EYXRhLCBwcml2YXRlS2V5KSk7CiAgfSk7CiAgbGV0IHRvdGFsUmV2ZWFsSW5WYWx1ZSA9IDA7CiAgY29uc3QgcmV2ZWFsT3V0VmFsdWUgPSByZXF1ZXN0LnJldmVhbE91dFZhbHVlIHx8IGRlZmF1bHRSZXZlYWxPdXRWYWx1ZTsKICBjb25zdCByZXZlYWxUeExpc3QgPSBbXTsKICBzY3JpcHRDdHhMaXN0LmZvckVhY2goKGN0eCwgaSkgPT4gewogICAgY29uc3QgdHggPSBuZXcgYml0Y29pbi5UcmFuc2FjdGlvbigpOwogICAgdHgudmVyc2lvbiA9IGRlZmF1bHRUeFZlcnNpb247CiAgICB0eC5hZGRJbnB1dChCdWZmZXIuYWxsb2MoMzIpLCBpLCBkZWZhdWx0U2VxdWVuY2VOdW0pOwogICAgdHguYWRkT3V0cHV0KGN0eC5yZXZlYWxQa1NjcmlwdCwgcmV2ZWFsT3V0VmFsdWUpOwogICAgcmV2ZWFsVHhMaXN0LnB1c2godHgpOwogICAgY29uc3QgZW1wdHlTaWduYXR1cmUgPSBCdWZmZXIuYWxsb2MoNjQpOwogICAgY29uc3QgZW1wdHlDb250cm9sQmxvY2tXaXRuZXNzID0gQnVmZmVyLmFsbG9jKDMzKTsKICAgIGNvbnN0IHR4V2l0bmVzcyA9IFtdOwogICAgdHhXaXRuZXNzLnB1c2goZW1wdHlTaWduYXR1cmUpOwogICAgdHhXaXRuZXNzLnB1c2goY3R4Lmluc2NyaXB0aW9uU2NyaXB0KTsKICAgIHR4V2l0bmVzcy5wdXNoKGVtcHR5Q29udHJvbEJsb2NrV2l0bmVzcyk7CiAgICBjb25zdCByZXZlYWxGZWUgPSBNYXRoLmZsb29yKCh0eC5ieXRlTGVuZ3RoKCkgKyBNYXRoLmZsb29yKCgoMCwgdHJhbnNhY3Rpb25fMS52ZWN0b3JTaXplKSh0eFdpdG5lc3MpICsgMiArIDMpIC8gNCkpICogcmVxdWVzdC5yZXZlYWxGZWVSYXRlKTsKICAgIGNvbnN0IHJldmVhbEluVmFsdWUgPSByZXZlYWxPdXRWYWx1ZSArIHJldmVhbEZlZTsKICAgIGN0eC5yZXZlYWxUeFByZXZPdXRwdXQgPSB7CiAgICAgIHBrU2NyaXB0OiBjdHguY29tbWl0VHhBZGRyZXNzUGtTY3JpcHQsCiAgICAgIHZhbHVlOiByZXZlYWxJblZhbHVlCiAgICB9OwogICAgdG90YWxSZXZlYWxJblZhbHVlICs9IHJldmVhbEluVmFsdWU7CiAgfSk7CiAgbGV0IHRvdGFsQ29tbWl0SW5WYWx1ZSA9IDA7CiAgY29uc3QgY29tbWl0VHggPSBuZXcgYml0Y29pbi5UcmFuc2FjdGlvbigpOwogIGNvbW1pdFR4LnZlcnNpb24gPSBkZWZhdWx0VHhWZXJzaW9uOwogIHJlcXVlc3QuY29tbWl0VHhQcmV2T3V0cHV0TGlzdC5mb3JFYWNoKHV4dG8gPT4gewogICAgY29tbWl0VHguYWRkSW5wdXQoY3J5cHRvX2xpYl8xLmJhc2UucmV2ZXJzZUJ1ZmZlcihjcnlwdG9fbGliXzEuYmFzZS5mcm9tSGV4KHV4dG8udHhJZCkpLCB1eHRvLnZPdXQsIGRlZmF1bHRTZXF1ZW5jZU51bSk7CiAgICB0b3RhbENvbW1pdEluVmFsdWUgKz0gdXh0by5hbW91bnQ7CiAgfSk7CiAgY29uc3QgY29tbWl0QWRkcnMgPSBbXTsKICBzY3JpcHRDdHhMaXN0LmZvckVhY2goY3R4ID0+IHsKICAgIGNvbW1pdFR4LmFkZE91dHB1dChjdHgucmV2ZWFsVHhQcmV2T3V0cHV0LnBrU2NyaXB0LCBjdHgucmV2ZWFsVHhQcmV2T3V0cHV0LnZhbHVlKTsKICAgIGNvbW1pdEFkZHJzLnB1c2goY3R4LmNvbW1pdFR4QWRkcmVzcyk7CiAgfSk7CiAgY29uc3QgY2hhbmdlUGtTY3JpcHQgPSBiaXRjb2luLmFkZHJlc3MudG9PdXRwdXRTY3JpcHQocmVxdWVzdC5jaGFuZ2VBZGRyZXNzLCBuZXR3b3JrKTsKICBjb21taXRUeC5hZGRPdXRwdXQoY2hhbmdlUGtTY3JpcHQsIDApOwogIGNvbnN0IGVzdGltYXRlVHggPSBjb21taXRUeC5jbG9uZSgpOwogIHNpZ25UeChlc3RpbWF0ZVR4LCByZXF1ZXN0LmNvbW1pdFR4UHJldk91dHB1dExpc3QsIG5ldHdvcmspOwogIGNvbnN0IHZzaXplID0gKDAsIHNpZ2Nvc3RfMS5jb3VudEFkanVzdGVkVnNpemUpKGVzdGltYXRlVHgsIHJlcXVlc3QuY29tbWl0VHhQcmV2T3V0cHV0TGlzdC5tYXAoYSA9PiBhLmFkZHJlc3MpLCBuZXR3b3JrKTsKICBjb25zdCBmZWUgPSBNYXRoLmZsb29yKHZzaXplICogcmVxdWVzdC5jb21taXRGZWVSYXRlKTsKICBjb25zdCBjaGFuZ2VWYWx1ZSA9IHRvdGFsQ29tbWl0SW5WYWx1ZSAtIHRvdGFsUmV2ZWFsSW5WYWx1ZSAtIGZlZTsKICBpZiAoY2hhbmdlVmFsdWUgPj0gKHJlcXVlc3QubWluQ2hhbmdlVmFsdWUgfHwgZGVmYXVsdE1pbkNoYW5nZVZhbHVlKSkgewogICAgY29tbWl0VHgub3V0c1tjb21taXRUeC5vdXRzLmxlbmd0aCAtIDFdLnZhbHVlID0gY2hhbmdlVmFsdWU7CiAgfSBlbHNlIHsKICAgIGNvbW1pdFR4Lm91dHMgPSBjb21taXRUeC5vdXRzLnNsaWNlKDAsIGNvbW1pdFR4Lm91dHMubGVuZ3RoIC0gMSk7CiAgICBlc3RpbWF0ZVR4Lm91dHMgPSBlc3RpbWF0ZVR4Lm91dHMuc2xpY2UoMCwgZXN0aW1hdGVUeC5vdXRzLmxlbmd0aCAtIDEpOwogICAgY29uc3QgdnNpemVXaXRob3V0Q2hhbmdlID0gKDAsIHNpZ2Nvc3RfMS5jb3VudEFkanVzdGVkVnNpemUpKGVzdGltYXRlVHgsIHJlcXVlc3QuY29tbWl0VHhQcmV2T3V0cHV0TGlzdC5tYXAoYSA9PiBhLmFkZHJlc3MpLCBuZXR3b3JrKTsKICAgIGNvbnN0IGZlZVdpdGhvdXRDaGFuZ2UgPSBNYXRoLmZsb29yKHZzaXplV2l0aG91dENoYW5nZSAqIHJlcXVlc3QuY29tbWl0RmVlUmF0ZSk7CiAgICBpZiAodG90YWxDb21taXRJblZhbHVlIC0gdG90YWxSZXZlYWxJblZhbHVlIC0gZmVlV2l0aG91dENoYW5nZSA8IDApIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJpbnN1ZmZpY2llbnQgYmFsYW5jZSIpOwogICAgfQogIH0KICBjb25zdCBzaWdIYXNoTGlzdCA9IGNhbGN1bGF0ZVNpZ0hhc2goY29tbWl0VHgsIHJlcXVlc3QuY29tbWl0VHhQcmV2T3V0cHV0TGlzdCwgbmV0d29yayk7CiAgbGV0IGNvbW1pdFR4SGFzaCA9IGNvbW1pdFR4LmdldEhhc2goKTsKICBpZiAoc2lnbmVkQ29tbWl0VHhIYXNoKSB7CiAgICBjb21taXRUeEhhc2ggPSBzaWduZWRDb21taXRUeEhhc2g7CiAgfQogIHJldmVhbFR4TGlzdC5mb3JFYWNoKChyZXZlYWxUeCwgaSkgPT4gewogICAgcmV2ZWFsVHguaW5zWzBdLmhhc2ggPSBjb21taXRUeEhhc2g7CiAgICBjb25zdCBwcmV2T3V0U2NyaXB0cyA9IFtzY3JpcHRDdHhMaXN0W2ldLnJldmVhbFR4UHJldk91dHB1dC5wa1NjcmlwdF07CiAgICBjb25zdCB2YWx1ZXMgPSBbc2NyaXB0Q3R4TGlzdFtpXS5yZXZlYWxUeFByZXZPdXRwdXQudmFsdWVdOwogICAgY29uc3Qgc2lnSGFzaCA9IHJldmVhbFR4Lmhhc2hGb3JXaXRuZXNzVjEoMCwgcHJldk91dFNjcmlwdHMsIHZhbHVlcywgYml0Y29pbi5UcmFuc2FjdGlvbi5TSUdIQVNIX0RFRkFVTFQsIHNjcmlwdEN0eExpc3RbaV0uaGFzaCk7CiAgICBjb25zdCBzaWduYXR1cmUgPSBCdWZmZXIuZnJvbShzY2hub3JyLnNpZ24oc2lnSGFzaCwgc2NyaXB0Q3R4TGlzdFtpXS5wcml2YXRlS2V5LCBjcnlwdG9fbGliXzEuYmFzZS5yYW5kb21CeXRlcygzMikpKTsKICAgIHJldmVhbFR4Lmluc1swXS53aXRuZXNzID0gW3NpZ25hdHVyZSwgLi4uc2NyaXB0Q3R4TGlzdFtpXS53aXRuZXNzXTsKICB9KTsKICBsZXQgY29tbWl0VHhGZWUgPSAwOwogIGNvbW1pdFR4Lmlucy5mb3JFYWNoKChfLCBpKSA9PiB7CiAgICBjb21taXRUeEZlZSArPSByZXF1ZXN0LmNvbW1pdFR4UHJldk91dHB1dExpc3RbaV0uYW1vdW50OwogIH0pOwogIGNvbW1pdFR4Lm91dHMuZm9yRWFjaChvdXQgPT4gewogICAgY29tbWl0VHhGZWUgLT0gb3V0LnZhbHVlOwogIH0pOwogIGxldCByZXZlYWxUeEZlZXMgPSBbXTsKICByZXZlYWxUeExpc3QuZm9yRWFjaCgocmV2ZWFsVHgsIGkpID0+IHsKICAgIGxldCByZXZlYWxUeEZlZSA9IDA7CiAgICByZXZlYWxUeEZlZSArPSBzY3JpcHRDdHhMaXN0W2ldLnJldmVhbFR4UHJldk91dHB1dC52YWx1ZTsKICAgIHJldmVhbFR4RmVlIC09IHJldmVhbFR4Lm91dHNbMF0udmFsdWU7CiAgICByZXZlYWxUeEZlZXMucHVzaChyZXZlYWxUeEZlZSk7CiAgfSk7CiAgcmV0dXJuIHsKICAgIHNpZ25IYXNoTGlzdDogc2lnSGFzaExpc3QsCiAgICBjb21taXRUeDogY29tbWl0VHgudG9IZXgoKSwKICAgIHJldmVhbFR4czogcmV2ZWFsVHhMaXN0Lm1hcChlID0+IGUudG9IZXgoKSksCiAgICBjb21taXRUeEZlZTogY29tbWl0VHhGZWUsCiAgICByZXZlYWxUeEZlZXM6IHJldmVhbFR4RmVlcywKICAgIGNvbW1pdEFkZHJzOiBjb21taXRBZGRycwogIH07Cn0KZXhwb3J0cy5pbnNjcmliZUZvck1QQ1Vuc2lnbmVkID0gaW5zY3JpYmVGb3JNUENVbnNpZ25lZDsKZnVuY3Rpb24gaW5zY3JpYmVGb3JNUENTaWduZWQocmVxdWVzdCwgbmV0d29yaykgewogIGNvbnN0IHVuc2lnbmVkQ29tbWl0VHhIZXggPSByZXF1ZXN0LmNvbW1pdFR4OwogIGNvbnN0IHNpZ25hdHVyZXMgPSByZXF1ZXN0LnNpZ25hdHVyZUxpc3Q7CiAgY29uc3QgdHggPSBiaXRjb2luLlRyYW5zYWN0aW9uLmZyb21IZXgodW5zaWduZWRDb21taXRUeEhleCk7CiAgY29uc3QgdW5zaWduZWRDb21taXRUeEhhc2ggPSB0eC5nZXRIYXNoKCk7CiAgdHguaW5zLmZvckVhY2goKGlucHV0LCBpKSA9PiB7CiAgICBjb25zdCBzaWduYXR1cmUgPSBjcnlwdG9fbGliXzEuYmFzZS5mcm9tSGV4KHNpZ25hdHVyZXNbaV0pOwogICAgaWYgKCFpbnB1dC53aXRuZXNzIHx8IGlucHV0LndpdG5lc3MubGVuZ3RoID09IDApIHsKICAgICAgaW5wdXQuc2NyaXB0ID0gYml0Y29pbi5wYXltZW50cy5wMnBraCh7CiAgICAgICAgcHVia2V5OiBiaXRjb2luLnBheW1lbnRzLnAycGtoKHsKICAgICAgICAgIGlucHV0OiBpbnB1dC5zY3JpcHQKICAgICAgICB9KS5wdWJrZXksCiAgICAgICAgc2lnbmF0dXJlOiBiaXRjb2luLnNjcmlwdC5zaWduYXR1cmUuZW5jb2RlKHNpZ25hdHVyZSwgYml0Y29pbi5UcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCkKICAgICAgfSkuaW5wdXQ7CiAgICB9IGVsc2UgewogICAgICBpbnB1dC53aXRuZXNzWzBdID0gYml0Y29pbi5zY3JpcHQuc2lnbmF0dXJlLmVuY29kZShzaWduYXR1cmUsIGJpdGNvaW4uVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwpOwogICAgfQogIH0pOwogIGNvbnN0IHNpZ25lZENvbW1pdFR4SGFzaCA9IHR4LmdldEhhc2goKTsKICBjb25zdCByZXMgPSBpbnNjcmliZUZvck1QQ1Vuc2lnbmVkKHJlcXVlc3QsIG5ldHdvcmssIHVuc2lnbmVkQ29tbWl0VHhIYXNoLCBzaWduZWRDb21taXRUeEhhc2gpOwogIHJldHVybiB7CiAgICBzaWduSGFzaExpc3Q6IG51bGwsCiAgICBjb21taXRUeDogdHgudG9IZXgoKSwKICAgIHJldmVhbFR4czogcmVzLnJldmVhbFR4cywKICAgIGNvbW1pdFR4RmVlOiByZXMuY29tbWl0VHhGZWUsCiAgICByZXZlYWxUeEZlZXM6IHJlcy5yZXZlYWxUeEZlZXMsCiAgICBjb21taXRBZGRyczogcmVzLmNvbW1pdEFkZHJzCiAgfTsKfQpleHBvcnRzLmluc2NyaWJlRm9yTVBDU2lnbmVkID0gaW5zY3JpYmVGb3JNUENTaWduZWQ7CmZ1bmN0aW9uIGNhbGN1bGF0ZVNpZ0hhc2godHgsIHByZXZPdXRGZXRjaGVyLCBuZXR3b3JrKSB7CiAgY29uc3Qgc2lnSGFzaExpc3QgPSBbXTsKICB0eC5pbnMuZm9yRWFjaCgoaW5wdXQsIGkpID0+IHsKICAgIGNvbnN0IHB1YmxpY0tleSA9IGNyeXB0b19saWJfMS5iYXNlLmZyb21IZXgocHJldk91dEZldGNoZXJbaV0ucHVibGljS2V5KTsKICAgIGNvbnN0IHBrU2NyaXB0ID0gYml0Y29pbi5hZGRyZXNzLnRvT3V0cHV0U2NyaXB0KHByZXZPdXRGZXRjaGVyW2ldLmFkZHJlc3MsIG5ldHdvcmspOwogICAgY29uc3QgcGxhY2Vob2xkZXJTaWduYXR1cmUgPSBCdWZmZXIuYWxsb2MoNjQsIDApOwogICAgbGV0IHNpZ0hhc2g7CiAgICBpZiAoKDAsIHBzYnR1dGlsc18xLmlzUDJUUikocGtTY3JpcHQpKSB7CiAgICAgIGNvbnN0IHByZXZPdXRTY3JpcHRzID0gcHJldk91dEZldGNoZXIubWFwKG8gPT4gYml0Y29pbi5hZGRyZXNzLnRvT3V0cHV0U2NyaXB0KG8uYWRkcmVzcywgbmV0d29yaykpOwogICAgICBjb25zdCB2YWx1ZXMgPSBwcmV2T3V0RmV0Y2hlci5tYXAobyA9PiBvLmFtb3VudCk7CiAgICAgIHNpZ0hhc2ggPSB0eC5oYXNoRm9yV2l0bmVzc1YxKGksIHByZXZPdXRTY3JpcHRzLCB2YWx1ZXMsIGJpdGNvaW4uVHJhbnNhY3Rpb24uU0lHSEFTSF9ERUZBVUxUKTsKICAgICAgaW5wdXQud2l0bmVzcyA9IFtwbGFjZWhvbGRlclNpZ25hdHVyZV07CiAgICB9IGVsc2UgaWYgKCgwLCBwc2J0dXRpbHNfMS5pc1AyUEtIKShwa1NjcmlwdCkpIHsKICAgICAgY29uc3QgcHJldlNjcmlwdCA9IGJpdGNvaW4uYWRkcmVzcy50b091dHB1dFNjcmlwdChwcmV2T3V0RmV0Y2hlcltpXS5hZGRyZXNzLCBuZXR3b3JrKTsKICAgICAgc2lnSGFzaCA9IHR4Lmhhc2hGb3JTaWduYXR1cmUoaSwgcHJldlNjcmlwdCwgYml0Y29pbi5UcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCk7CiAgICAgIGlucHV0LnNjcmlwdCA9IGJpdGNvaW4ucGF5bWVudHMucDJwa2goewogICAgICAgIHB1YmtleTogcHVibGljS2V5LAogICAgICAgIHNpZ25hdHVyZTogYml0Y29pbi5zY3JpcHQuc2lnbmF0dXJlLmVuY29kZShwbGFjZWhvbGRlclNpZ25hdHVyZSwgYml0Y29pbi5UcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCkKICAgICAgfSkuaW5wdXQ7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBwdWJLZXlIYXNoID0gYmNyeXB0by5oYXNoMTYwKHB1YmxpY0tleSk7CiAgICAgIGNvbnN0IHByZXZPdXRTY3JpcHQgPSBCdWZmZXIub2YoMHgxOSwgMHg3NiwgMHhhOSwgMHgxNCwgLi4ucHViS2V5SGFzaCwgMHg4OCwgMHhhYyk7CiAgICAgIHNpZ0hhc2ggPSB0eC5oYXNoRm9yV2l0bmVzcyhpLCBwcmV2T3V0U2NyaXB0LCBwcmV2T3V0RmV0Y2hlcltpXS5hbW91bnQsIGJpdGNvaW4uVHJhbnNhY3Rpb24uU0lHSEFTSF9BTEwpOwogICAgICBpbnB1dC53aXRuZXNzID0gYml0Y29pbi5wYXltZW50cy5wMndwa2goewogICAgICAgIHB1YmtleTogcHVibGljS2V5LAogICAgICAgIHNpZ25hdHVyZTogYml0Y29pbi5zY3JpcHQuc2lnbmF0dXJlLmVuY29kZShwbGFjZWhvbGRlclNpZ25hdHVyZSwgYml0Y29pbi5UcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCkKICAgICAgfSkud2l0bmVzczsKICAgICAgY29uc3QgcmVkZWVtU2NyaXB0ID0gQnVmZmVyLm9mKDB4MTYsIDAsIDIwLCAuLi5wdWJLZXlIYXNoKTsKICAgICAgaWYgKCgwLCBwc2J0dXRpbHNfMS5pc1AyU0hTY3JpcHQpKHBrU2NyaXB0KSkgewogICAgICAgIGlucHV0LnNjcmlwdCA9IHJlZGVlbVNjcmlwdDsKICAgICAgfQogICAgfQogICAgc2lnSGFzaExpc3QucHVzaChjcnlwdG9fbGliXzEuYmFzZS50b0hleChzaWdIYXNoKSk7CiAgfSk7CiAgcmV0dXJuIHNpZ0hhc2hMaXN0Owp9"},{"version":3,"names":["bitcoin","__importStar","require","crypto_lib_1","taproot","bcrypto","transaction_1","txBuild_1","psbtutils_1","sigcost_1","schnorr","signUtil","secp256k1","defaultTxVersion","defaultSequenceNum","defaultRevealOutValue","defaultMinChangeValue","maxStandardTxWeight","InscriptionTool","constructor","network","networks","inscriptionTxCtxDataList","revealTxs","commitTx","Transaction","commitTxPrevOutputFetcher","revealTxPrevOutputFetcher","mustCommitTxFee","mustRevealTxFees","commitAddrs","newInscriptionTool","request","tool","revealOutValue","minChangeValue","privateKey","commitTxPrevOutputList","inscriptionDataList","forEach","inscriptionData","push","createInscriptionTxCtxData","totalRevealPrevOutputValue","buildEmptyRevealTx","revealFeeRate","insufficient","buildCommitTx","changeAddress","commitFeeRate","signCommitTx","completeRevealTx","totalPrevOutputValue","inscriptionTxCtxData","i","tx","version","addInput","Buffer","alloc","addOutput","revealPkScript","emptySignature","emptyControlBlockWitness","txWitness","inscriptionScript","fee","Math","floor","byteLength","vectorSize","prevOutputValue","revealTxPrevOutput","pkScript","commitTxAddressPkScript","value","commitTxAddress","totalSenderAmount","commitTxPrevOutput","hash","base","reverseBuffer","fromHex","txId","vOut","amount","changePkScript","address","toOutputScript","txForEstimate","clone","signTx","vsize","countAdjustedVsize","map","a","changeAmount","outs","length","slice","vsizeWithoutChange","feeWithoutChange","revealTx","ins","getHash","prevOutScripts","values","hashForWitnessV1","SIGHASH_DEFAULT","signature","from","sign","randomBytes","witness","revealWeight","weight","Error","calculateFee","commitTxFee","_","out","revealTxFees","revealTxFee","exports","input","addressType","getAddressType","privateKeyFromWIF","privateKeyHex","toHex","publicKey","private2public","o","tweakedPrivKey","taprootTweakPrivKey","prevScript","hashForSignature","SIGHASH_ALL","payment","payments","p2pkh","script","encode","pubkey","pubKeyHash","hash160","prevOutScript","of","hashForWitness","redeemScript","privateKeyWif","internalPubKey","wif2Public","ops","OPS","inscriptionBuilder","OP_CHECKSIG","OP_FALSE","OP_IF","OP_DATA_1","contentType","OP_0","maxChunkSize","body","bodySize","end","OP_ENDIF","compile","scriptTree","output","redeem","redeemVersion","p2tr","internalPubkey","revealAddr","inscribe","inscribeForMPCUnsigned","unsignedCommitTxHash","signedCommitTxHash","scriptCtxList","totalRevealInValue","revealTxList","ctx","revealFee","revealInValue","totalCommitInValue","uxto","estimateTx","changeValue","sigHashList","calculateSigHash","commitTxHash","sigHash","signHashList","e","inscribeForMPCSigned","unsignedCommitTxHex","signatures","signatureList","res","prevOutFetcher","placeholderSignature","isP2TR","isP2PKH","p2wpkh","isP2SHScript"],"sources":["../src/inscribe.ts"],"sourcesContent":[null],"mappings":"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"}]}