{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--16!/Users/apple/IdeaProjects/onLinePayMerchant/src/permission.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/permission.js","mtime":1681375393617},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJvdXRlciBmcm9tICIuL3JvdXRlciI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4vc3RvcmUiOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC11aSI7CmNvbnN0IHdoaXRlTGlzdCA9IFsiL2xvZ2luIiwgIi9yZWdpc3RlciIsICIvNDA0Il07CnJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSwgbmV4dCkgPT4gewogIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJKV1QiKSkgewogICAgaWYgKHRvLnBhdGggPT09ICIvbG9naW4iKSB7CiAgICAgIG5leHQoewogICAgICAgIHBhdGg6ICIvIgogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChzdG9yZS5nZXR0ZXJzLnBlcm1pc3Npb25zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIC8vIOWIpOaWreW9k+WJjeeUqOaIt+aYr+WQpuW3suaLieWPluWujHVzZXJfaW5mb+S/oeaBrwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJHZXRJbmZvIikudGhlbigoKSA9PiB7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgiR2VuZXJhdGVSb3V0ZXMiKS50aGVuKGFjY2Vzc1JvdXRlcyA9PiB7CiAgICAgICAgICAgIC8vIOagueaNrnJvbGVz5p2D6ZmQ55Sf5oiQ5Y+v6K6/6Zeu55qE6Lev55Sx6KGoCiAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsgLy8g5Yqo5oCB5re75Yqg5Y+v6K6/6Zeu6Lev55Sx6KGoCiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIC4uLnRvLAogICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUKICAgICAgICAgICAgfSk7IC8vIGhhY2vmlrnms5Ug56Gu5L+dYWRkUm91dGVz5bey5a6M5oiQCiAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goIkZlZExvZ091dCIpLnRoZW4oKCkgPT4gewogICAgICAgICAgICBNZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIHBhdGg6ICIvIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIG5vQ2FjaGXvvJpmYWxzZei/m+ihjGtlZXAtYWxpdmXnvJPlrZgKICAgICAgICAvLyBpZiAoIXRvLm1ldGEubm9DYWNoZSkgewogICAgICAgIC8vIAlzdG9yZS5jb21taXQoJ3RhZ3NWaWV3L0FERF9DQUNIRURfVklFVycsIHRvLm5hbWUpCiAgICAgICAgLy8gfQogICAgICAgIG5leHQoKTsKICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICAvLyDmsqHmnIl0b2tlbgogICAgaWYgKHdoaXRlTGlzdC5pbmRleE9mKHRvLnBhdGgpICE9PSAtMSkgewogICAgICAvLyDlnKjlhY3nmbvlvZXnmb3lkI3ljZXvvIznm7TmjqXov5vlhaUKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dChgL2xvZ2luP3JlZGlyZWN0PSR7dG8uZnVsbFBhdGh9YCk7IC8vIOWQpuWImeWFqOmDqOmHjeWumuWQkeWIsOeZu+W9lemhtQogICAgfQogIH0KfSk7"},{"version":3,"names":["router","getToken","store","Message","whiteList","beforeEach","to","from","next","sessionStorage","getItem","path","getters","permissions","length","dispatch","then","accessRoutes","addRoutes","replace","catch","err","error","indexOf","fullPath"],"sources":["/Users/apple/IdeaProjects/onLinePayMerchant/src/permission.js"],"sourcesContent":["import router from \"./router\";\nimport {\n\tgetToken\n} from \"@/utils/auth\";\nimport store from \"./store\";\nimport {\n\tMessage\n} from \"element-ui\";\n\nconst whiteList = [\"/login\", \"/register\",\"/404\"];\n\nrouter.beforeEach((to, from, next) => {\n\tif (sessionStorage.getItem(\"JWT\")) {\n\t\tif (to.path === \"/login\") {\n\t\t\tnext({\n\t\t\t\tpath: \"/\"\n\t\t\t});\n\t\t} else {\n\t\t\tif (store.getters.permissions.length === 0) {\n\t\t\t\t// 判断当前用户是否已拉取完user_info信息\n\t\t\t\tstore.dispatch(\"GetInfo\").then(() => {\n\t\t\t\t\tstore.dispatch(\"GenerateRoutes\").then(accessRoutes => {\n\t\t\t\t\t\t// 根据roles权限生成可访问的路由表\n\t\t\t\t\t\trouter.addRoutes(accessRoutes); // 动态添加可访问路由表\n\t\t\t\t\t\tnext({\n\t\t\t\t\t\t\t...to,\n\t\t\t\t\t\t\treplace: true\n\t\t\t\t\t\t}); // hack方法 确保addRoutes已完成\n\t\t\t\t\t});\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tstore.dispatch(\"FedLogOut\").then(() => {\n\t\t\t\t\t\tMessage.error(err);\n\t\t\t\t\t\tnext({\n\t\t\t\t\t\t\tpath: \"/\"\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// noCache：false进行keep-alive缓存\n\t\t\t\t// if (!to.meta.noCache) {\n\t\t\t\t// \tstore.commit('tagsView/ADD_CACHED_VIEW', to.name)\n\t\t\t\t// }\n\t\t\t\tnext();\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// 没有token\n\t\tif (whiteList.indexOf(to.path) !== -1) {\n\t\t\t// 在免登录白名单，直接进入\n\t\t\tnext();\n\t\t} else {\n\t\t\tnext(`/login?redirect=${to.fullPath}`); // 否则全部重定向到登录页\n\t\t}\n\t}\n});\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,UAAU;AAC7B,SACCC,QAAQ,QACF,cAAc;AACrB,OAAOC,KAAK,MAAM,SAAS;AAC3B,SACCC,OAAO,QACD,YAAY;AAEnB,MAAMC,SAAS,GAAG,CAAC,QAAQ,EAAE,WAAW,EAAC,MAAM,CAAC;AAEhDJ,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACrC,IAAIC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC,EAAE;IAClC,IAAIJ,EAAE,CAACK,IAAI,KAAK,QAAQ,EAAE;MACzBH,IAAI,CAAC;QACJG,IAAI,EAAE;MACP,CAAC,CAAC;IACH,CAAC,MAAM;MACN,IAAIT,KAAK,CAACU,OAAO,CAACC,WAAW,CAACC,MAAM,KAAK,CAAC,EAAE;QAC3C;QACAZ,KAAK,CAACa,QAAQ,CAAC,SAAS,CAAC,CAACC,IAAI,CAAC,MAAM;UACpCd,KAAK,CAACa,QAAQ,CAAC,gBAAgB,CAAC,CAACC,IAAI,CAACC,YAAY,IAAI;YACrD;YACAjB,MAAM,CAACkB,SAAS,CAACD,YAAY,CAAC,CAAC,CAAC;YAChCT,IAAI,CAAC;cACJ,GAAGF,EAAE;cACLa,OAAO,EAAE;YACV,CAAC,CAAC,CAAC,CAAC;UACL,CAAC,CAAC;QACH,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,IAAI;UACfnB,KAAK,CAACa,QAAQ,CAAC,WAAW,CAAC,CAACC,IAAI,CAAC,MAAM;YACtCb,OAAO,CAACmB,KAAK,CAACD,GAAG,CAAC;YAClBb,IAAI,CAAC;cACJG,IAAI,EAAE;YACP,CAAC,CAAC;UACH,CAAC,CAAC;QACH,CAAC,CAAC;MACH,CAAC,MAAM;QACN;QACA;QACA;QACA;QACAH,IAAI,CAAC,CAAC;MACP;IACD;EACD,CAAC,MAAM;IACN;IACA,IAAIJ,SAAS,CAACmB,OAAO,CAACjB,EAAE,CAACK,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;MACtC;MACAH,IAAI,CAAC,CAAC;IACP,CAAC,MAAM;MACNA,IAAI,CAAE,mBAAkBF,EAAE,CAACkB,QAAS,EAAC,CAAC,CAAC,CAAC;IACzC;EACD;AACD,CAAC,CAAC"}]}