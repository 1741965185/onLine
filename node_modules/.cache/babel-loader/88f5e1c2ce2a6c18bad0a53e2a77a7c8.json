{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/payments/p2tr.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/payments/p2tr.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNoaWZ0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zaGlmdC5qcyIpOwp2YXIgX19jcmVhdGVCaW5kaW5nID0gdGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZyB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikgewogIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7CiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspOwogIGlmICghZGVzYyB8fCAoImdldCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkgewogICAgZGVzYyA9IHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG1ba107CiAgICAgIH0KICAgIH07CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7Cn0gOiBmdW5jdGlvbiAobywgbSwgaywgazIpIHsKICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrOwogIG9bazJdID0gbVtrXTsKfSk7CnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSB0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0IHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIHYpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgImRlZmF1bHQiLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgdmFsdWU6IHYKICB9KTsKfSA6IGZ1bmN0aW9uIChvLCB2KSB7CiAgb1siZGVmYXVsdCJdID0gdjsKfSk7CnZhciBfX2ltcG9ydFN0YXIgPSB0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyIHx8IGZ1bmN0aW9uIChtb2QpIHsKICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kOwogIHZhciByZXN1bHQgPSB7fTsKICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gImRlZmF1bHQiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspOwogIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7CiAgcmV0dXJuIHJlc3VsdDsKfTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLnAydHIgPSB2b2lkIDA7CmNvbnN0IGJ1ZmZlcl8xID0gcmVxdWlyZSgiYnVmZmVyIik7CmNvbnN0IG5ldHdvcmtzXzEgPSByZXF1aXJlKCIuLi9uZXR3b3JrcyIpOwpjb25zdCBic2NyaXB0ID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4uL3NjcmlwdCIpKTsKY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoIi4uL3R5cGVzIik7CmNvbnN0IGJpcDM0MV8xID0gcmVxdWlyZSgiLi9iaXAzNDEiKTsKY29uc3QgbGF6eSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKCIuL2xhenkiKSk7CmNvbnN0IGNyeXB0b19saWJfMSA9IHJlcXVpcmUoIkBva3h3ZWIzL2NyeXB0by1saWIiKTsKY29uc3QgT1BTID0gYnNjcmlwdC5PUFM7CmNvbnN0IFRBUFJPT1RfV0lUTkVTU19WRVJTSU9OID0gMHgwMTsKY29uc3QgQU5ORVhfUFJFRklYID0gMHg1MDsKZnVuY3Rpb24gcDJ0cihhLCBvcHRzKSB7CiAgaWYgKCFhLmFkZHJlc3MgJiYgIWEub3V0cHV0ICYmICFhLnB1YmtleSAmJiAhYS5pbnRlcm5hbFB1YmtleSAmJiAhKGEud2l0bmVzcyAmJiBhLndpdG5lc3MubGVuZ3RoID4gMSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vdCBlbm91Z2ggZGF0YScpOwogIG9wdHMgPSBPYmplY3QuYXNzaWduKHsKICAgIHZhbGlkYXRlOiB0cnVlCiAgfSwgb3B0cyB8fCB7fSk7CiAgKDAsIHR5cGVzXzEudHlwZWZvcmNlKSh7CiAgICBhZGRyZXNzOiB0eXBlc18xLnR5cGVmb3JjZS5tYXliZSh0eXBlc18xLnR5cGVmb3JjZS5TdHJpbmcpLAogICAgaW5wdXQ6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLkJ1ZmZlck4oMCkpLAogICAgbmV0d29yazogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUodHlwZXNfMS50eXBlZm9yY2UuT2JqZWN0KSwKICAgIG91dHB1dDogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUodHlwZXNfMS50eXBlZm9yY2UuQnVmZmVyTigzNCkpLAogICAgaW50ZXJuYWxQdWJrZXk6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLkJ1ZmZlck4oMzIpKSwKICAgIGhhc2g6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLkJ1ZmZlck4oMzIpKSwKICAgIHB1YmtleTogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUodHlwZXNfMS50eXBlZm9yY2UuQnVmZmVyTigzMikpLAogICAgd2l0bmVzczogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUodHlwZXNfMS50eXBlZm9yY2UuYXJyYXlPZih0eXBlc18xLnR5cGVmb3JjZS5CdWZmZXIpKSwKICAgIHNjcmlwdFRyZWU6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEuaXNUYXB0cmVlKSwKICAgIHJlZGVlbTogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUoewogICAgICBvdXRwdXQ6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLkJ1ZmZlciksCiAgICAgIHJlZGVlbVZlcnNpb246IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLk51bWJlciksCiAgICAgIHdpdG5lc3M6IHR5cGVzXzEudHlwZWZvcmNlLm1heWJlKHR5cGVzXzEudHlwZWZvcmNlLmFycmF5T2YodHlwZXNfMS50eXBlZm9yY2UuQnVmZmVyKSkKICAgIH0pLAogICAgcmVkZWVtVmVyc2lvbjogdHlwZXNfMS50eXBlZm9yY2UubWF5YmUodHlwZXNfMS50eXBlZm9yY2UuTnVtYmVyKQogIH0sIGEpOwogIGNvbnN0IF9hZGRyZXNzID0gbGF6eS52YWx1ZSgoKSA9PiB7CiAgICBjb25zdCByZXN1bHQgPSBjcnlwdG9fbGliXzEuYmFzZS5iZWNoMzJtLmRlY29kZShhLmFkZHJlc3MpOwogICAgY29uc3QgdmVyc2lvbiA9IHJlc3VsdC53b3Jkcy5zaGlmdCgpOwogICAgY29uc3QgZGF0YSA9IGNyeXB0b19saWJfMS5iYXNlLmJlY2gzMm0uZnJvbVdvcmRzKHJlc3VsdC53b3Jkcyk7CiAgICByZXR1cm4gewogICAgICB2ZXJzaW9uLAogICAgICBwcmVmaXg6IHJlc3VsdC5wcmVmaXgsCiAgICAgIGRhdGE6IGJ1ZmZlcl8xLkJ1ZmZlci5mcm9tKGRhdGEpCiAgICB9OwogIH0pOwogIGNvbnN0IF93aXRuZXNzID0gbGF6eS52YWx1ZSgoKSA9PiB7CiAgICBpZiAoIWEud2l0bmVzcyB8fCAhYS53aXRuZXNzLmxlbmd0aCkgcmV0dXJuOwogICAgaWYgKGEud2l0bmVzcy5sZW5ndGggPj0gMiAmJiBhLndpdG5lc3NbYS53aXRuZXNzLmxlbmd0aCAtIDFdWzBdID09PSBBTk5FWF9QUkVGSVgpIHsKICAgICAgcmV0dXJuIGEud2l0bmVzcy5zbGljZSgwLCAtMSk7CiAgICB9CiAgICByZXR1cm4gYS53aXRuZXNzLnNsaWNlKCk7CiAgfSk7CiAgY29uc3QgX2hhc2hUcmVlID0gbGF6eS52YWx1ZSgoKSA9PiB7CiAgICBpZiAoYS5zY3JpcHRUcmVlKSByZXR1cm4gKDAsIGJpcDM0MV8xLnRvSGFzaFRyZWUpKGEuc2NyaXB0VHJlZSk7CiAgICBpZiAoYS5oYXNoKSByZXR1cm4gewogICAgICBoYXNoOiBhLmhhc2gKICAgIH07CiAgICByZXR1cm47CiAgfSk7CiAgY29uc3QgbmV0d29yayA9IGEubmV0d29yayB8fCBuZXR3b3Jrc18xLmJpdGNvaW47CiAgY29uc3QgbyA9IHsKICAgIG5hbWU6ICdwMnRyJywKICAgIG5ldHdvcmsKICB9OwogIGxhenkucHJvcChvLCAnYWRkcmVzcycsICgpID0+IHsKICAgIGlmICghby5wdWJrZXkpIHJldHVybjsKICAgIGNvbnN0IHdvcmRzID0gY3J5cHRvX2xpYl8xLmJhc2UuYmVjaDMybS50b1dvcmRzKG8ucHVia2V5KTsKICAgIHdvcmRzLnVuc2hpZnQoVEFQUk9PVF9XSVRORVNTX1ZFUlNJT04pOwogICAgcmV0dXJuIGNyeXB0b19saWJfMS5iYXNlLmJlY2gzMm0uZW5jb2RlKG5ldHdvcmsuYmVjaDMyLCB3b3Jkcyk7CiAgfSk7CiAgbGF6eS5wcm9wKG8sICdoYXNoJywgKCkgPT4gewogICAgY29uc3QgaGFzaFRyZWUgPSBfaGFzaFRyZWUoKTsKICAgIGlmIChoYXNoVHJlZSkgcmV0dXJuIGhhc2hUcmVlLmhhc2g7CiAgICBjb25zdCB3ID0gX3dpdG5lc3MoKTsKICAgIGlmICh3ICYmIHcubGVuZ3RoID4gMSkgewogICAgICBjb25zdCBjb250cm9sQmxvY2sgPSB3W3cubGVuZ3RoIC0gMV07CiAgICAgIGNvbnN0IGxlYWZWZXJzaW9uID0gY29udHJvbEJsb2NrWzBdICYgdHlwZXNfMS5UQVBMRUFGX1ZFUlNJT05fTUFTSzsKICAgICAgY29uc3Qgc2NyaXB0ID0gd1t3Lmxlbmd0aCAtIDJdOwogICAgICBjb25zdCBsZWFmSGFzaCA9ICgwLCBiaXAzNDFfMS50YXBsZWFmSGFzaCkoewogICAgICAgIG91dHB1dDogc2NyaXB0LAogICAgICAgIHZlcnNpb246IGxlYWZWZXJzaW9uCiAgICAgIH0pOwogICAgICByZXR1cm4gKDAsIGJpcDM0MV8xLnJvb3RIYXNoRnJvbVBhdGgpKGNvbnRyb2xCbG9jaywgbGVhZkhhc2gpOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfSk7CiAgbGF6eS5wcm9wKG8sICdvdXRwdXQnLCAoKSA9PiB7CiAgICBpZiAoIW8ucHVia2V5KSByZXR1cm47CiAgICByZXR1cm4gYnNjcmlwdC5jb21waWxlKFtPUFMuT1BfMSwgby5wdWJrZXldKTsKICB9KTsKICBsYXp5LnByb3AobywgJ3JlZGVlbVZlcnNpb24nLCAoKSA9PiB7CiAgICBpZiAoYS5yZWRlZW1WZXJzaW9uKSByZXR1cm4gYS5yZWRlZW1WZXJzaW9uOwogICAgaWYgKGEucmVkZWVtICYmIGEucmVkZWVtLnJlZGVlbVZlcnNpb24gIT09IHVuZGVmaW5lZCAmJiBhLnJlZGVlbS5yZWRlZW1WZXJzaW9uICE9PSBudWxsKSB7CiAgICAgIHJldHVybiBhLnJlZGVlbS5yZWRlZW1WZXJzaW9uOwogICAgfQogICAgcmV0dXJuIGJpcDM0MV8xLkxFQUZfVkVSU0lPTl9UQVBTQ1JJUFQ7CiAgfSk7CiAgbGF6eS5wcm9wKG8sICdyZWRlZW0nLCAoKSA9PiB7CiAgICBjb25zdCB3aXRuZXNzID0gX3dpdG5lc3MoKTsKICAgIGlmICghd2l0bmVzcyB8fCB3aXRuZXNzLmxlbmd0aCA8IDIpIHJldHVybjsKICAgIHJldHVybiB7CiAgICAgIG91dHB1dDogd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDJdLAogICAgICB3aXRuZXNzOiB3aXRuZXNzLnNsaWNlKDAsIC0yKSwKICAgICAgcmVkZWVtVmVyc2lvbjogd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDFdWzBdICYgdHlwZXNfMS5UQVBMRUFGX1ZFUlNJT05fTUFTSwogICAgfTsKICB9KTsKICBsYXp5LnByb3AobywgJ3B1YmtleScsICgpID0+IHsKICAgIGlmIChhLnB1YmtleSkgcmV0dXJuIGEucHVia2V5OwogICAgaWYgKGEub3V0cHV0KSByZXR1cm4gYS5vdXRwdXQuc2xpY2UoMik7CiAgICBpZiAoYS5hZGRyZXNzKSByZXR1cm4gX2FkZHJlc3MoKS5kYXRhOwogICAgaWYgKG8uaW50ZXJuYWxQdWJrZXkpIHsKICAgICAgY29uc3QgdHdlYWtlZEtleSA9ICgwLCBiaXAzNDFfMS50d2Vha0tleSkoby5pbnRlcm5hbFB1YmtleSwgby5oYXNoKTsKICAgICAgaWYgKHR3ZWFrZWRLZXkpIHJldHVybiB0d2Vha2VkS2V5Lng7CiAgICB9CiAgfSk7CiAgbGF6eS5wcm9wKG8sICdpbnRlcm5hbFB1YmtleScsICgpID0+IHsKICAgIGlmIChhLmludGVybmFsUHVia2V5KSByZXR1cm4gYS5pbnRlcm5hbFB1YmtleTsKICAgIGNvbnN0IHdpdG5lc3MgPSBfd2l0bmVzcygpOwogICAgaWYgKHdpdG5lc3MgJiYgd2l0bmVzcy5sZW5ndGggPiAxKSByZXR1cm4gd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDFdLnNsaWNlKDEsIDMzKTsKICB9KTsKICBsYXp5LnByb3AobywgJ3NpZ25hdHVyZScsICgpID0+IHsKICAgIGlmIChhLnNpZ25hdHVyZSkgcmV0dXJuIGEuc2lnbmF0dXJlOwogICAgY29uc3Qgd2l0bmVzcyA9IF93aXRuZXNzKCk7CiAgICBpZiAoIXdpdG5lc3MgfHwgd2l0bmVzcy5sZW5ndGggIT09IDEpIHJldHVybjsKICAgIHJldHVybiB3aXRuZXNzWzBdOwogIH0pOwogIGxhenkucHJvcChvLCAnd2l0bmVzcycsICgpID0+IHsKICAgIGlmIChhLndpdG5lc3MpIHJldHVybiBhLndpdG5lc3M7CiAgICBjb25zdCBoYXNoVHJlZSA9IF9oYXNoVHJlZSgpOwogICAgaWYgKGhhc2hUcmVlICYmIGEucmVkZWVtICYmIGEucmVkZWVtLm91dHB1dCAmJiBhLmludGVybmFsUHVia2V5KSB7CiAgICAgIGNvbnN0IGxlYWZIYXNoID0gKDAsIGJpcDM0MV8xLnRhcGxlYWZIYXNoKSh7CiAgICAgICAgb3V0cHV0OiBhLnJlZGVlbS5vdXRwdXQsCiAgICAgICAgdmVyc2lvbjogby5yZWRlZW1WZXJzaW9uCiAgICAgIH0pOwogICAgICBjb25zdCBwYXRoID0gKDAsIGJpcDM0MV8xLmZpbmRTY3JpcHRQYXRoKShoYXNoVHJlZSwgbGVhZkhhc2gpOwogICAgICBpZiAoIXBhdGgpIHJldHVybjsKICAgICAgY29uc3Qgb3V0cHV0S2V5ID0gKDAsIGJpcDM0MV8xLnR3ZWFrS2V5KShhLmludGVybmFsUHVia2V5LCBoYXNoVHJlZS5oYXNoKTsKICAgICAgaWYgKCFvdXRwdXRLZXkpIHJldHVybjsKICAgICAgY29uc3QgY29udHJvbEJvY2sgPSBidWZmZXJfMS5CdWZmZXIuY29uY2F0KFtidWZmZXJfMS5CdWZmZXIuZnJvbShbby5yZWRlZW1WZXJzaW9uIHwgb3V0cHV0S2V5LnBhcml0eV0pLCBhLmludGVybmFsUHVia2V5XS5jb25jYXQocGF0aCkpOwogICAgICByZXR1cm4gW2EucmVkZWVtLm91dHB1dCwgY29udHJvbEJvY2tdOwogICAgfQogICAgaWYgKGEuc2lnbmF0dXJlKSByZXR1cm4gW2Euc2lnbmF0dXJlXTsKICB9KTsKICBpZiAob3B0cy52YWxpZGF0ZSkgewogICAgbGV0IHB1YmtleSA9IGJ1ZmZlcl8xLkJ1ZmZlci5mcm9tKFtdKTsKICAgIGlmIChhLmFkZHJlc3MpIHsKICAgICAgaWYgKG5ldHdvcmsgJiYgbmV0d29yay5iZWNoMzIgIT09IF9hZGRyZXNzKCkucHJlZml4KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHByZWZpeCBvciBOZXR3b3JrIG1pc21hdGNoJyk7CiAgICAgIGlmIChfYWRkcmVzcygpLnZlcnNpb24gIT09IFRBUFJPT1RfV0lUTkVTU19WRVJTSU9OKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGFkZHJlc3MgdmVyc2lvbicpOwogICAgICBpZiAoX2FkZHJlc3MoKS5kYXRhLmxlbmd0aCAhPT0gMzIpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYWRkcmVzcyBkYXRhJyk7CiAgICAgIHB1YmtleSA9IF9hZGRyZXNzKCkuZGF0YTsKICAgIH0KICAgIGlmIChhLnB1YmtleSkgewogICAgICBpZiAocHVia2V5Lmxlbmd0aCA+IDAgJiYgIXB1YmtleS5lcXVhbHMoYS5wdWJrZXkpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQdWJrZXkgbWlzbWF0Y2gnKTtlbHNlIHB1YmtleSA9IGEucHVia2V5OwogICAgfQogICAgaWYgKGEub3V0cHV0KSB7CiAgICAgIGlmIChhLm91dHB1dC5sZW5ndGggIT09IDM0IHx8IGEub3V0cHV0WzBdICE9PSBPUFMuT1BfMSB8fCBhLm91dHB1dFsxXSAhPT0gMHgyMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignT3V0cHV0IGlzIGludmFsaWQnKTsKICAgICAgaWYgKHB1YmtleS5sZW5ndGggPiAwICYmICFwdWJrZXkuZXF1YWxzKGEub3V0cHV0LnNsaWNlKDIpKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignUHVia2V5IG1pc21hdGNoJyk7ZWxzZSBwdWJrZXkgPSBhLm91dHB1dC5zbGljZSgyKTsKICAgIH0KICAgIGlmIChhLmludGVybmFsUHVia2V5KSB7CiAgICAgIGNvbnN0IHR3ZWFrZWRLZXkgPSAoMCwgYmlwMzQxXzEudHdlYWtLZXkpKGEuaW50ZXJuYWxQdWJrZXksIG8uaGFzaCk7CiAgICAgIGlmIChwdWJrZXkubGVuZ3RoID4gMCAmJiAhcHVia2V5LmVxdWFscyh0d2Vha2VkS2V5LngpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQdWJrZXkgbWlzbWF0Y2gnKTtlbHNlIHB1YmtleSA9IHR3ZWFrZWRLZXkueDsKICAgIH0KICAgIGlmIChwdWJrZXkgJiYgcHVia2V5Lmxlbmd0aCkgewogICAgICBpZiAocHVia2V5Lmxlbmd0aCAhPT0gMzIpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgcHVia2V5IGZvciBwMnRyJyk7CiAgICB9CiAgICBjb25zdCBoYXNoVHJlZSA9IF9oYXNoVHJlZSgpOwogICAgaWYgKGEuaGFzaCAmJiBoYXNoVHJlZSkgewogICAgICBpZiAoIWEuaGFzaC5lcXVhbHMoaGFzaFRyZWUuaGFzaCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0hhc2ggbWlzbWF0Y2gnKTsKICAgIH0KICAgIGlmIChhLnJlZGVlbSAmJiBhLnJlZGVlbS5vdXRwdXQgJiYgaGFzaFRyZWUpIHsKICAgICAgY29uc3QgbGVhZkhhc2ggPSAoMCwgYmlwMzQxXzEudGFwbGVhZkhhc2gpKHsKICAgICAgICBvdXRwdXQ6IGEucmVkZWVtLm91dHB1dCwKICAgICAgICB2ZXJzaW9uOiBvLnJlZGVlbVZlcnNpb24KICAgICAgfSk7CiAgICAgIGlmICghKDAsIGJpcDM0MV8xLmZpbmRTY3JpcHRQYXRoKShoYXNoVHJlZSwgbGVhZkhhc2gpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWRlZW0gc2NyaXB0IG5vdCBpbiB0cmVlJyk7CiAgICB9CiAgICBjb25zdCB3aXRuZXNzID0gX3dpdG5lc3MoKTsKICAgIGlmIChhLnJlZGVlbSAmJiBvLnJlZGVlbSkgewogICAgICBpZiAoYS5yZWRlZW0ucmVkZWVtVmVyc2lvbikgewogICAgICAgIGlmIChhLnJlZGVlbS5yZWRlZW1WZXJzaW9uICE9PSBvLnJlZGVlbS5yZWRlZW1WZXJzaW9uKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWRlZW0ucmVkZWVtVmVyc2lvbiBhbmQgd2l0bmVzcyBtaXNtYXRjaCcpOwogICAgICB9CiAgICAgIGlmIChhLnJlZGVlbS5vdXRwdXQpIHsKICAgICAgICBpZiAoYnNjcmlwdC5kZWNvbXBpbGUoYS5yZWRlZW0ub3V0cHV0KS5sZW5ndGggPT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JlZGVlbS5vdXRwdXQgaXMgaW52YWxpZCcpOwogICAgICAgIGlmIChvLnJlZGVlbS5vdXRwdXQgJiYgIWEucmVkZWVtLm91dHB1dC5lcXVhbHMoby5yZWRlZW0ub3V0cHV0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignUmVkZWVtLm91dHB1dCBhbmQgd2l0bmVzcyBtaXNtYXRjaCcpOwogICAgICB9CiAgICAgIGlmIChhLnJlZGVlbS53aXRuZXNzKSB7CiAgICAgICAgaWYgKG8ucmVkZWVtLndpdG5lc3MgJiYgIXN0YWNrc0VxdWFsKGEucmVkZWVtLndpdG5lc3MsIG8ucmVkZWVtLndpdG5lc3MpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdSZWRlZW0ud2l0bmVzcyBhbmQgd2l0bmVzcyBtaXNtYXRjaCcpOwogICAgICB9CiAgICB9CiAgICBpZiAod2l0bmVzcyAmJiB3aXRuZXNzLmxlbmd0aCkgewogICAgICBpZiAod2l0bmVzcy5sZW5ndGggPT09IDEpIHsKICAgICAgICBpZiAoYS5zaWduYXR1cmUgJiYgIWEuc2lnbmF0dXJlLmVxdWFscyh3aXRuZXNzWzBdKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignU2lnbmF0dXJlIG1pc21hdGNoJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgY29udHJvbEJsb2NrID0gd2l0bmVzc1t3aXRuZXNzLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChjb250cm9sQmxvY2subGVuZ3RoIDwgMzMpIHRocm93IG5ldyBUeXBlRXJyb3IoYFRoZSBjb250cm9sLWJsb2NrIGxlbmd0aCBpcyB0b28gc21hbGwuIEdvdCAke2NvbnRyb2xCbG9jay5sZW5ndGh9LCBleHBlY3RlZCBtaW4gMzMuYCk7CiAgICAgICAgaWYgKChjb250cm9sQmxvY2subGVuZ3RoIC0gMzMpICUgMzIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoYFRoZSBjb250cm9sLWJsb2NrIGxlbmd0aCBvZiAke2NvbnRyb2xCbG9jay5sZW5ndGh9IGlzIGluY29ycmVjdCFgKTsKICAgICAgICBjb25zdCBtID0gKGNvbnRyb2xCbG9jay5sZW5ndGggLSAzMykgLyAzMjsKICAgICAgICBpZiAobSA+IDEyOCkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIHNjcmlwdCBwYXRoIGlzIHRvbyBsb25nLiBHb3QgJHttfSwgZXhwZWN0ZWQgbWF4IDEyOC5gKTsKICAgICAgICBjb25zdCBpbnRlcm5hbFB1YmtleSA9IGNvbnRyb2xCbG9jay5zbGljZSgxLCAzMyk7CiAgICAgICAgaWYgKGEuaW50ZXJuYWxQdWJrZXkgJiYgIWEuaW50ZXJuYWxQdWJrZXkuZXF1YWxzKGludGVybmFsUHVia2V5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW50ZXJuYWwgcHVia2V5IG1pc21hdGNoJyk7CiAgICAgICAgaWYgKGludGVybmFsUHVia2V5Lmxlbmd0aCAhPT0gMzIpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaW50ZXJuYWxQdWJrZXkgZm9yIHAydHIgd2l0bmVzcycpOwogICAgICAgIGNvbnN0IGxlYWZWZXJzaW9uID0gY29udHJvbEJsb2NrWzBdICYgdHlwZXNfMS5UQVBMRUFGX1ZFUlNJT05fTUFTSzsKICAgICAgICBjb25zdCBzY3JpcHQgPSB3aXRuZXNzW3dpdG5lc3MubGVuZ3RoIC0gMl07CiAgICAgICAgY29uc3QgbGVhZkhhc2ggPSAoMCwgYmlwMzQxXzEudGFwbGVhZkhhc2gpKHsKICAgICAgICAgIG91dHB1dDogc2NyaXB0LAogICAgICAgICAgdmVyc2lvbjogbGVhZlZlcnNpb24KICAgICAgICB9KTsKICAgICAgICBjb25zdCBoYXNoID0gKDAsIGJpcDM0MV8xLnJvb3RIYXNoRnJvbVBhdGgpKGNvbnRyb2xCbG9jaywgbGVhZkhhc2gpOwogICAgICAgIGNvbnN0IG91dHB1dEtleSA9ICgwLCBiaXAzNDFfMS50d2Vha0tleSkoaW50ZXJuYWxQdWJrZXksIGhhc2gpOwogICAgICAgIGlmICghb3V0cHV0S2V5KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG91dHB1dEtleSBmb3IgcDJ0ciB3aXRuZXNzJyk7CiAgICAgICAgaWYgKHB1YmtleS5sZW5ndGggJiYgIXB1YmtleS5lcXVhbHMob3V0cHV0S2V5LngpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQdWJrZXkgbWlzbWF0Y2ggZm9yIHAydHIgd2l0bmVzcycpOwogICAgICAgIGlmIChvdXRwdXRLZXkucGFyaXR5ICE9PSAoY29udHJvbEJsb2NrWzBdICYgMSkpIHRocm93IG5ldyBFcnJvcignSW5jb3JyZWN0IHBhcml0eScpOwogICAgICB9CiAgICB9CiAgfQogIHJldHVybiBPYmplY3QuYXNzaWduKG8sIGEpOwp9CmV4cG9ydHMucDJ0ciA9IHAydHI7CmZ1bmN0aW9uIHN0YWNrc0VxdWFsKGEsIGIpIHsKICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2U7CiAgcmV0dXJuIGEuZXZlcnkoKHgsIGkpID0+IHsKICAgIHJldHVybiB4LmVxdWFscyhiW2ldKTsKICB9KTsKfQ=="},{"version":3,"names":["buffer_1","require","networks_1","bscript","__importStar","types_1","bip341_1","lazy","crypto_lib_1","OPS","TAPROOT_WITNESS_VERSION","ANNEX_PREFIX","p2tr","a","opts","address","output","pubkey","internalPubkey","witness","length","TypeError","Object","assign","validate","typeforce","maybe","String","input","BufferN","network","hash","arrayOf","Buffer","scriptTree","isTaptree","redeem","redeemVersion","Number","_address","value","result","base","bech32m","decode","version","words","shift","data","fromWords","prefix","from","_witness","slice","_hashTree","toHashTree","bitcoin","o","name","prop","toWords","unshift","encode","bech32","hashTree","w","controlBlock","leafVersion","TAPLEAF_VERSION_MASK","script","leafHash","tapleafHash","rootHashFromPath","compile","OP_1","undefined","LEAF_VERSION_TAPSCRIPT","tweakedKey","tweakKey","x","signature","path","findScriptPath","outputKey","controlBock","concat","parity","equals","decompile","stacksEqual","m","Error","exports","b","every","i"],"sources":["../../../src/bitcoinjs-lib/payments/p2tr.ts"],"sourcesContent":[null],"mappings":"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"}]}