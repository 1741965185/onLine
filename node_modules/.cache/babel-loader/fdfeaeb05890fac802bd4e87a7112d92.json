{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--17!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/transaction.js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/@okxweb3/coin-bitcoin/dist/bitcoinjs-lib/transaction.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKdmFyIF9fY3JlYXRlQmluZGluZyA9IHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgbSwgaywgazIpIHsKICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrOwogIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTsKICBpZiAoIWRlc2MgfHwgKCJnZXQiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHsKICAgIGRlc2MgPSB7CiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBtW2tdOwogICAgICB9CiAgICB9OwogIH0KICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpOwp9IDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7CiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gazsKICBvW2syXSA9IG1ba107Cn0pOwp2YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gdGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCB2KSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sICJkZWZhdWx0IiwgewogICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgIHZhbHVlOiB2CiAgfSk7Cn0gOiBmdW5jdGlvbiAobywgdikgewogIG9bImRlZmF1bHQiXSA9IHY7Cn0pOwp2YXIgX19pbXBvcnRTdGFyID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhciB8fCBmdW5jdGlvbiAobW9kKSB7CiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDsKICB2YXIgcmVzdWx0ID0ge307CiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09ICJkZWZhdWx0IiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTsKICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpOwogIHJldHVybiByZXN1bHQ7Cn07Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5UcmFuc2FjdGlvbiA9IGV4cG9ydHMudmVjdG9yU2l6ZSA9IGV4cG9ydHMudmFyU2xpY2VTaXplID0gdm9pZCAwOwpjb25zdCBidWZmZXJ1dGlsc18xID0gcmVxdWlyZSgiLi9idWZmZXJ1dGlscyIpOwpjb25zdCBiY3J5cHRvID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4vY3J5cHRvIikpOwpjb25zdCBic2NyaXB0ID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4vc2NyaXB0IikpOwpjb25zdCBzY3JpcHRfMSA9IHJlcXVpcmUoIi4vc2NyaXB0Iik7CmNvbnN0IHR5cGVzID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoIi4vdHlwZXMiKSk7CmNvbnN0IHsKICB0eXBlZm9yY2UKfSA9IHR5cGVzOwpmdW5jdGlvbiB2YXJTbGljZVNpemUoc29tZVNjcmlwdCkgewogIGNvbnN0IGxlbmd0aCA9IHNvbWVTY3JpcHQubGVuZ3RoOwogIHJldHVybiBidWZmZXJ1dGlsc18xLnZhcnVpbnQuZW5jb2RpbmdMZW5ndGgobGVuZ3RoKSArIGxlbmd0aDsKfQpleHBvcnRzLnZhclNsaWNlU2l6ZSA9IHZhclNsaWNlU2l6ZTsKZnVuY3Rpb24gdmVjdG9yU2l6ZShzb21lVmVjdG9yKSB7CiAgY29uc3QgbGVuZ3RoID0gc29tZVZlY3Rvci5sZW5ndGg7CiAgcmV0dXJuIGJ1ZmZlcnV0aWxzXzEudmFydWludC5lbmNvZGluZ0xlbmd0aChsZW5ndGgpICsgc29tZVZlY3Rvci5yZWR1Y2UoKHN1bSwgd2l0bmVzcykgPT4gewogICAgcmV0dXJuIHN1bSArIHZhclNsaWNlU2l6ZSh3aXRuZXNzKTsKICB9LCAwKTsKfQpleHBvcnRzLnZlY3RvclNpemUgPSB2ZWN0b3JTaXplOwpjb25zdCBFTVBUWV9CVUZGRVIgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMCk7CmNvbnN0IEVNUFRZX1dJVE5FU1MgPSBbXTsKY29uc3QgWkVSTyA9IEJ1ZmZlci5mcm9tKCcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJywgJ2hleCcpOwpjb25zdCBPTkUgPSBCdWZmZXIuZnJvbSgnMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMScsICdoZXgnKTsKY29uc3QgVkFMVUVfVUlOVDY0X01BWCA9IEJ1ZmZlci5mcm9tKCdmZmZmZmZmZmZmZmZmZmZmJywgJ2hleCcpOwpjb25zdCBCTEFOS19PVVRQVVQgPSB7CiAgc2NyaXB0OiBFTVBUWV9CVUZGRVIsCiAgdmFsdWVCdWZmZXI6IFZBTFVFX1VJTlQ2NF9NQVgKfTsKZnVuY3Rpb24gaXNPdXRwdXQob3V0KSB7CiAgcmV0dXJuIG91dC52YWx1ZSAhPT0gdW5kZWZpbmVkOwp9CmNsYXNzIFRyYW5zYWN0aW9uIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIHRoaXMudmVyc2lvbiA9IDE7CiAgICB0aGlzLmxvY2t0aW1lID0gMDsKICAgIHRoaXMuaW5zID0gW107CiAgICB0aGlzLm91dHMgPSBbXTsKICB9CiAgc3RhdGljIGZyb21CdWZmZXIoYnVmZmVyLCBfTk9fU1RSSUNUKSB7CiAgICBjb25zdCBidWZmZXJSZWFkZXIgPSBuZXcgYnVmZmVydXRpbHNfMS5CdWZmZXJSZWFkZXIoYnVmZmVyKTsKICAgIGNvbnN0IHR4ID0gbmV3IFRyYW5zYWN0aW9uKCk7CiAgICB0eC52ZXJzaW9uID0gYnVmZmVyUmVhZGVyLnJlYWRJbnQzMigpOwogICAgY29uc3QgbWFya2VyID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50OCgpOwogICAgY29uc3QgZmxhZyA9IGJ1ZmZlclJlYWRlci5yZWFkVUludDgoKTsKICAgIGxldCBoYXNXaXRuZXNzZXMgPSBmYWxzZTsKICAgIGlmIChtYXJrZXIgPT09IFRyYW5zYWN0aW9uLkFEVkFOQ0VEX1RSQU5TQUNUSU9OX01BUktFUiAmJiBmbGFnID09PSBUcmFuc2FjdGlvbi5BRFZBTkNFRF9UUkFOU0FDVElPTl9GTEFHKSB7CiAgICAgIGhhc1dpdG5lc3NlcyA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICBidWZmZXJSZWFkZXIub2Zmc2V0IC09IDI7CiAgICB9CiAgICBjb25zdCB2aW5MZW4gPSBidWZmZXJSZWFkZXIucmVhZFZhckludCgpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aW5MZW47ICsraSkgewogICAgICB0eC5pbnMucHVzaCh7CiAgICAgICAgaGFzaDogYnVmZmVyUmVhZGVyLnJlYWRTbGljZSgzMiksCiAgICAgICAgaW5kZXg6IGJ1ZmZlclJlYWRlci5yZWFkVUludDMyKCksCiAgICAgICAgc2NyaXB0OiBidWZmZXJSZWFkZXIucmVhZFZhclNsaWNlKCksCiAgICAgICAgc2VxdWVuY2U6IGJ1ZmZlclJlYWRlci5yZWFkVUludDMyKCksCiAgICAgICAgd2l0bmVzczogRU1QVFlfV0lUTkVTUwogICAgICB9KTsKICAgIH0KICAgIGNvbnN0IHZvdXRMZW4gPSBidWZmZXJSZWFkZXIucmVhZFZhckludCgpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2b3V0TGVuOyArK2kpIHsKICAgICAgdHgub3V0cy5wdXNoKHsKICAgICAgICB2YWx1ZTogYnVmZmVyUmVhZGVyLnJlYWRVSW50NjQoKSwKICAgICAgICBzY3JpcHQ6IGJ1ZmZlclJlYWRlci5yZWFkVmFyU2xpY2UoKQogICAgICB9KTsKICAgIH0KICAgIGlmIChoYXNXaXRuZXNzZXMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2aW5MZW47ICsraSkgewogICAgICAgIHR4Lmluc1tpXS53aXRuZXNzID0gYnVmZmVyUmVhZGVyLnJlYWRWZWN0b3IoKTsKICAgICAgfQogICAgICBpZiAoIXR4Lmhhc1dpdG5lc3NlcygpKSB0aHJvdyBuZXcgRXJyb3IoJ1RyYW5zYWN0aW9uIGhhcyBzdXBlcmZsdW91cyB3aXRuZXNzIGRhdGEnKTsKICAgIH0KICAgIHR4LmxvY2t0aW1lID0gYnVmZmVyUmVhZGVyLnJlYWRVSW50MzIoKTsKICAgIGlmIChfTk9fU1RSSUNUKSByZXR1cm4gdHg7CiAgICBpZiAoYnVmZmVyUmVhZGVyLm9mZnNldCAhPT0gYnVmZmVyLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdUcmFuc2FjdGlvbiBoYXMgdW5leHBlY3RlZCBkYXRhJyk7CiAgICByZXR1cm4gdHg7CiAgfQogIHN0YXRpYyBmcm9tSGV4KGhleCkgewogICAgcmV0dXJuIFRyYW5zYWN0aW9uLmZyb21CdWZmZXIoQnVmZmVyLmZyb20oaGV4LCAnaGV4JyksIGZhbHNlKTsKICB9CiAgc3RhdGljIGlzQ29pbmJhc2VIYXNoKGJ1ZmZlcikgewogICAgdHlwZWZvcmNlKHR5cGVzLkhhc2gyNTZiaXQsIGJ1ZmZlcik7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDMyOyArK2kpIHsKICAgICAgaWYgKGJ1ZmZlcltpXSAhPT0gMCkgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIGlzQ29pbmJhc2UoKSB7CiAgICByZXR1cm4gdGhpcy5pbnMubGVuZ3RoID09PSAxICYmIFRyYW5zYWN0aW9uLmlzQ29pbmJhc2VIYXNoKHRoaXMuaW5zWzBdLmhhc2gpOwogIH0KICBhZGRJbnB1dChoYXNoLCBpbmRleCwgc2VxdWVuY2UsIHNjcmlwdFNpZykgewogICAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLkhhc2gyNTZiaXQsIHR5cGVzLlVJbnQzMiwgdHlwZXMubWF5YmUodHlwZXMuVUludDMyKSwgdHlwZXMubWF5YmUodHlwZXMuQnVmZmVyKSksIGFyZ3VtZW50cyk7CiAgICBpZiAodHlwZXMuTnVsbChzZXF1ZW5jZSkpIHsKICAgICAgc2VxdWVuY2UgPSBUcmFuc2FjdGlvbi5ERUZBVUxUX1NFUVVFTkNFOwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5zLnB1c2goewogICAgICBoYXNoLAogICAgICBpbmRleCwKICAgICAgc2NyaXB0OiBzY3JpcHRTaWcgfHwgRU1QVFlfQlVGRkVSLAogICAgICBzZXF1ZW5jZTogc2VxdWVuY2UsCiAgICAgIHdpdG5lc3M6IEVNUFRZX1dJVE5FU1MKICAgIH0pIC0gMTsKICB9CiAgYWRkT3V0cHV0KHNjcmlwdFB1YktleSwgdmFsdWUpIHsKICAgIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5CdWZmZXIsIHR5cGVzLlNhdG9zaGkpLCBhcmd1bWVudHMpOwogICAgcmV0dXJuIHRoaXMub3V0cy5wdXNoKHsKICAgICAgc2NyaXB0OiBzY3JpcHRQdWJLZXksCiAgICAgIHZhbHVlCiAgICB9KSAtIDE7CiAgfQogIGhhc1dpdG5lc3NlcygpIHsKICAgIHJldHVybiB0aGlzLmlucy5zb21lKHggPT4gewogICAgICByZXR1cm4geC53aXRuZXNzLmxlbmd0aCAhPT0gMDsKICAgIH0pOwogIH0KICB3ZWlnaHQoKSB7CiAgICBjb25zdCBiYXNlID0gdGhpcy5ieXRlTGVuZ3RoKGZhbHNlKTsKICAgIGNvbnN0IHRvdGFsID0gdGhpcy5ieXRlTGVuZ3RoKHRydWUpOwogICAgcmV0dXJuIGJhc2UgKiAzICsgdG90YWw7CiAgfQogIHZpcnR1YWxTaXplKCkgewogICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLndlaWdodCgpIC8gNCk7CiAgfQogIGRvZ2VCeXRlTGVuZ3RoKCkgewogICAgbGV0IHJlc3VsdCA9IDQgKyA5ICsgOSArIDQgKyB0aGlzLmlucy5yZWR1Y2UoKHN1bSwgaW5wdXQpID0+IHsKICAgICAgbGV0IGwgPSAzMiArIDQgKyA0ICsgdmFyU2xpY2VTaXplKGlucHV0LnNjcmlwdCk7CiAgICAgIHJldHVybiBzdW0gKyAzMiArIDQgKyBsOwogICAgfSwgMCkgKyB0aGlzLm91dHMucmVkdWNlKChzdW0sIG91dHB1dCkgPT4gewogICAgICByZXR1cm4gc3VtICsgOSArIG91dHB1dC5zY3JpcHQubGVuZ3RoOwogICAgfSwgMCk7CiAgICByZXR1cm4gTWF0aC5jZWlsKHJlc3VsdCk7CiAgICA7CiAgfQogIGJ5dGVMZW5ndGgoKSB7CiAgICBsZXQgX0FMTE9XX1dJVE5FU1MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgICBjb25zdCBoYXNXaXRuZXNzZXMgPSBfQUxMT1dfV0lUTkVTUyAmJiB0aGlzLmhhc1dpdG5lc3NlcygpOwogICAgcmV0dXJuIChoYXNXaXRuZXNzZXMgPyAxMCA6IDgpICsgYnVmZmVydXRpbHNfMS52YXJ1aW50LmVuY29kaW5nTGVuZ3RoKHRoaXMuaW5zLmxlbmd0aCkgKyBidWZmZXJ1dGlsc18xLnZhcnVpbnQuZW5jb2RpbmdMZW5ndGgodGhpcy5vdXRzLmxlbmd0aCkgKyB0aGlzLmlucy5yZWR1Y2UoKHN1bSwgaW5wdXQpID0+IHsKICAgICAgcmV0dXJuIHN1bSArIDQwICsgdmFyU2xpY2VTaXplKGlucHV0LnNjcmlwdCk7CiAgICB9LCAwKSArIHRoaXMub3V0cy5yZWR1Y2UoKHN1bSwgb3V0cHV0KSA9PiB7CiAgICAgIHJldHVybiBzdW0gKyA4ICsgdmFyU2xpY2VTaXplKG91dHB1dC5zY3JpcHQpOwogICAgfSwgMCkgKyAoaGFzV2l0bmVzc2VzID8gdGhpcy5pbnMucmVkdWNlKChzdW0sIGlucHV0KSA9PiB7CiAgICAgIHJldHVybiBzdW0gKyB2ZWN0b3JTaXplKGlucHV0LndpdG5lc3MpOwogICAgfSwgMCkgOiAwKTsKICB9CiAgY2xvbmUoKSB7CiAgICBjb25zdCBuZXdUeCA9IG5ldyBUcmFuc2FjdGlvbigpOwogICAgbmV3VHgudmVyc2lvbiA9IHRoaXMudmVyc2lvbjsKICAgIG5ld1R4LmxvY2t0aW1lID0gdGhpcy5sb2NrdGltZTsKICAgIG5ld1R4LmlucyA9IHRoaXMuaW5zLm1hcCh0eEluID0+IHsKICAgICAgcmV0dXJuIHsKICAgICAgICBoYXNoOiB0eEluLmhhc2gsCiAgICAgICAgaW5kZXg6IHR4SW4uaW5kZXgsCiAgICAgICAgc2NyaXB0OiB0eEluLnNjcmlwdCwKICAgICAgICBzZXF1ZW5jZTogdHhJbi5zZXF1ZW5jZSwKICAgICAgICB3aXRuZXNzOiB0eEluLndpdG5lc3MKICAgICAgfTsKICAgIH0pOwogICAgbmV3VHgub3V0cyA9IHRoaXMub3V0cy5tYXAodHhPdXQgPT4gewogICAgICByZXR1cm4gewogICAgICAgIHNjcmlwdDogdHhPdXQuc2NyaXB0LAogICAgICAgIHZhbHVlOiB0eE91dC52YWx1ZQogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gbmV3VHg7CiAgfQogIGhhc2hGb3JTaWduYXR1cmUoaW5JbmRleCwgcHJldk91dFNjcmlwdCwgaGFzaFR5cGUpIHsKICAgIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5VSW50MzIsIHR5cGVzLkJ1ZmZlciwgdHlwZXMuTnVtYmVyKSwgYXJndW1lbnRzKTsKICAgIGlmIChpbkluZGV4ID49IHRoaXMuaW5zLmxlbmd0aCkgcmV0dXJuIE9ORTsKICAgIGNvbnN0IG91clNjcmlwdCA9IGJzY3JpcHQuY29tcGlsZShic2NyaXB0LmRlY29tcGlsZShwcmV2T3V0U2NyaXB0KS5maWx0ZXIoeCA9PiB7CiAgICAgIHJldHVybiB4ICE9PSBzY3JpcHRfMS5PUFMuT1BfQ09ERVNFUEFSQVRPUjsKICAgIH0pKTsKICAgIGNvbnN0IHR4VG1wID0gdGhpcy5jbG9uZSgpOwogICAgaWYgKChoYXNoVHlwZSAmIDB4MWYpID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHsKICAgICAgdHhUbXAub3V0cyA9IFtdOwogICAgICB0eFRtcC5pbnMuZm9yRWFjaCgoaW5wdXQsIGkpID0+IHsKICAgICAgICBpZiAoaSA9PT0gaW5JbmRleCkgcmV0dXJuOwogICAgICAgIGlucHV0LnNlcXVlbmNlID0gMDsKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKChoYXNoVHlwZSAmIDB4MWYpID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRSkgewogICAgICBpZiAoaW5JbmRleCA+PSB0aGlzLm91dHMubGVuZ3RoKSByZXR1cm4gT05FOwogICAgICB0eFRtcC5vdXRzLmxlbmd0aCA9IGluSW5kZXggKyAxOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluSW5kZXg7IGkrKykgewogICAgICAgIHR4VG1wLm91dHNbaV0gPSBCTEFOS19PVVRQVVQ7CiAgICAgIH0KICAgICAgdHhUbXAuaW5zLmZvckVhY2goKGlucHV0LCB5KSA9PiB7CiAgICAgICAgaWYgKHkgPT09IGluSW5kZXgpIHJldHVybjsKICAgICAgICBpbnB1dC5zZXF1ZW5jZSA9IDA7CiAgICAgIH0pOwogICAgfQogICAgaWYgKGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9BTllPTkVDQU5QQVkpIHsKICAgICAgdHhUbXAuaW5zID0gW3R4VG1wLmluc1tpbkluZGV4XV07CiAgICAgIHR4VG1wLmluc1swXS5zY3JpcHQgPSBvdXJTY3JpcHQ7CiAgICB9IGVsc2UgewogICAgICB0eFRtcC5pbnMuZm9yRWFjaChpbnB1dCA9PiB7CiAgICAgICAgaW5wdXQuc2NyaXB0ID0gRU1QVFlfQlVGRkVSOwogICAgICB9KTsKICAgICAgdHhUbXAuaW5zW2luSW5kZXhdLnNjcmlwdCA9IG91clNjcmlwdDsKICAgIH0KICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSh0eFRtcC5ieXRlTGVuZ3RoKGZhbHNlKSArIDQpOwogICAgYnVmZmVyLndyaXRlSW50MzJMRShoYXNoVHlwZSwgYnVmZmVyLmxlbmd0aCAtIDQpOwogICAgdHhUbXAuX190b0J1ZmZlcihidWZmZXIsIDAsIGZhbHNlKTsKICAgIHJldHVybiBiY3J5cHRvLmhhc2gyNTYoYnVmZmVyKTsKICB9CiAgaGFzaEZvckNhc2hTaWduYXR1cmUoaW5JbmRleCwgcHJldk91dFNjcmlwdCwgaW5BbW91bnQsIGhhc2hUeXBlKSB7CiAgICBpZiAoaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0JJVENPSU5DQVNIQklQMTQzKSB7CiAgICAgIGlmICh0eXBlcy5OdWxsKGluQW1vdW50KSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignQml0Y29pbiBDYXNoIHNpZ2hhc2ggcmVxdWlyZXMgdmFsdWUgb2YgaW5wdXQgdG8gYmUgc2lnbmVkLicpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmhhc2hGb3JXaXRuZXNzVjAoaW5JbmRleCwgcHJldk91dFNjcmlwdCwgaW5BbW91bnQsIGhhc2hUeXBlKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0aGlzLmhhc2hGb3JTaWduYXR1cmUoaW5JbmRleCwgcHJldk91dFNjcmlwdCwgaGFzaFR5cGUpOwogICAgfQogIH0KICBoYXNoRm9yV2l0bmVzc1YxKGluSW5kZXgsIHByZXZPdXRTY3JpcHRzLCB2YWx1ZXMsIGhhc2hUeXBlLCBsZWFmSGFzaCwgYW5uZXgpIHsKICAgIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5VSW50MzIsIHR5cGVmb3JjZS5hcnJheU9mKHR5cGVzLkJ1ZmZlciksIHR5cGVmb3JjZS5hcnJheU9mKHR5cGVzLlNhdG9zaGkpLCB0eXBlcy5VSW50MzIpLCBhcmd1bWVudHMpOwogICAgaWYgKHZhbHVlcy5sZW5ndGggIT09IHRoaXMuaW5zLmxlbmd0aCB8fCBwcmV2T3V0U2NyaXB0cy5sZW5ndGggIT09IHRoaXMuaW5zLmxlbmd0aCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3VwcGx5IHByZXZvdXQgc2NyaXB0IGFuZCB2YWx1ZSBmb3IgYWxsIGlucHV0cycpOwogICAgfQogICAgY29uc3Qgb3V0cHV0VHlwZSA9IGhhc2hUeXBlID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX0RFRkFVTFQgPyBUcmFuc2FjdGlvbi5TSUdIQVNIX0FMTCA6IGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9PVVRQVVRfTUFTSzsKICAgIGNvbnN0IGlucHV0VHlwZSA9IGhhc2hUeXBlICYgVHJhbnNhY3Rpb24uU0lHSEFTSF9JTlBVVF9NQVNLOwogICAgY29uc3QgaXNBbnlvbmVDYW5QYXkgPSBpbnB1dFR5cGUgPT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZOwogICAgY29uc3QgaXNOb25lID0gb3V0cHV0VHlwZSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FOwogICAgY29uc3QgaXNTaW5nbGUgPSBvdXRwdXRUeXBlID09PSBUcmFuc2FjdGlvbi5TSUdIQVNIX1NJTkdMRTsKICAgIGxldCBoYXNoUHJldm91dHMgPSBFTVBUWV9CVUZGRVI7CiAgICBsZXQgaGFzaEFtb3VudHMgPSBFTVBUWV9CVUZGRVI7CiAgICBsZXQgaGFzaFNjcmlwdFB1YktleXMgPSBFTVBUWV9CVUZGRVI7CiAgICBsZXQgaGFzaFNlcXVlbmNlcyA9IEVNUFRZX0JVRkZFUjsKICAgIGxldCBoYXNoT3V0cHV0cyA9IEVNUFRZX0JVRkZFUjsKICAgIGlmICghaXNBbnlvbmVDYW5QYXkpIHsKICAgICAgbGV0IGJ1ZmZlcldyaXRlciA9IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyLndpdGhDYXBhY2l0eSgzNiAqIHRoaXMuaW5zLmxlbmd0aCk7CiAgICAgIHRoaXMuaW5zLmZvckVhY2godHhJbiA9PiB7CiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UodHhJbi5oYXNoKTsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIodHhJbi5pbmRleCk7CiAgICAgIH0pOwogICAgICBoYXNoUHJldm91dHMgPSBiY3J5cHRvLnNoYTI1NihidWZmZXJXcml0ZXIuZW5kKCkpOwogICAgICBidWZmZXJXcml0ZXIgPSBidWZmZXJ1dGlsc18xLkJ1ZmZlcldyaXRlci53aXRoQ2FwYWNpdHkoOCAqIHRoaXMuaW5zLmxlbmd0aCk7CiAgICAgIHZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IGJ1ZmZlcldyaXRlci53cml0ZVVJbnQ2NCh2YWx1ZSkpOwogICAgICBoYXNoQW1vdW50cyA9IGJjcnlwdG8uc2hhMjU2KGJ1ZmZlcldyaXRlci5lbmQoKSk7CiAgICAgIGJ1ZmZlcldyaXRlciA9IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyLndpdGhDYXBhY2l0eShwcmV2T3V0U2NyaXB0cy5tYXAodmFyU2xpY2VTaXplKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSk7CiAgICAgIHByZXZPdXRTY3JpcHRzLmZvckVhY2gocHJldk91dFNjcmlwdCA9PiBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShwcmV2T3V0U2NyaXB0KSk7CiAgICAgIGhhc2hTY3JpcHRQdWJLZXlzID0gYmNyeXB0by5zaGEyNTYoYnVmZmVyV3JpdGVyLmVuZCgpKTsKICAgICAgYnVmZmVyV3JpdGVyID0gYnVmZmVydXRpbHNfMS5CdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KDQgKiB0aGlzLmlucy5sZW5ndGgpOwogICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uc2VxdWVuY2UpKTsKICAgICAgaGFzaFNlcXVlbmNlcyA9IGJjcnlwdG8uc2hhMjU2KGJ1ZmZlcldyaXRlci5lbmQoKSk7CiAgICB9CiAgICBpZiAoIShpc05vbmUgfHwgaXNTaW5nbGUpKSB7CiAgICAgIGNvbnN0IHR4T3V0c1NpemUgPSB0aGlzLm91dHMubWFwKG91dHB1dCA9PiA4ICsgdmFyU2xpY2VTaXplKG91dHB1dC5zY3JpcHQpKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKTsKICAgICAgY29uc3QgYnVmZmVyV3JpdGVyID0gYnVmZmVydXRpbHNfMS5CdWZmZXJXcml0ZXIud2l0aENhcGFjaXR5KHR4T3V0c1NpemUpOwogICAgICB0aGlzLm91dHMuZm9yRWFjaChvdXQgPT4gewogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQ2NChvdXQudmFsdWUpOwogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKG91dC5zY3JpcHQpOwogICAgICB9KTsKICAgICAgaGFzaE91dHB1dHMgPSBiY3J5cHRvLnNoYTI1NihidWZmZXJXcml0ZXIuZW5kKCkpOwogICAgfSBlbHNlIGlmIChpc1NpbmdsZSAmJiBpbkluZGV4IDwgdGhpcy5vdXRzLmxlbmd0aCkgewogICAgICBjb25zdCBvdXRwdXQgPSB0aGlzLm91dHNbaW5JbmRleF07CiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyLndpdGhDYXBhY2l0eSg4ICsgdmFyU2xpY2VTaXplKG91dHB1dC5zY3JpcHQpKTsKICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDY0KG91dHB1dC52YWx1ZSk7CiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhclNsaWNlKG91dHB1dC5zY3JpcHQpOwogICAgICBoYXNoT3V0cHV0cyA9IGJjcnlwdG8uc2hhMjU2KGJ1ZmZlcldyaXRlci5lbmQoKSk7CiAgICB9CiAgICBjb25zdCBzcGVuZFR5cGUgPSAobGVhZkhhc2ggPyAyIDogMCkgKyAoYW5uZXggPyAxIDogMCk7CiAgICBjb25zdCBzaWdNc2dTaXplID0gMTc0IC0gKGlzQW55b25lQ2FuUGF5ID8gNDkgOiAwKSAtIChpc05vbmUgPyAzMiA6IDApICsgKGFubmV4ID8gMzIgOiAwKSArIChsZWFmSGFzaCA/IDM3IDogMCk7CiAgICBjb25zdCBzaWdNc2dXcml0ZXIgPSBidWZmZXJ1dGlsc18xLkJ1ZmZlcldyaXRlci53aXRoQ2FwYWNpdHkoc2lnTXNnU2l6ZSk7CiAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50OChoYXNoVHlwZSk7CiAgICBzaWdNc2dXcml0ZXIud3JpdGVJbnQzMih0aGlzLnZlcnNpb24pOwogICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpOwogICAgc2lnTXNnV3JpdGVyLndyaXRlU2xpY2UoaGFzaFByZXZvdXRzKTsKICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGhhc2hBbW91bnRzKTsKICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGhhc2hTY3JpcHRQdWJLZXlzKTsKICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGhhc2hTZXF1ZW5jZXMpOwogICAgaWYgKCEoaXNOb25lIHx8IGlzU2luZ2xlKSkgewogICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShoYXNoT3V0cHV0cyk7CiAgICB9CiAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50OChzcGVuZFR5cGUpOwogICAgaWYgKGlzQW55b25lQ2FuUGF5KSB7CiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnNbaW5JbmRleF07CiAgICAgIHNpZ01zZ1dyaXRlci53cml0ZVNsaWNlKGlucHV0Lmhhc2gpOwogICAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuaW5kZXgpOwogICAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50NjQodmFsdWVzW2luSW5kZXhdKTsKICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVmFyU2xpY2UocHJldk91dFNjcmlwdHNbaW5JbmRleF0pOwogICAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuc2VxdWVuY2UpOwogICAgfSBlbHNlIHsKICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKGluSW5kZXgpOwogICAgfQogICAgaWYgKGFubmV4KSB7CiAgICAgIGNvbnN0IGJ1ZmZlcldyaXRlciA9IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyLndpdGhDYXBhY2l0eSh2YXJTbGljZVNpemUoYW5uZXgpKTsKICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2UoYW5uZXgpOwogICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShiY3J5cHRvLnNoYTI1NihidWZmZXJXcml0ZXIuZW5kKCkpKTsKICAgIH0KICAgIGlmIChpc1NpbmdsZSkgewogICAgICBzaWdNc2dXcml0ZXIud3JpdGVTbGljZShoYXNoT3V0cHV0cyk7CiAgICB9CiAgICBpZiAobGVhZkhhc2gpIHsKICAgICAgc2lnTXNnV3JpdGVyLndyaXRlU2xpY2UobGVhZkhhc2gpOwogICAgICBzaWdNc2dXcml0ZXIud3JpdGVVSW50OCgwKTsKICAgICAgc2lnTXNnV3JpdGVyLndyaXRlVUludDMyKDB4ZmZmZmZmZmYpOwogICAgfQogICAgcmV0dXJuIGJjcnlwdG8udGFnZ2VkSGFzaCgnVGFwU2lnaGFzaCcsIEJ1ZmZlci5jb25jYXQoW0J1ZmZlci5vZigweDAwKSwgc2lnTXNnV3JpdGVyLmVuZCgpXSkpOwogIH0KICBoYXNoRm9yV2l0bmVzc1YwKGluSW5kZXgsIHByZXZPdXRTY3JpcHQsIHZhbHVlLCBoYXNoVHlwZSkgewogICAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLlVJbnQzMiwgdHlwZXMuQnVmZmVyLCB0eXBlcy5TYXRvc2hpLCB0eXBlcy5VSW50MzIpLCBhcmd1bWVudHMpOwogICAgbGV0IHRidWZmZXIgPSBCdWZmZXIuZnJvbShbXSk7CiAgICBsZXQgYnVmZmVyV3JpdGVyOwogICAgbGV0IGhhc2hPdXRwdXRzID0gWkVSTzsKICAgIGxldCBoYXNoUHJldm91dHMgPSBaRVJPOwogICAgbGV0IGhhc2hTZXF1ZW5jZSA9IFpFUk87CiAgICBpZiAoIShoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSkgewogICAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDM2ICogdGhpcy5pbnMubGVuZ3RoKTsKICAgICAgYnVmZmVyV3JpdGVyID0gbmV3IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApOwogICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gewogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKHR4SW4uaGFzaCk7CiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uaW5kZXgpOwogICAgICB9KTsKICAgICAgaGFzaFByZXZvdXRzID0gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpOwogICAgfQogICAgaWYgKCEoaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSkgJiYgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFICYmIChoYXNoVHlwZSAmIDB4MWYpICE9PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHsKICAgICAgdGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSg0ICogdGhpcy5pbnMubGVuZ3RoKTsKICAgICAgYnVmZmVyV3JpdGVyID0gbmV3IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApOwogICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gewogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0eEluLnNlcXVlbmNlKTsKICAgICAgfSk7CiAgICAgIGhhc2hTZXF1ZW5jZSA9IGJjcnlwdG8uaGFzaDI1Nih0YnVmZmVyKTsKICAgIH0KICAgIGlmICgoaGFzaFR5cGUgJiAweDFmKSAhPT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgJiYgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSkgewogICAgICBjb25zdCB0eE91dHNTaXplID0gdGhpcy5vdXRzLnJlZHVjZSgoc3VtLCBvdXRwdXQpID0+IHsKICAgICAgICByZXR1cm4gc3VtICsgOCArIHZhclNsaWNlU2l6ZShvdXRwdXQuc2NyaXB0KTsKICAgICAgfSwgMCk7CiAgICAgIHRidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUodHhPdXRzU2l6ZSk7CiAgICAgIGJ1ZmZlcldyaXRlciA9IG5ldyBidWZmZXJ1dGlsc18xLkJ1ZmZlcldyaXRlcih0YnVmZmVyLCAwKTsKICAgICAgdGhpcy5vdXRzLmZvckVhY2gob3V0ID0+IHsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50NjQob3V0LnZhbHVlKTsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShvdXQuc2NyaXB0KTsKICAgICAgfSk7CiAgICAgIGhhc2hPdXRwdXRzID0gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpOwogICAgfSBlbHNlIGlmICgoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgJiYgaW5JbmRleCA8IHRoaXMub3V0cy5sZW5ndGgpIHsKICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5vdXRzW2luSW5kZXhdOwogICAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDggKyB2YXJTbGljZVNpemUob3V0cHV0LnNjcmlwdCkpOwogICAgICBidWZmZXJXcml0ZXIgPSBuZXcgYnVmZmVydXRpbHNfMS5CdWZmZXJXcml0ZXIodGJ1ZmZlciwgMCk7CiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQ2NChvdXRwdXQudmFsdWUpOwogICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShvdXRwdXQuc2NyaXB0KTsKICAgICAgaGFzaE91dHB1dHMgPSBiY3J5cHRvLmhhc2gyNTYodGJ1ZmZlcik7CiAgICB9CiAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDE1NiArIHZhclNsaWNlU2l6ZShwcmV2T3V0U2NyaXB0KSk7CiAgICBidWZmZXJXcml0ZXIgPSBuZXcgYnVmZmVydXRpbHNfMS5CdWZmZXJXcml0ZXIodGJ1ZmZlciwgMCk7CiAgICBjb25zdCBpbnB1dCA9IHRoaXMuaW5zW2luSW5kZXhdOwogICAgYnVmZmVyV3JpdGVyLndyaXRlSW50MzIodGhpcy52ZXJzaW9uKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGhhc2hQcmV2b3V0cyk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZShoYXNoU2VxdWVuY2UpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoaW5wdXQuaGFzaCk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuaW5kZXgpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2UocHJldk91dFNjcmlwdCk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50NjQodmFsdWUpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKGlucHV0LnNlcXVlbmNlKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGhhc2hPdXRwdXRzKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0aGlzLmxvY2t0aW1lKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMihoYXNoVHlwZSk7CiAgICByZXR1cm4gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpOwogIH0KICBnZXRIYXNoKGZvcldpdG5lc3MpIHsKICAgIGlmIChmb3JXaXRuZXNzICYmIHRoaXMuaXNDb2luYmFzZSgpKSByZXR1cm4gQnVmZmVyLmFsbG9jKDMyLCAwKTsKICAgIHJldHVybiBiY3J5cHRvLmhhc2gyNTYodGhpcy5fX3RvQnVmZmVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmb3JXaXRuZXNzKSk7CiAgfQogIGdldElkKCkgewogICAgcmV0dXJuICgwLCBidWZmZXJ1dGlsc18xLnJldmVyc2VCdWZmZXIpKHRoaXMuZ2V0SGFzaChmYWxzZSkpLnRvU3RyaW5nKCdoZXgnKTsKICB9CiAgdG9CdWZmZXIoYnVmZmVyLCBpbml0aWFsT2Zmc2V0KSB7CiAgICByZXR1cm4gdGhpcy5fX3RvQnVmZmVyKGJ1ZmZlciwgaW5pdGlhbE9mZnNldCwgdHJ1ZSk7CiAgfQogIHRvSGV4KCkgewogICAgcmV0dXJuIHRoaXMudG9CdWZmZXIodW5kZWZpbmVkLCB1bmRlZmluZWQpLnRvU3RyaW5nKCdoZXgnKTsKICB9CiAgc2V0SW5wdXRTY3JpcHQoaW5kZXgsIHNjcmlwdFNpZykgewogICAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLk51bWJlciwgdHlwZXMuQnVmZmVyKSwgYXJndW1lbnRzKTsKICAgIHRoaXMuaW5zW2luZGV4XS5zY3JpcHQgPSBzY3JpcHRTaWc7CiAgfQogIHNldFdpdG5lc3MoaW5kZXgsIHdpdG5lc3MpIHsKICAgIHR5cGVmb3JjZSh0eXBlcy50dXBsZSh0eXBlcy5OdW1iZXIsIFt0eXBlcy5CdWZmZXJdKSwgYXJndW1lbnRzKTsKICAgIHRoaXMuaW5zW2luZGV4XS53aXRuZXNzID0gd2l0bmVzczsKICB9CiAgX190b0J1ZmZlcihidWZmZXIsIGluaXRpYWxPZmZzZXQpIHsKICAgIGxldCBfQUxMT1dfV0lUTkVTUyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgICBpZiAoIWJ1ZmZlcikgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKHRoaXMuYnl0ZUxlbmd0aChfQUxMT1dfV0lUTkVTUykpOwogICAgY29uc3QgYnVmZmVyV3JpdGVyID0gbmV3IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyKGJ1ZmZlciwgaW5pdGlhbE9mZnNldCB8fCAwKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZUludDMyKHRoaXMudmVyc2lvbik7CiAgICBjb25zdCBoYXNXaXRuZXNzZXMgPSBfQUxMT1dfV0lUTkVTUyAmJiB0aGlzLmhhc1dpdG5lc3NlcygpOwogICAgaWYgKGhhc1dpdG5lc3NlcykgewogICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50OChUcmFuc2FjdGlvbi5BRFZBTkNFRF9UUkFOU0FDVElPTl9NQVJLRVIpOwogICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50OChUcmFuc2FjdGlvbi5BRFZBTkNFRF9UUkFOU0FDVElPTl9GTEFHKTsKICAgIH0KICAgIGJ1ZmZlcldyaXRlci53cml0ZVZhckludCh0aGlzLmlucy5sZW5ndGgpOwogICAgdGhpcy5pbnMuZm9yRWFjaCh0eEluID0+IHsKICAgICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UodHhJbi5oYXNoKTsKICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uaW5kZXgpOwogICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZSh0eEluLnNjcmlwdCk7CiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0eEluLnNlcXVlbmNlKTsKICAgIH0pOwogICAgYnVmZmVyV3JpdGVyLndyaXRlVmFySW50KHRoaXMub3V0cy5sZW5ndGgpOwogICAgdGhpcy5vdXRzLmZvckVhY2godHhPdXQgPT4gewogICAgICBpZiAoaXNPdXRwdXQodHhPdXQpKSB7CiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDY0KHR4T3V0LnZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZSh0eE91dC52YWx1ZUJ1ZmZlcik7CiAgICAgIH0KICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVmFyU2xpY2UodHhPdXQuc2NyaXB0KTsKICAgIH0pOwogICAgaWYgKGhhc1dpdG5lc3NlcykgewogICAgICB0aGlzLmlucy5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVWZWN0b3IoaW5wdXQud2l0bmVzcyk7CiAgICAgIH0pOwogICAgfQogICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpOwogICAgaWYgKGluaXRpYWxPZmZzZXQgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGJ1ZmZlci5zbGljZShpbml0aWFsT2Zmc2V0LCBidWZmZXJXcml0ZXIub2Zmc2V0KTsKICAgIHJldHVybiBidWZmZXI7CiAgfQogIGhhc2hGb3JXaXRuZXNzKGluSW5kZXgsIHByZXZPdXRTY3JpcHQsIHZhbHVlLCBoYXNoVHlwZSkgewogICAgdHlwZWZvcmNlKHR5cGVzLnR1cGxlKHR5cGVzLlVJbnQzMiwgdHlwZXMuQnVmZmVyLCB0eXBlcy5TYXRvc2hpLCB0eXBlcy5VSW50MzIpLCBhcmd1bWVudHMpOwogICAgbGV0IHRidWZmZXIgPSBCdWZmZXIuZnJvbShbXSk7CiAgICBsZXQgYnVmZmVyV3JpdGVyOwogICAgbGV0IGhhc2hPdXRwdXRzID0gWkVSTzsKICAgIGxldCBoYXNoUHJldm91dHMgPSBaRVJPOwogICAgbGV0IGhhc2hTZXF1ZW5jZSA9IFpFUk87CiAgICBpZiAoIShoYXNoVHlwZSAmIFRyYW5zYWN0aW9uLlNJR0hBU0hfQU5ZT05FQ0FOUEFZKSkgewogICAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDM2ICogdGhpcy5pbnMubGVuZ3RoKTsKICAgICAgYnVmZmVyV3JpdGVyID0gbmV3IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApOwogICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gewogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKHR4SW4uaGFzaCk7CiAgICAgICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHR4SW4uaW5kZXgpOwogICAgICB9KTsKICAgICAgaGFzaFByZXZvdXRzID0gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpOwogICAgfQogICAgaWYgKCEoaGFzaFR5cGUgJiBUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSkgJiYgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfU0lOR0xFICYmIChoYXNoVHlwZSAmIDB4MWYpICE9PSBUcmFuc2FjdGlvbi5TSUdIQVNIX05PTkUpIHsKICAgICAgdGJ1ZmZlciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSg0ICogdGhpcy5pbnMubGVuZ3RoKTsKICAgICAgYnVmZmVyV3JpdGVyID0gbmV3IGJ1ZmZlcnV0aWxzXzEuQnVmZmVyV3JpdGVyKHRidWZmZXIsIDApOwogICAgICB0aGlzLmlucy5mb3JFYWNoKHR4SW4gPT4gewogICAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMih0eEluLnNlcXVlbmNlKTsKICAgICAgfSk7CiAgICAgIGhhc2hTZXF1ZW5jZSA9IGJjcnlwdG8uaGFzaDI1Nih0YnVmZmVyKTsKICAgIH0KICAgIGlmICgoaGFzaFR5cGUgJiAweDFmKSAhPT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgJiYgKGhhc2hUeXBlICYgMHgxZikgIT09IFRyYW5zYWN0aW9uLlNJR0hBU0hfTk9ORSkgewogICAgICBjb25zdCB0eE91dHNTaXplID0gdGhpcy5vdXRzLnJlZHVjZSgoc3VtLCBvdXRwdXQpID0+IHsKICAgICAgICByZXR1cm4gc3VtICsgOCArIHZhclNsaWNlU2l6ZShvdXRwdXQuc2NyaXB0KTsKICAgICAgfSwgMCk7CiAgICAgIHRidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUodHhPdXRzU2l6ZSk7CiAgICAgIGJ1ZmZlcldyaXRlciA9IG5ldyBidWZmZXJ1dGlsc18xLkJ1ZmZlcldyaXRlcih0YnVmZmVyLCAwKTsKICAgICAgdGhpcy5vdXRzLmZvckVhY2gob3V0ID0+IHsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50NjQob3V0LnZhbHVlKTsKICAgICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShvdXQuc2NyaXB0KTsKICAgICAgfSk7CiAgICAgIGhhc2hPdXRwdXRzID0gYmNyeXB0by5oYXNoMjU2KHRidWZmZXIpOwogICAgfSBlbHNlIGlmICgoaGFzaFR5cGUgJiAweDFmKSA9PT0gVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgJiYgaW5JbmRleCA8IHRoaXMub3V0cy5sZW5ndGgpIHsKICAgICAgY29uc3Qgb3V0cHV0ID0gdGhpcy5vdXRzW2luSW5kZXhdOwogICAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDggKyB2YXJTbGljZVNpemUob3V0cHV0LnNjcmlwdCkpOwogICAgICBidWZmZXJXcml0ZXIgPSBuZXcgYnVmZmVydXRpbHNfMS5CdWZmZXJXcml0ZXIodGJ1ZmZlciwgMCk7CiAgICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQ2NChvdXRwdXQudmFsdWUpOwogICAgICBidWZmZXJXcml0ZXIud3JpdGVWYXJTbGljZShvdXRwdXQuc2NyaXB0KTsKICAgICAgaGFzaE91dHB1dHMgPSBiY3J5cHRvLmhhc2gyNTYodGJ1ZmZlcik7CiAgICB9CiAgICB0YnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKDE1NiArIHByZXZPdXRTY3JpcHQubGVuZ3RoKTsKICAgIGJ1ZmZlcldyaXRlciA9IG5ldyBidWZmZXJ1dGlsc18xLkJ1ZmZlcldyaXRlcih0YnVmZmVyLCAwKTsKICAgIGNvbnN0IGlucHV0ID0gdGhpcy5pbnNbaW5JbmRleF07CiAgICBidWZmZXJXcml0ZXIud3JpdGVJbnQzMih0aGlzLnZlcnNpb24pOwogICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoaGFzaFByZXZvdXRzKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVNsaWNlKGhhc2hTZXF1ZW5jZSk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZShpbnB1dC5oYXNoKTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQzMihpbnB1dC5pbmRleCk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVTbGljZShwcmV2T3V0U2NyaXB0KTsKICAgIGJ1ZmZlcldyaXRlci53cml0ZVVJbnQ2NCh2YWx1ZSk7CiAgICBidWZmZXJXcml0ZXIud3JpdGVVSW50MzIoaW5wdXQuc2VxdWVuY2UpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlU2xpY2UoaGFzaE91dHB1dHMpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKHRoaXMubG9ja3RpbWUpOwogICAgYnVmZmVyV3JpdGVyLndyaXRlVUludDMyKGhhc2hUeXBlKTsKICAgIHJldHVybiBiY3J5cHRvLmhhc2gyNTYodGJ1ZmZlcik7CiAgfQp9CmV4cG9ydHMuVHJhbnNhY3Rpb24gPSBUcmFuc2FjdGlvbjsKVHJhbnNhY3Rpb24uREVGQVVMVF9TRVFVRU5DRSA9IDB4ZmZmZmZmZmY7ClRyYW5zYWN0aW9uLlNJR0hBU0hfREVGQVVMVCA9IDB4MDA7ClRyYW5zYWN0aW9uLlNJR0hBU0hfQUxMID0gMHgwMTsKVHJhbnNhY3Rpb24uU0lHSEFTSF9OT05FID0gMHgwMjsKVHJhbnNhY3Rpb24uU0lHSEFTSF9TSU5HTEUgPSAweDAzOwpUcmFuc2FjdGlvbi5TSUdIQVNIX0FOWU9ORUNBTlBBWSA9IDB4ODA7ClRyYW5zYWN0aW9uLlNJR0hBU0hfT1VUUFVUX01BU0sgPSAweDAzOwpUcmFuc2FjdGlvbi5TSUdIQVNIX0lOUFVUX01BU0sgPSAweDgwOwpUcmFuc2FjdGlvbi5TSUdIQVNIX0JJVENPSU5DQVNIQklQMTQzID0gMHg0MDsKVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fTUFSS0VSID0gMHgwMDsKVHJhbnNhY3Rpb24uQURWQU5DRURfVFJBTlNBQ1RJT05fRkxBRyA9IDB4MDE7"},{"version":3,"names":["bufferutils_1","require","bcrypto","__importStar","bscript","script_1","types","typeforce","varSliceSize","someScript","length","varuint","encodingLength","exports","vectorSize","someVector","reduce","sum","witness","EMPTY_BUFFER","Buffer","allocUnsafe","EMPTY_WITNESS","ZERO","from","ONE","VALUE_UINT64_MAX","BLANK_OUTPUT","script","valueBuffer","isOutput","out","value","undefined","Transaction","constructor","version","locktime","ins","outs","fromBuffer","buffer","_NO_STRICT","bufferReader","BufferReader","tx","readInt32","marker","readUInt8","flag","hasWitnesses","ADVANCED_TRANSACTION_MARKER","ADVANCED_TRANSACTION_FLAG","offset","vinLen","readVarInt","i","push","hash","readSlice","index","readUInt32","readVarSlice","sequence","voutLen","readUInt64","readVector","Error","fromHex","hex","isCoinbaseHash","Hash256bit","isCoinbase","addInput","scriptSig","tuple","UInt32","maybe","arguments","Null","DEFAULT_SEQUENCE","addOutput","scriptPubKey","Satoshi","some","x","weight","base","byteLength","total","virtualSize","Math","ceil","dogeByteLength","result","input","l","output","_ALLOW_WITNESS","clone","newTx","map","txIn","txOut","hashForSignature","inIndex","prevOutScript","hashType","Number","ourScript","compile","decompile","filter","OPS","OP_CODESEPARATOR","txTmp","SIGHASH_NONE","forEach","SIGHASH_SINGLE","y","SIGHASH_ANYONECANPAY","writeInt32LE","__toBuffer","hash256","hashForCashSignature","inAmount","SIGHASH_BITCOINCASHBIP143","hashForWitnessV0","hashForWitnessV1","prevOutScripts","values","leafHash","annex","arrayOf","outputType","SIGHASH_DEFAULT","SIGHASH_ALL","SIGHASH_OUTPUT_MASK","inputType","SIGHASH_INPUT_MASK","isAnyoneCanPay","isNone","isSingle","hashPrevouts","hashAmounts","hashScriptPubKeys","hashSequences","hashOutputs","bufferWriter","BufferWriter","withCapacity","writeSlice","writeUInt32","sha256","end","writeUInt64","a","b","writeVarSlice","txOutsSize","spendType","sigMsgSize","sigMsgWriter","writeUInt8","writeInt32","taggedHash","concat","of","tbuffer","hashSequence","getHash","forWitness","alloc","getId","reverseBuffer","toString","toBuffer","initialOffset","toHex","setInputScript","setWitness","writeVarInt","writeVector","slice","hashForWitness"],"sources":["../../src/bitcoinjs-lib/transaction.ts"],"sourcesContent":[null],"mappings":"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"}]}