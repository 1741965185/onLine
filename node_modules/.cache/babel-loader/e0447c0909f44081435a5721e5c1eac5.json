{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js??ref--16!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/IdeaProjects/onLinePayMerchant/src/components/CardLimitModal/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/components/CardLimitModal/index.vue","mtime":1734495834725},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/babel.config.js","mtime":1730111979206},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0VnBhU2NlbmUgfSBmcm9tICJAL2FwaS9jYXJkIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDYXJkTGltaXRNb2RhbCcsCiAgcHJvcHM6IHsKICAgIHZpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpbml0aWFsRGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2FnZVR5cGVzOiBbewogICAgICAgIHZhbHVlOiAnMScsCiAgICAgICAgbGFiZWxLZXk6ICdwZXJpb2RpY191c2UnLAogICAgICAgIGRlc2NyaXB0aW9uS2V5OiAncHJlaXBkaWNfZGVzYycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnMCcsCiAgICAgICAgbGFiZWxLZXk6ICd0aW1lX2xpbml0ZWRfdXNlJywKICAgICAgICBkZXNjcmlwdGlvbktleTogJ3RpbWVfbGltaXRfZGVzYycKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAnMicsCiAgICAgICAgbGFiZWxLZXk6ICdzaWdubGVfdXNlJywKICAgICAgICBkZXNjcmlwdGlvbktleTogJ3NpZ25sZV91c2VfZGVzYycKICAgICAgfV0sCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgdHlwZTogJzEnLAogICAgICAgIGN5Y2xlVHlwZTogJzAnLAogICAgICAgIGN5Y2xlRGF5OiAnJywKICAgICAgICBzdGFydFRpbWU6ICcnLAogICAgICAgIGVuZFRpbWU6ICcnLAogICAgICAgIG1heE51bTogJycsCiAgICAgICAgbWF4QW1vdW50OiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNlbGVjdGVkVXNhZ2VUeXBlKCkgewogICAgICByZXR1cm4gdGhpcy51c2FnZVR5cGVzLmZpbmQodHlwZSA9PiB0eXBlLnZhbHVlID09PSB0aGlzLmZvcm1EYXRhLnR5cGUpIHx8IHt9OwogICAgfSwKICAgIGRhdGVSYW5nZTogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIFt0aGlzLmZvcm1EYXRhLnN0YXJ0VGltZSwgdGhpcy5mb3JtRGF0YS5lbmRUaW1lXTsKICAgICAgfSwKICAgICAgc2V0KCkgewogICAgICAgIC8vIERvIG5vdGhpbmcsIGFzIHdlIGRvbid0IHdhbnQgdG8gYWxsb3cgY2hhbmdlcwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmlzaWJsZShuZXdWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUpIHsKICAgICAgICB0aGlzLmZldGNoU2NlbmVEYXRhKCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoU2NlbmVEYXRhKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0VnBhU2NlbmUoewogICAgICAgICAgaWQ6IHRoaXMuaW5pdGlhbERhdGEuc2NlbmVJZAogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNjZW5lRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5mb3JtRGF0YSA9IHsKICAgICAgICAgIC4uLnRoaXMuZm9ybURhdGEsCiAgICAgICAgICAuLi5zY2VuZURhdGEKICAgICAgICB9OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNjZW5lIGRhdGE6JywgZXJyb3IpOwogICAgICB9CiAgICB9LAogICAgY2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnZpc2libGUnLCBmYWxzZSk7CiAgICB9LAogICAgY29uZmlybUxpbWl0KCkgewogICAgICB0aGlzLiRlbWl0KCdjb25maXJtJywgdGhpcy5mb3JtRGF0YSk7CiAgICB9LAogICAgc2VsZWN0VXNhZ2VUeXBlKHZhbHVlKSB7CiAgICAgIHRoaXMuZm9ybURhdGEudHlwZSA9IHZhbHVlOwogICAgfSwKICAgIHVwZGF0ZURhdGVSYW5nZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICBbdGhpcy5mb3JtRGF0YS5zdGFydFRpbWUsIHRoaXMuZm9ybURhdGEuZW5kVGltZV0gPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0VGltZSA9ICcnOwogICAgICAgIHRoaXMuZm9ybURhdGEuZW5kVGltZSA9ICcnOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getVpaScene","name","props","visible","type","Boolean","default","initialData","Object","data","usageTypes","value","labelKey","descriptionKey","formData","cycleType","cycleDay","startTime","endTime","maxNum","maxAmount","computed","selectedUsageType","find","dateRange","get","set","watch","newValue","fetchSceneData","methods","response","id","sceneId","sceneData","error","console","closeModal","$emit","confirmLimit","selectUsageType","updateDateRange"],"sources":["src/components/CardLimitModal/index.vue"],"sourcesContent":["<template>\n    <div class=\"modal-overlay\" v-if=\"visible\" @click.self=\"closeModal\">\n        <div class=\"modal-container\">\n            <div class=\"modal-header\">\n                <div></div>\n                <h2 class=\"modal-title\">{{ $t('card.card_limit') }}</h2>\n                <img\n                    class=\"close-icon\"\n                    src=\"@/assets/images/close_icon.png\"\n                    @click=\"closeModal\"\n                    :alt=\"$t('card.close')\"\n                />\n            </div>\n\n            <div class=\"modal-content\">\n                <div class=\"card-limit-form\">\n                    <div class=\"card-limit-form__usage-types\">\n                        <div\n                            v-for=\"type in usageTypes\"\n                            :key=\"type.value\"\n                            :class=\"[\n                'card-limit-form__usage-type',\n                { 'card-limit-form__usage-type--selected': formData.type === type.value }\n              ]\"\n                        >\n                            <h3 class=\"h3_label_1\">{{ $t(`card.${type.labelKey}`) }}</h3>\n                            <div class=\"p_label_1\">{{ $t(`card.${type.descriptionKey}`) }}</div>\n                        </div>\n                    </div>\n\n                    <template v-if=\"formData.type === '1'\">\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.cycle_settings') }}</label>\n                            <el-radio-group v-model=\"formData.cycleType\" class=\"radio-group\" disabled>\n                                <el-radio label=\"1\">{{ $t('card.natural_day') }}</el-radio>\n                                <el-radio label=\"0\">{{ $t('card.natural_month') }}</el-radio>\n                            </el-radio-group>\n                        </div>\n                        <div v-if=\"formData.cycleType === '1'\" class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.natural_day_settings') }}</label>\n                            <el-input v-model=\"formData.cycleDay\" class=\"input-302px\" placeholder=\"1-28\"></el-input>\n                        </div>\n                    </template>\n\n                    <template v-if=\"formData.type === '0'\">\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.expiration_date') }}</label>\n                            <el-date-picker\n                                v-model=\"dateRange\"\n                                type=\"daterange\"\n                                range-separator=\"-\"\n                                class=\"input-302px\"\n                                :start-placeholder=\"$t('card.start')\"\n                                :end-placeholder=\"$t('card.end')\"\n                                value-format=\"yyyy-MM-dd\"\n                                @change=\"updateDateRange\"\n                                disabled\n                            >\n                            </el-date-picker>\n                        </div>\n                    </template>\n\n                    <div>\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.max_tradeaction') }}</label>\n                            <el-input\n                                class=\"input-302px\"\n                                v-model=\"formData.maxNum\"\n                                :placeholder=\"formData.type === '2' ? '1' : ''\"\n                            ></el-input>\n                        </div>\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.card_limits') }}</label>\n                            <el-input class=\"input-302px\" v-model=\"formData.maxAmount\"></el-input>\n                        </div>\n                    </div>\n\n                    <div class=\"button-group\">\n                        <el-button @click=\"closeModal\">{{ $t('card.cancel') }}</el-button>\n                        <el-button type=\"primary\" @click=\"confirmLimit\">{{ $t('card.confirmd') }}</el-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getVpaScene } from \"@/api/card\";\n\nexport default {\n    name: 'CardLimitModal',\n    props: {\n        visible: {\n            type: Boolean,\n            default: false\n        },\n        initialData: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    data() {\n        return {\n            usageTypes: [\n                { value: '1', labelKey: 'periodic_use', descriptionKey: 'preipdic_desc' },\n                { value: '0', labelKey: 'time_linited_use', descriptionKey: 'time_limit_desc' },\n                { value: '2', labelKey: 'signle_use', descriptionKey: 'signle_use_desc' },\n            ],\n            formData: {\n                type: '1',\n                cycleType: '0',\n                cycleDay: '',\n                startTime: '',\n                endTime: '',\n                maxNum: '',\n                maxAmount: ''\n            }\n        };\n    },\n    computed: {\n        selectedUsageType() {\n            return this.usageTypes.find(type => type.value === this.formData.type) || {};\n        },\n        dateRange: {\n            get() {\n                return [this.formData.startTime, this.formData.endTime];\n            },\n            set() {\n                // Do nothing, as we don't want to allow changes\n            }\n        }\n    },\n    watch: {\n        visible(newValue) {\n            if (newValue) {\n                this.fetchSceneData();\n            }\n        }\n    },\n    methods: {\n        async fetchSceneData() {\n            try {\n                const response = await getVpaScene({ id: this.initialData.sceneId });\n                const sceneData = response.data;\n                this.formData = { ...this.formData, ...sceneData };\n            } catch (error) {\n                console.error('Error fetching scene data:', error);\n            }\n        },\n        closeModal() {\n            this.$emit('update:visible', false);\n        },\n        confirmLimit() {\n            this.$emit('confirm', this.formData);\n        },\n        selectUsageType(value) {\n            this.formData.type = value;\n        },\n        updateDateRange(value) {\n            if (value) {\n                [this.formData.startTime, this.formData.endTime] = value;\n            } else {\n                this.formData.startTime = '';\n                this.formData.endTime = '';\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 2000;\n}\n\n.modal-container {\n    background-color: #fff;\n    border-radius: 8px;\n    width: 684px;\n    max-width: 684px;\n    padding: 20px 32px 32px 32px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 32px;\n}\n\n.modal-title {\n    font-weight: 500;\n    font-size: 24px;\n    color: #211F32;\n    line-height: 30px;\n    text-align: right;\n    font-style: normal;\n}\n\n.close-icon {\n    cursor: pointer;\n    width: 16px;\n    height: 15px;\n}\n\n.card-limit-form {\n    font-family: Arial, sans-serif;\n}\n\n.card-limit-form__usage-types {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 24px;\n    width: 100%;\n}\n\n.card-limit-form__usage-type {\n    flex: 1;\n    padding: 16px 20px;\n    border: 1px solid rgba(219, 223, 234, 1);\n    border-radius: 12px;\n    text-align: center;\n    cursor: pointer;\n    margin-right: 16px;\n}\n\n.card-limit-form__usage-type:last-child {\n    margin-right: 0;\n}\n\n.card-limit-form__usage-type--selected {\n    border: 2px solid #7F8DFF;\n}\n\n.h3_label_1 {\n    font-weight: 500;\n    font-size: 14px;\n    color: #364A63;\n    line-height: 16px;\n    text-align: left;\n    font-style: normal;\n    margin-bottom: 6px;\n}\n\n.p_label_1 {\n    font-weight: 400;\n    font-size: 12px;\n    color: #8094AE;\n    line-height: 14px;\n    text-align: left;\n    font-style: normal;\n}\n\n.card-limit-form__form-group {\n    margin-bottom: 16px;\n}\n\n.radio-group {\n    display: flex;\n    gap: 20px;\n    margin-top: 10px;\n}\n\n.card-limit-form__form-group label {\n    display: block;\n    margin-bottom: 7px;\n    font-weight: 400;\n    font-size: 14px;\n    color: #526484;\n    line-height: 18px;\n    text-align: left;\n    font-style: normal;\n}\n\n.input-302px {\n    width: 302px !important;\n    font-size: 14px;\n}\n\n.button-group {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 22px;\n}\n\n.button-group .el-button {\n    width: 90px;\n}\n</style>\n\n"],"mappings":"AAwFA,SAAAA,WAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,WAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA,EAAAA,CAAA;IACA;EACA;EACAG,KAAA;IACA;MACAC,UAAA,GACA;QAAAC,KAAA;QAAAC,QAAA;QAAAC,cAAA;MAAA,GACA;QAAAF,KAAA;QAAAC,QAAA;QAAAC,cAAA;MAAA,GACA;QAAAF,KAAA;QAAAC,QAAA;QAAAC,cAAA;MAAA,EACA;MACAC,QAAA;QACAV,IAAA;QACAW,SAAA;QACAC,QAAA;QACAC,SAAA;QACAC,OAAA;QACAC,MAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,kBAAA;MACA,YAAAZ,UAAA,CAAAa,IAAA,CAAAnB,IAAA,IAAAA,IAAA,CAAAO,KAAA,UAAAG,QAAA,CAAAV,IAAA;IACA;IACAoB,SAAA;MACAC,IAAA;QACA,aAAAX,QAAA,CAAAG,SAAA,OAAAH,QAAA,CAAAI,OAAA;MACA;MACAQ,IAAA;QACA;MAAA;IAEA;EACA;EACAC,KAAA;IACAxB,QAAAyB,QAAA;MACA,IAAAA,QAAA;QACA,KAAAC,cAAA;MACA;IACA;EACA;EACAC,OAAA;IACA,MAAAD,eAAA;MACA;QACA,MAAAE,QAAA,SAAA/B,WAAA;UAAAgC,EAAA,OAAAzB,WAAA,CAAA0B;QAAA;QACA,MAAAC,SAAA,GAAAH,QAAA,CAAAtB,IAAA;QACA,KAAAK,QAAA;UAAA,QAAAA,QAAA;UAAA,GAAAoB;QAAA;MACA,SAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,+BAAAA,KAAA;MACA;IACA;IACAE,WAAA;MACA,KAAAC,KAAA;IACA;IACAC,aAAA;MACA,KAAAD,KAAA,iBAAAxB,QAAA;IACA;IACA0B,gBAAA7B,KAAA;MACA,KAAAG,QAAA,CAAAV,IAAA,GAAAO,KAAA;IACA;IACA8B,gBAAA9B,KAAA;MACA,IAAAA,KAAA;QACA,MAAAG,QAAA,CAAAG,SAAA,OAAAH,QAAA,CAAAI,OAAA,IAAAP,KAAA;MACA;QACA,KAAAG,QAAA,CAAAG,SAAA;QACA,KAAAH,QAAA,CAAAI,OAAA;MACA;IACA;EACA;AACA"}]}