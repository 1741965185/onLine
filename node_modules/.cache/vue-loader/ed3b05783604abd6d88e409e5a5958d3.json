{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/IdeaProjects/onLinePayMerchant/src/components/CardLimitModal/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/components/CardLimitModal/index.vue","mtime":1734495834725},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldFZwYVNjZW5lIH0gZnJvbSAiQC9hcGkvY2FyZCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ2FyZExpbWl0TW9kYWwnLAogICAgcHJvcHM6IHsKICAgICAgICB2aXNpYmxlOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBpbml0aWFsRGF0YTogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB1c2FnZVR5cGVzOiBbCiAgICAgICAgICAgICAgICB7IHZhbHVlOiAnMScsIGxhYmVsS2V5OiAncGVyaW9kaWNfdXNlJywgZGVzY3JpcHRpb25LZXk6ICdwcmVpcGRpY19kZXNjJyB9LAogICAgICAgICAgICAgICAgeyB2YWx1ZTogJzAnLCBsYWJlbEtleTogJ3RpbWVfbGluaXRlZF91c2UnLCBkZXNjcmlwdGlvbktleTogJ3RpbWVfbGltaXRfZGVzYycgfSwKICAgICAgICAgICAgICAgIHsgdmFsdWU6ICcyJywgbGFiZWxLZXk6ICdzaWdubGVfdXNlJywgZGVzY3JpcHRpb25LZXk6ICdzaWdubGVfdXNlX2Rlc2MnIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgICAgICAgICBjeWNsZVR5cGU6ICcwJywKICAgICAgICAgICAgICAgIGN5Y2xlRGF5OiAnJywKICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogJycsCiAgICAgICAgICAgICAgICBlbmRUaW1lOiAnJywKICAgICAgICAgICAgICAgIG1heE51bTogJycsCiAgICAgICAgICAgICAgICBtYXhBbW91bnQ6ICcnCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgc2VsZWN0ZWRVc2FnZVR5cGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzYWdlVHlwZXMuZmluZCh0eXBlID0+IHR5cGUudmFsdWUgPT09IHRoaXMuZm9ybURhdGEudHlwZSkgfHwge307CiAgICAgICAgfSwKICAgICAgICBkYXRlUmFuZ2U6IHsKICAgICAgICAgICAgZ2V0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFt0aGlzLmZvcm1EYXRhLnN0YXJ0VGltZSwgdGhpcy5mb3JtRGF0YS5lbmRUaW1lXTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2V0KCkgewogICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZywgYXMgd2UgZG9uJ3Qgd2FudCB0byBhbGxvdyBjaGFuZ2VzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICB2aXNpYmxlKG5ld1ZhbHVlKSB7CiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSkgewogICAgICAgICAgICAgICAgdGhpcy5mZXRjaFNjZW5lRGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhc3luYyBmZXRjaFNjZW5lRGF0YSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0VnBhU2NlbmUoeyBpZDogdGhpcy5pbml0aWFsRGF0YS5zY2VuZUlkIH0pOwogICAgICAgICAgICAgICAgY29uc3Qgc2NlbmVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEgPSB7IC4uLnRoaXMuZm9ybURhdGEsIC4uLnNjZW5lRGF0YSB9OwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2NlbmUgZGF0YTonLCBlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGNsb3NlTW9kYWwoKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgZmFsc2UpOwogICAgICAgIH0sCiAgICAgICAgY29uZmlybUxpbWl0KCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdjb25maXJtJywgdGhpcy5mb3JtRGF0YSk7CiAgICAgICAgfSwKICAgICAgICBzZWxlY3RVc2FnZVR5cGUodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS50eXBlID0gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVEYXRlUmFuZ2UodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBbdGhpcy5mb3JtRGF0YS5zdGFydFRpbWUsIHRoaXMuZm9ybURhdGEuZW5kVGltZV0gPSB2YWx1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRUaW1lID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZFRpbWUgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/CardLimitModal","sourcesContent":["<template>\n    <div class=\"modal-overlay\" v-if=\"visible\" @click.self=\"closeModal\">\n        <div class=\"modal-container\">\n            <div class=\"modal-header\">\n                <div></div>\n                <h2 class=\"modal-title\">{{ $t('card.card_limit') }}</h2>\n                <img\n                    class=\"close-icon\"\n                    src=\"@/assets/images/close_icon.png\"\n                    @click=\"closeModal\"\n                    :alt=\"$t('card.close')\"\n                />\n            </div>\n\n            <div class=\"modal-content\">\n                <div class=\"card-limit-form\">\n                    <div class=\"card-limit-form__usage-types\">\n                        <div\n                            v-for=\"type in usageTypes\"\n                            :key=\"type.value\"\n                            :class=\"[\n                'card-limit-form__usage-type',\n                { 'card-limit-form__usage-type--selected': formData.type === type.value }\n              ]\"\n                        >\n                            <h3 class=\"h3_label_1\">{{ $t(`card.${type.labelKey}`) }}</h3>\n                            <div class=\"p_label_1\">{{ $t(`card.${type.descriptionKey}`) }}</div>\n                        </div>\n                    </div>\n\n                    <template v-if=\"formData.type === '1'\">\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.cycle_settings') }}</label>\n                            <el-radio-group v-model=\"formData.cycleType\" class=\"radio-group\" disabled>\n                                <el-radio label=\"1\">{{ $t('card.natural_day') }}</el-radio>\n                                <el-radio label=\"0\">{{ $t('card.natural_month') }}</el-radio>\n                            </el-radio-group>\n                        </div>\n                        <div v-if=\"formData.cycleType === '1'\" class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.natural_day_settings') }}</label>\n                            <el-input v-model=\"formData.cycleDay\" class=\"input-302px\" placeholder=\"1-28\"></el-input>\n                        </div>\n                    </template>\n\n                    <template v-if=\"formData.type === '0'\">\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.expiration_date') }}</label>\n                            <el-date-picker\n                                v-model=\"dateRange\"\n                                type=\"daterange\"\n                                range-separator=\"-\"\n                                class=\"input-302px\"\n                                :start-placeholder=\"$t('card.start')\"\n                                :end-placeholder=\"$t('card.end')\"\n                                value-format=\"yyyy-MM-dd\"\n                                @change=\"updateDateRange\"\n                                disabled\n                            >\n                            </el-date-picker>\n                        </div>\n                    </template>\n\n                    <div>\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.max_tradeaction') }}</label>\n                            <el-input\n                                class=\"input-302px\"\n                                v-model=\"formData.maxNum\"\n                                :placeholder=\"formData.type === '2' ? '1' : ''\"\n                            ></el-input>\n                        </div>\n                        <div class=\"card-limit-form__form-group\">\n                            <label>{{ $t('card.card_limits') }}</label>\n                            <el-input class=\"input-302px\" v-model=\"formData.maxAmount\"></el-input>\n                        </div>\n                    </div>\n\n                    <div class=\"button-group\">\n                        <el-button @click=\"closeModal\">{{ $t('card.cancel') }}</el-button>\n                        <el-button type=\"primary\" @click=\"confirmLimit\">{{ $t('card.confirmd') }}</el-button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getVpaScene } from \"@/api/card\";\n\nexport default {\n    name: 'CardLimitModal',\n    props: {\n        visible: {\n            type: Boolean,\n            default: false\n        },\n        initialData: {\n            type: Object,\n            default: () => ({})\n        }\n    },\n    data() {\n        return {\n            usageTypes: [\n                { value: '1', labelKey: 'periodic_use', descriptionKey: 'preipdic_desc' },\n                { value: '0', labelKey: 'time_linited_use', descriptionKey: 'time_limit_desc' },\n                { value: '2', labelKey: 'signle_use', descriptionKey: 'signle_use_desc' },\n            ],\n            formData: {\n                type: '1',\n                cycleType: '0',\n                cycleDay: '',\n                startTime: '',\n                endTime: '',\n                maxNum: '',\n                maxAmount: ''\n            }\n        };\n    },\n    computed: {\n        selectedUsageType() {\n            return this.usageTypes.find(type => type.value === this.formData.type) || {};\n        },\n        dateRange: {\n            get() {\n                return [this.formData.startTime, this.formData.endTime];\n            },\n            set() {\n                // Do nothing, as we don't want to allow changes\n            }\n        }\n    },\n    watch: {\n        visible(newValue) {\n            if (newValue) {\n                this.fetchSceneData();\n            }\n        }\n    },\n    methods: {\n        async fetchSceneData() {\n            try {\n                const response = await getVpaScene({ id: this.initialData.sceneId });\n                const sceneData = response.data;\n                this.formData = { ...this.formData, ...sceneData };\n            } catch (error) {\n                console.error('Error fetching scene data:', error);\n            }\n        },\n        closeModal() {\n            this.$emit('update:visible', false);\n        },\n        confirmLimit() {\n            this.$emit('confirm', this.formData);\n        },\n        selectUsageType(value) {\n            this.formData.type = value;\n        },\n        updateDateRange(value) {\n            if (value) {\n                [this.formData.startTime, this.formData.endTime] = value;\n            } else {\n                this.formData.startTime = '';\n                this.formData.endTime = '';\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    z-index: 2000;\n}\n\n.modal-container {\n    background-color: #fff;\n    border-radius: 8px;\n    width: 684px;\n    max-width: 684px;\n    padding: 20px 32px 32px 32px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.modal-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 32px;\n}\n\n.modal-title {\n    font-weight: 500;\n    font-size: 24px;\n    color: #211F32;\n    line-height: 30px;\n    text-align: right;\n    font-style: normal;\n}\n\n.close-icon {\n    cursor: pointer;\n    width: 16px;\n    height: 15px;\n}\n\n.card-limit-form {\n    font-family: Arial, sans-serif;\n}\n\n.card-limit-form__usage-types {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 24px;\n    width: 100%;\n}\n\n.card-limit-form__usage-type {\n    flex: 1;\n    padding: 16px 20px;\n    border: 1px solid rgba(219, 223, 234, 1);\n    border-radius: 12px;\n    text-align: center;\n    cursor: pointer;\n    margin-right: 16px;\n}\n\n.card-limit-form__usage-type:last-child {\n    margin-right: 0;\n}\n\n.card-limit-form__usage-type--selected {\n    border: 2px solid #7F8DFF;\n}\n\n.h3_label_1 {\n    font-weight: 500;\n    font-size: 14px;\n    color: #364A63;\n    line-height: 16px;\n    text-align: left;\n    font-style: normal;\n    margin-bottom: 6px;\n}\n\n.p_label_1 {\n    font-weight: 400;\n    font-size: 12px;\n    color: #8094AE;\n    line-height: 14px;\n    text-align: left;\n    font-style: normal;\n}\n\n.card-limit-form__form-group {\n    margin-bottom: 16px;\n}\n\n.radio-group {\n    display: flex;\n    gap: 20px;\n    margin-top: 10px;\n}\n\n.card-limit-form__form-group label {\n    display: block;\n    margin-bottom: 7px;\n    font-weight: 400;\n    font-size: 14px;\n    color: #526484;\n    line-height: 18px;\n    text-align: left;\n    font-style: normal;\n}\n\n.input-302px {\n    width: 302px !important;\n    font-size: 14px;\n}\n\n.button-group {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 22px;\n}\n\n.button-group .el-button {\n    width: 90px;\n}\n</style>\n\n"]}]}