{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/IdeaProjects/onLinePayMerchant/src/views/FundTransfer/FundTransfer.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/views/FundTransfer/FundTransfer.vue","mtime":1730111979292},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgeyB0cmFuc2ZlckluLCB0cmFuc2Zlck91dCB9IGZyb20gIkAvYXBpL2NlcnRpZmljYXRpb24iOwppbXBvcnQgeyBnZXRBY2NvdW50QmFsYW5jZSB9IGZyb20gIkAvYXBpL2hvbWUiOwppbXBvcnQgaTE4biBmcm9tICJAL2kxOG4iOwoKZXhwb3J0IGRlZmF1bHQgewoJbmFtZTogJ0Z1bmRUcmFuc2ZlcicsCgoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlzZWxlY3RlZFdhbGxldDogaTE4bi50KCdjYXJkLndhbGxldCcpLAoJCQlzZWxlY3RlZENhcmQ6ICc1NTYxLi4uMzQwNCcsCgkJCWN1cnJlbnRXYWxsZXRDYXJkOiB7fSwKCQkJbWVyQWNjb3VudDogW10sCgkJCUhLREFjY291bnQ6IFt7CgkJCQljdXJyZW5jeTogIkhLRCIsCgkJCQlvdmVyQW1vdW50OiAiMC4wMCIsCgkJCQlmbGFnOiAiSEtEIgoJCQl9XSwKCQkJYW1vdW50OiAnJywKCQkJbG9hZGluZzogZmFsc2UsCgkJCWlzU3dhcHBlZDogZmFsc2UsCgkJCXNlbGVjdGVkQ3VycmVuY3lNYXA6IHsKCQkJCWN1cnJlbmN5OiAiVVNEQyIsCgkJCQlvdmVyQW1vdW50OiAiMC4wMCIsCgkJCQlmbGFnOiAiVVNEQyIKCQkJfSwKCQkJaXNDdXJyZW5jeURyb3Bkb3duT3BlbjogZmFsc2UsCgkJCWlzVmFsaWRBbW91bnQ6IGZhbHNlCgkJfQoJfSwKCWNvbXB1dGVkOiB7CgkJc29ydGVkQWNjb3VudHMoKSB7CgkJCS8vIOagueaNriBpc1N3YXBwZWQg55qE5YC86L+U5Zue5o6S5bqP5ZCO55qE5pWw57uECgkJCXJldHVybiB0aGlzLmlzU3dhcHBlZAoJCQkJPyB0aGlzLkhLREFjY291bnQgLy8KCQkJCTogdGhpcy5tZXJBY2NvdW50OyAvLyDljp/lp4vpobrluo8KCQl9LAoKCX0sCgljcmVhdGVkKCkgewoJdGhpcy5jdXJyZW50V2FsbGV0Q2FyZD10aGlzLiRyb3V0ZS5wYXJhbXMuY3VycmVudENhcmQ7Cgl0aGlzLkhLREFjY291bnRbMF0ub3ZlckFtb3VudD10aGlzLiRyb3V0ZS5wYXJhbXMuY3VycmVudENhcmQuYW1vdW50OwoJdGhpcy5IS0RBY2NvdW50WzBdLmN1cnJlbmN5PXRoaXMuJHJvdXRlLnBhcmFtcy5jdXJyZW50Q2FyZC5jdXJyZW5jeTsKCXRoaXMuSEtEQWNjb3VudFswXS5mbGFnPXRoaXMuJHJvdXRlLnBhcmFtcy5jdXJyZW50Q2FyZC5jdXJyZW5jeTsKCXRoaXMuc2VsZWN0ZWRDYXJkPXRoaXMuJHJvdXRlLnBhcmFtcy5jdXJyZW50Q2FyZC5jYXJkTm87CgkJdGhpcy5mZXRjaEFjY291bnRCYWxhbmNlKCk7CgkJLy8g5re75Yqg5YWo5bGA54K55Ye75LqL5Lu255uR5ZCsCgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUdsb2JhbENsaWNrKTsKCX0sCgoJZGVzdHJveWVkKCkgewoJCS8vIOenu+mZpOWFqOWxgOeCueWHu+S6i+S7tuebkeWQrAoJCWRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVHbG9iYWxDbGljayk7Cgl9LAoKCW1ldGhvZHM6IHsKCQkvLyDojrflj5botKbmiLfkvZnpop3kv6Hmga8KCQlhc3luYyBmZXRjaEFjY291bnRCYWxhbmNlKCkgewoJCQl0cnkgewoJCQkJY29uc3QgbWVyTm8gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdtZXJObycpOwoJCQkJY29uc3QgcmVzID0gYXdhaXQgZ2V0QWNjb3VudEJhbGFuY2UoewoJCQkJCW1lck5vLAoJCQkJCWlzQWxsOiAxLAoJCQkJCWN1cnJlbmN5OiAnYWxsJwoJCQkJfSk7CgoJCQkJaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewoJCQkJCXRoaXMubWVyQWNjb3VudCA9IHJlcy5kYXRhLm1lckFjY291bnQ7CgkJCQkJY29uc3QgdXNkY0FjY291bnQgPSByZXMuZGF0YS5tZXJBY2NvdW50LmZpbmQoCgkJCQkJCWl0ZW0gPT4gaXRlbS5jdXJyZW5jeSA9PT0gJ1VTREMnCgkJCQkJKTsKCQkJCQlpZiAodXNkY0FjY291bnQpIHsKCQkJCQkJdGhpcy5zZWxlY3RlZEN1cnJlbmN5TWFwID0gdXNkY0FjY291bnQ7CgkJCQkJfQoJCQkJfQoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W6LSm5oi35L2Z6aKd5aSx6LSlJyk7CgkJCX0KCQl9LAoKCQkvLyDliIfmjaLovazotKbmlrnlkJEKCQloYW5kbGVTd2FwKCkgewoJCQl0aGlzLmlzU3dhcHBlZCA9ICF0aGlzLmlzU3dhcHBlZDsKCQkJaWYgKHRoaXMuaXNTd2FwcGVkKSB7CgkJCQl0aGlzLnNlbGVjdGVkQ3VycmVuY3lNYXAgPSB0aGlzLkhLREFjY291bnRbMF07CgkJCX0gZWxzZSB7CgkJCQl0aGlzLnNlbGVjdGVkQ3VycmVuY3lNYXAgPSB0aGlzLm1lckFjY291bnQuZmluZCgKCQkJCQlpdGVtID0+IGl0ZW0uY3VycmVuY3kgPT09ICdVU0RDJwoJCQkJKTsKCQkJfQoJCX0sCgoJCS8vIOWIh+aNouW4geenjemAieaLqeS4i+aLieahhgoJCXRvZ2dsZUN1cnJlbmN5RHJvcGRvd24oKSB7CgkJCXRoaXMuaXNDdXJyZW5jeURyb3Bkb3duT3BlbiA9ICF0aGlzLmlzQ3VycmVuY3lEcm9wZG93bk9wZW47CgkJfSwKCgkJLy8g6YCJ5oup5biB56eNCgkJc2VsZWN0Q3VycmVuY3koY3VycmVuY3kpIHsKCQkJdGhpcy5zZWxlY3RlZEN1cnJlbmN5TWFwID0gY3VycmVuY3k7CgkJCXRoaXMuaXNDdXJyZW5jeURyb3Bkb3duT3BlbiA9IGZhbHNlOwoJCQl0aGlzLnZhbGlkYXRlQW1vdW50KCk7CgkJfSwKCgkJLy8g6aqM6K+B6L2s6LSm6YeR6aKdCgkJdmFsaWRhdGVBbW91bnQoKSB7CgkJCWNvbnN0IG51bUFtb3VudCA9IHBhcnNlRmxvYXQodGhpcy5hbW91bnQpOwoJCQljb25zdCBhdmFpbGFibGVCYWxhbmNlID0gcGFyc2VGbG9hdCh0aGlzLnNlbGVjdGVkQ3VycmVuY3lNYXAub3ZlckFtb3VudCk7CgoJCQl0aGlzLmlzVmFsaWRBbW91bnQgPSAhaXNOYU4obnVtQW1vdW50KSAmJgoJCQkJbnVtQW1vdW50ID4gMCAmJgoJCQkJbnVtQW1vdW50IDw9IGF2YWlsYWJsZUJhbGFuY2U7CgkJfSwKCgkJLy8g5aSE55CG6L2s6LSmCgkJYXN5bmMgaGFuZGxlVHJhbnNmZXIoKSB7CgkJCWlmICghdGhpcy5pc1ZhbGlkQW1vdW50IHx8IHRoaXMubG9hZGluZykgcmV0dXJuOwoKCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCgkJCXRyeSB7CgkJCQljb25zdCB0cmFuc2ZlckRhdGEgPSB7CgkJCQkJY2FyZElkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuY3VycmVudENhcmQuaWQsCgkJCQkJYW1vdW50OiB0aGlzLmFtb3VudCwKCQkJCQljdXJyZW5jeTogdGhpcy5zZWxlY3RlZEN1cnJlbmN5TWFwLmN1cnJlbmN5LAoJCQkJfTsKCgkJCQljb25zdCB0cmFuc2Zlck1ldGhvZCA9IHRoaXMuaXNTd2FwcGVkID8gdHJhbnNmZXJPdXQgOiB0cmFuc2ZlckluOwoJCQkJY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0cmFuc2Zlck1ldGhvZCh0cmFuc2ZlckRhdGEpOwoKCQkJCWlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewoJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tc2cpOwoJCQkJCWF3YWl0IHRoaXMuZmV0Y2hBY2NvdW50QmFsYW5jZSgpOwoJCQkJCXRoaXMuZ29CYWNrKCk7CgkJCQl9CgkJCX0gY2F0Y2ggKGVycm9yKSB7CgkJLy8JCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKTsKCQkJfSBmaW5hbGx5IHsKCQkJCXRoaXMubG9hZGluZyA9IGZhbHNlOwoJCQl9CgkJfSwKCgkJLy8g5aSE55CG5YWo5bGA54K55Ye75LqL5Lu2CgkJaGFuZGxlR2xvYmFsQ2xpY2soZXZlbnQpIHsKCQkJY29uc3QgY3VycmVuY3lTZWxlY3RvciA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZnVuZC10cmFuc2Zlcl9fY3VycmVuY3ktc2VsZWN0b3InKTsKCQkJaWYgKCFjdXJyZW5jeVNlbGVjdG9yKSB7CgkJCQl0aGlzLmlzQ3VycmVuY3lEcm9wZG93bk9wZW4gPSBmYWxzZTsKCQkJfQoJCX0sCgoJCS8vIOi/lOWbnuS4iuS4gOmhtQoJCWdvQmFjaygpIHsKCQkJcm91dGVyLmJhY2soKTsKCQl9Cgl9Cn0K"},{"version":3,"sources":["FundTransfer.vue"],"names":[],"mappings":";AA0IA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"FundTransfer.vue","sourceRoot":"src/views/FundTransfer","sourcesContent":["<template>\n\t<div class=\"fund-transfer\" @click=\"handleGlobalClick\">\n\t\t<div class=\"fund-transfer__header\">\n\t\t\t<img\n\t\t\t\tclass=\"fund-transfer__back-icon\"\n\t\t\t\tsrc=\"./assets/img/SketchPngcf0409b4e46f3940a18dee8cef0a718f8e87f756e6ad8a6a090d89e68dd18479.png\"\n\t\t\t\t@click=\"goBack\"\n\t\t\t/>\n\t\t</div>\n\n\t\t<div class=\"fund-transfer__content\">\n\t\t\t<h1 class=\"fund-transfer__title\">{{$t(\"card.transfer\")}}</h1>\n\t\t\t<p class=\"fund-transfer__subtitle\" v-if=\"!isSwapped\">{{$t(\"card.wallet_balance\")}}{{$t(\"card.transfer_to\")}}OnlinePay Card</p>\n\t\t\t<p class=\"fund-transfer__subtitle\" v-else>OnlinePay Card{{$t(\"card.transfer_to\")}}{{$t(\"card.wallet_balance\")}}</p>\n\n\t\t\t<div class=\"fund-transfer__form\">\n\t\t\t\t<!-- Transfer Account Section -->\n\t\t\t\t<div class=\"fund-transfer__accounts\">\n\t\t\t\t\t<div class=\"fund-transfer__row\">\n\t\t\t\t\t\t<span class=\"fund-transfer__label\">{{$t(\"card.from\")}}</span>\n\t\t\t\t\t\t<div class=\"fund-transfer__select\">\n\n\t\t\t\t\t\t\t<div class=\"fund-transfer__select-content\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t:src=\"isSwapped ? require('./assets/img/card_select_fundtransfer.png') : require('./assets/img/wallet_select_foundtransfer.png')\"\n\t\t\t\t\t\t\t\t\t:alt=\"isSwapped ? 'card' : 'Wallet'\"\n\t\t\t\t\t\t\t\t\tclass=\"fund-transfer__account-icon\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"fund-transfer__account-text\">\n                  {{ isSwapped ? selectedCard : selectedWallet }}\n                </span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"fund-transfer__swap-wrapper\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc=\"./assets/img/swap_found.png\"\n\t\t\t\t\t\t\tclass=\"fund-transfer__swap-icon\"\n\t\t\t\t\t\t\t@click=\"handleSwap\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"fund-transfer__row fund-transfer__row--destination\">\n\t\t\t\t\t\t<span class=\"fund-transfer__label\">{{$t(\"card.to\")}}</span>\n\t\t\t\t\t\t<div class=\"fund-transfer__select\">\n\t\t\t\t\t\t\t<div class=\"fund-transfer__select-content\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t:src=\"!isSwapped ? require('./assets/img/card_select_fundtransfer.png') : require('./assets/img/wallet_select_foundtransfer.png')\"\n\t\t\t\t\t\t\t\t\t:alt=\"!isSwapped ? 'card' : 'Wallet'\"\n\t\t\t\t\t\t\t\t\tclass=\"fund-transfer__account-icon\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"fund-transfer__account-text\">\n                  {{ isSwapped ? selectedWallet : selectedCard }}\n                </span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Amount Input Section -->\n\t\t\t\t<div class=\"fund-transfer__amount\">\n\t\t\t\t\t<span class=\"fund-transfer__amount-label\">{{$t(\"card.amount\")}}</span>\n\t\t\t\t\t<div class=\"fund-transfer__amount-input-container\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model.trim=\"amount\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"fund-transfer__amount-input\"\n\t\t\t\t\t\t\tplaceholder=\"0\"\n\t\t\t\t\t\t\t@input=\"validateAmount\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"fund-transfer__currency-selector\">\n\t\t\t\t\t\t\t<section\n\t\t\t\t\t\t\t\tclass=\"fund-transfer__currency-select\"\n\t\t\t\t\t\t\t\t@click.stop=\"toggleCurrencyDropdown\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t:src=\"`/currency/${selectedCurrencyMap.flag}.png`\"\n\t\t\t\t\t\t\t\t\talt=\"currency\"\n\t\t\t\t\t\t\t\t\tclass=\"fund-transfer__currency-icon\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fund-transfer__currency-text\">\n                  {{ selectedCurrencyMap.currency }}\n                </span>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclass=\"dawn_uo_icon\"\n\t\t\t\t\t\t\t\t\tsrc=\"./assets/img/SketchPng32e58d36e33be15afc5c418asdsadada2a8758484ada7f5588858e3490.png\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</section>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-show=\"isCurrencyDropdownOpen\"\n\t\t\t\t\t\t\tclass=\"fund-transfer__currency-dropdown\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-for=\"currency in sortedAccounts\"\n\t\t\t\t\t\t\t\t:key=\"currency.currency\"\n\t\t\t\t\t\t\t\tclass=\"fund-transfer__currency-option\"\n\t\t\t\t\t\t\t\t@click.stop=\"selectCurrency(currency)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t:src=\"`/currency/${currency.flag}.png`\"\n\t\t\t\t\t\t\t\t\talt=\"currency\"\n\t\t\t\t\t\t\t\t\tclass=\"fund-transfer__currency-icon\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fund-transfer__currency-name\">\n                    {{ currency.currency }}\n                  </span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"fund-transfer__balance\">\n\t\t\t\t\t\t<span class=\"fund-transfer__balance-label\">{{$t(\"card.available_balance\")}}:\n\t\t\t\t\t\t<span class=\"fund-transfer__balance-amount\">\n              {{selectedCurrencyMap.overAmount}} {{selectedCurrencyMap.currency}}\n            </span></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Submit Button -->\n\t\t\t\t<el-button\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\tclass=\"fund-transfer__submit\"\n\t\t\t\t\t@click=\"handleTransfer\"\n\t\t\t\t\t:disabled=\"!isValidAmount\"\n\t\t\t\t>\n\t\t\t\t\t{{$t(\"card.confirm\")}}\n\t\t\t\t</el-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport router from \"@/router\";\nimport { transferIn, transferOut } from \"@/api/certification\";\nimport { getAccountBalance } from \"@/api/home\";\nimport i18n from \"@/i18n\";\n\nexport default {\n\tname: 'FundTransfer',\n\n\tdata() {\n\t\treturn {\n\t\t\tselectedWallet: i18n.t('card.wallet'),\n\t\t\tselectedCard: '5561...3404',\n\t\t\tcurrentWalletCard: {},\n\t\t\tmerAccount: [],\n\t\t\tHKDAccount: [{\n\t\t\t\tcurrency: \"HKD\",\n\t\t\t\toverAmount: \"0.00\",\n\t\t\t\tflag: \"HKD\"\n\t\t\t}],\n\t\t\tamount: '',\n\t\t\tloading: false,\n\t\t\tisSwapped: false,\n\t\t\tselectedCurrencyMap: {\n\t\t\t\tcurrency: \"USDC\",\n\t\t\t\toverAmount: \"0.00\",\n\t\t\t\tflag: \"USDC\"\n\t\t\t},\n\t\t\tisCurrencyDropdownOpen: false,\n\t\t\tisValidAmount: false\n\t\t}\n\t},\n\tcomputed: {\n\t\tsortedAccounts() {\n\t\t\t// 根据 isSwapped 的值返回排序后的数组\n\t\t\treturn this.isSwapped\n\t\t\t\t? this.HKDAccount //\n\t\t\t\t: this.merAccount; // 原始顺序\n\t\t},\n\n\t},\n\tcreated() {\n\tthis.currentWalletCard=this.$route.params.currentCard;\n\tthis.HKDAccount[0].overAmount=this.$route.params.currentCard.amount;\n\tthis.HKDAccount[0].currency=this.$route.params.currentCard.currency;\n\tthis.HKDAccount[0].flag=this.$route.params.currentCard.currency;\n\tthis.selectedCard=this.$route.params.currentCard.cardNo;\n\t\tthis.fetchAccountBalance();\n\t\t// 添加全局点击事件监听\n\t\tdocument.addEventListener('click', this.handleGlobalClick);\n\t},\n\n\tdestroyed() {\n\t\t// 移除全局点击事件监听\n\t\tdocument.removeEventListener('click', this.handleGlobalClick);\n\t},\n\n\tmethods: {\n\t\t// 获取账户余额信息\n\t\tasync fetchAccountBalance() {\n\t\t\ttry {\n\t\t\t\tconst merNo = sessionStorage.getItem('merNo');\n\t\t\t\tconst res = await getAccountBalance({\n\t\t\t\t\tmerNo,\n\t\t\t\t\tisAll: 1,\n\t\t\t\t\tcurrency: 'all'\n\t\t\t\t});\n\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tthis.merAccount = res.data.merAccount;\n\t\t\t\t\tconst usdcAccount = res.data.merAccount.find(\n\t\t\t\t\t\titem => item.currency === 'USDC'\n\t\t\t\t\t);\n\t\t\t\t\tif (usdcAccount) {\n\t\t\t\t\t\tthis.selectedCurrencyMap = usdcAccount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.$message.error('获取账户余额失败');\n\t\t\t}\n\t\t},\n\n\t\t// 切换转账方向\n\t\thandleSwap() {\n\t\t\tthis.isSwapped = !this.isSwapped;\n\t\t\tif (this.isSwapped) {\n\t\t\t\tthis.selectedCurrencyMap = this.HKDAccount[0];\n\t\t\t} else {\n\t\t\t\tthis.selectedCurrencyMap = this.merAccount.find(\n\t\t\t\t\titem => item.currency === 'USDC'\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\n\t\t// 切换币种选择下拉框\n\t\ttoggleCurrencyDropdown() {\n\t\t\tthis.isCurrencyDropdownOpen = !this.isCurrencyDropdownOpen;\n\t\t},\n\n\t\t// 选择币种\n\t\tselectCurrency(currency) {\n\t\t\tthis.selectedCurrencyMap = currency;\n\t\t\tthis.isCurrencyDropdownOpen = false;\n\t\t\tthis.validateAmount();\n\t\t},\n\n\t\t// 验证转账金额\n\t\tvalidateAmount() {\n\t\t\tconst numAmount = parseFloat(this.amount);\n\t\t\tconst availableBalance = parseFloat(this.selectedCurrencyMap.overAmount);\n\n\t\t\tthis.isValidAmount = !isNaN(numAmount) &&\n\t\t\t\tnumAmount > 0 &&\n\t\t\t\tnumAmount <= availableBalance;\n\t\t},\n\n\t\t// 处理转账\n\t\tasync handleTransfer() {\n\t\t\tif (!this.isValidAmount || this.loading) return;\n\n\t\t\tthis.loading = true;\n\n\t\t\ttry {\n\t\t\t\tconst transferData = {\n\t\t\t\t\tcardId: this.$route.params.currentCard.id,\n\t\t\t\t\tamount: this.amount,\n\t\t\t\t\tcurrency: this.selectedCurrencyMap.currency,\n\t\t\t\t};\n\n\t\t\t\tconst transferMethod = this.isSwapped ? transferOut : transferIn;\n\t\t\t\tconst response = await transferMethod(transferData);\n\n\t\t\t\tif (response.status === 200) {\n\t\t\t\t\tthis.$message.success(response.msg);\n\t\t\t\t\tawait this.fetchAccountBalance();\n\t\t\t\t\tthis.goBack();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t//\t\tthis.$message.error(error.msg);\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\n\t\t// 处理全局点击事件\n\t\thandleGlobalClick(event) {\n\t\t\tconst currencySelector = event.target.closest('.fund-transfer__currency-selector');\n\t\t\tif (!currencySelector) {\n\t\t\t\tthis.isCurrencyDropdownOpen = false;\n\t\t\t}\n\t\t},\n\n\t\t// 返回上一页\n\t\tgoBack() {\n\t\t\trouter.back();\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n.fund-transfer {\n\tposition: relative;\n}\n\n.fund-transfer__header {\n\tpadding: 17px 0 0 121px;\n\theight: 64px;\n}\n\n.fund-transfer__back-icon {\n\twidth: 31px;\n\theight: 31px;\n\tcursor: pointer;\n}\n\n.dawn_uo_icon{\n\twidth: 14px;\n\theight: 8px;\n}\n\n.fund-transfer__content {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n}\n\n.fund-transfer__title {\n\tfont-weight: 600;\n\tfont-size: 28px;\n\tcolor: #364A63;\n\tline-height: 36px;\n\tmargin: 60px 0 16px;\n}\n\n.fund-transfer__subtitle {\n\tfont-size: 14px;\n\tcolor: #526484;\n\tline-height: 20px;\n\tmargin-bottom: 24px;\n}\n\n.fund-transfer__form {\n\twidth: 516px;\n}\n\n.fund-transfer__accounts {\n\tbackground-color: #fff;\n\tborder: 1px solid #dbdfea;\n\tborder-radius: 16px;\n\tmargin-bottom: 24px;\n\toverflow: hidden;\n}\n\n.fund-transfer__row {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 20px;\n}\n\n.fund-transfer__row--destination {\n\tbackground-color: #f7f9fe;\n\tborder-top: 1px solid #dbdfea;\n}\n\n.fund-transfer__label {\n\twidth: 14px;\n\tfont-size: 14px;\n\tcolor: #8094ae;\n\tmargin-right: 20px;\n}\n\n.fund-transfer__swap-wrapper {\n\tposition: relative;\n}\n\n.fund-transfer__swap-icon {\n\tposition: absolute;\n\tright: 29px;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\twidth: 40px;\n\theight: 40px;\n\tcursor: pointer;\n}\n\n.fund-transfer__select {\n\tflex-grow: 1;\n}\n\n.fund-transfer__select-content {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.fund-transfer__account-icon {\n\twidth: 36px;\n\theight: 24px;\n\tmargin-right: 12px;\n}\n\n.fund-transfer__account-text {\n\tfont-size: 14px;\n\tcolor: #364a63;\n\tfont-weight: 500;\n}\n\n.fund-transfer__amount {\n\tmargin-bottom: 40px;\n}\n\n.fund-transfer__amount-label {\n\tdisplay: block;\n\tfont-size: 14px;\n\tcolor: #364a63;\n\tmargin-bottom: 4px;\n}\n\n.fund-transfer__amount-input-container {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground-color: #fff;\n\tborder: 1px solid #dbdfea;\n\tborder-radius: 16px;\n\tpadding: 12px 16px;\n\tmargin-bottom: 6px;\n\tposition: relative;\n}\n\n.fund-transfer__amount-input {\n\tflex-grow: 1;\n\tborder: none;\n\tfont-size: 24px;\n\tcolor: #364a63;\n\tfont-weight: 500;\n\toutline: none;\n}\n\n.fund-transfer__currency-selector {\n\tposition: relative;\n\tmargin-left: auto;\n}\n\n.fund-transfer__currency-select {\n\tdisplay: flex;\n\talign-items: center;\n\tcursor: pointer;\n}\n\n.fund-transfer__currency-icon {\n\twidth: 30px;\n\theight: 30px;\n\tmargin-right: 6px;\n}\n\n.fund-transfer__currency-text {\n\tfont-size: 24px;\n\tcolor: #364a63;\n\tfont-weight: 500;\n\tmargin-right: 12px;\n}\n\n.fund-transfer__currency-dropdown {\n\tposition: absolute;\n\ttop: calc(100% + 8px);\n\tright: 0;\n\tbackground-color: #fff;\n\tborder: 1px solid #dbdfea;\n\tborder-radius: 4px;\n\tz-index: 10;\n\tmin-width: 120px;\n\tmax-height: 400px;\n\toverflow-y: auto;\n\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.fund-transfer__currency-option {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: start;\n\tpadding: 10px;\n\n\tcursor: pointer;\n}\n\n.fund-transfer__currency-option:hover {\n\tbackground-color: #f7f9fe;\n}\n\n.fund-transfer__currency-name {\n\tfont-size: 20px;\n\tcolor: #364a63;\n\tmargin-right: 12px;\n}\n\n.fund-transfer__balance {\n\tdisplay: flex;\n\talign-items: center;\n\tfont-size: 14px;\n}\n\n.fund-transfer__balance-label {\n\tcolor: #8094ae;\n\tmargin-right: 12px;\n}\n\n.fund-transfer__balance-amount {\n\tcolor: #526484;\n\tfont-weight: 500;\n}\n\n.fund-transfer__submit {\n\twidth: 100%;\n\theight: 44px;\n\tbackground: #7F8DFF;\n\tborder-radius: 4px;\n\tcolor: #fff;\n\tborder: none;\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tcursor: pointer;\n}\n\n.fund-transfer__submit:hover {\n\tbackground: #6b7aff;\n}\n\n.fund-transfer__submit:disabled {\n\tbackground-color: #dbdfea;\n\tcursor: not-allowed;\n}\n</style>"]}]}