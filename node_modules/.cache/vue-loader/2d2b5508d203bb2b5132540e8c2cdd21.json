{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/IdeaProjects/onLinePayMerchant/src/views/Auth/index.vue?vue&type=style&index=0&id=7c2651e5&scoped=true&lang=less","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/views/Auth/index.vue","mtime":1716541633561},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uLy4uL2Fzc2V0cy9zdHlsZXMvdGVtcGxhdGUiOwo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA8rBA","file":"index.vue","sourceRoot":"src/views/Auth","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <h3 class=\"page-title mb28\">{{$t('manage.rightsManagement')}}</h3>\n    <el-tabs v-model=\"activeName\">\n      <el-tab-pane name=\"0\">\n        <span slot=\"label\"><svg-icon icon-class=\"person\"/>{{$t('manage.characterSettings')}}</span>\n        <div class=\"Flex spaceB alignC card-tools-toggle\" style=\"justify-content: flex-end;\">\n          <el-button\n              class=\"air-btn-add\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"showUserDialog=true\"\n          >\n          </el-button>\n        </div>\n        <el-table\n            :data=\"userTableList\"\n            tooltip-effect=\"dark\"\n            style=\"width: 100%\"\n            v-loading=\"loading\"\n            ref=\"userTableList\"\n            @selection-change=\"handleSelectionChange\">\n<!--          <el-table-column-->\n<!--              type=\"selection\"-->\n<!--              width=\"55\">-->\n<!--          </el-table-column>-->\n<!--          <el-table-column-->\n<!--              prop=\"id\"-->\n<!--              :label=\"$t('manage.roleNumber')\">-->\n<!--          </el-table-column>-->\n          <el-table-column\n              prop=\"name\"\n              :label=\"$t('manage.name')\">\n          </el-table-column>\n          <el-table-column\n              :label=\"$t('manage.status')\">\n            <template slot-scope=\"scope\">\n              {{scope.row.status == \"1\"? $t('manage.enable'):$t('manage.disable')}}\n            </template>\n          </el-table-column>\n          <el-table-column\n              min-width=\"160\"\n              :label=\"$t('manage.creadTime')\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.createTime ? dayjs(scope.row.createTime).format(\"YYYY-MM-DD HH:mm:ss\") : \"-\" }}\n            </template>\n          </el-table-column>\n          <el-table-column\n              :label=\"$t('manage.operate')\"\n              fixed=\"right\">\n            <template slot-scope=\"scope\">\n              <circular-dropdown\n                  :list=\"operationList\"\n                  :row=\"scope.row\"\n                  @command=\"operateScope\"\n              ></circular-dropdown>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-tab-pane>\n      <el-tab-pane name=\"1\">\n        <span slot=\"label\"><svg-icon icon-class=\"\"/> {{$t('manage.adminList')}}</span>\n        <div class=\"Flex spaceB alignC card-tools-toggle\" style=\"justify-content: flex-end;\">\n          <el-button\n              class=\"air-btn-add\"\n              type=\"primary\"\n              icon=\"el-icon-plus\"\n              @click=\"showAdminDialog = true\">\n          </el-button>\n        </div>\n        <el-table\n            :data=\"manageTableList\"\n            tooltip-effect=\"dark\"\n            style=\"width: 100%\"\n            v-loading=\"loading\"\n            @selection-change=\"handleSelectionChange\">\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tprop=\"email\"\n\t\t\t\t\t\tlabel=\"Email\">\n\t\t\t\t\t</el-table-column>\n          <el-table-column\n              prop=\"userName\"\n              :label=\"$t('manage.userName')\">\n          </el-table-column>\n          <el-table-column\n              prop=\"roleName\"\n              :label=\"$t('manage.name')\">\n          </el-table-column>\n          <el-table-column\n              :label=\"$t('manage.status')\">\n            <template slot-scope=\"scope\">\n              {{scope.row.status == \"1\"? $t('manage.enable'):$t('manage.enable')}}\n            </template>\n          </el-table-column>\n          <el-table-column\n              min-width=\"160\"\n              :label=\"$t('manage.creadTime')\">\n            <template slot-scope=\"scope\">\n              {{ scope.row.createTime ? dayjs(scope.row.createTime).format(\"YYYY-MM-DD HH:mm:ss\") : \"-\" }}\n            </template>\n          </el-table-column>\n          <el-table-column\n              :label=\"$t('manage.operate')\"\n              fixed=\"right\">\n            <template slot-scope=\"scope\">\n              <circular-dropdown\n                  :list=\"operationList2\"\n                  :row=\"scope.row\"\n                  @command=\"operateScope2\"\n              ></circular-dropdown>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-tab-pane>\n\n      <pagination\n          :total=\"total\"\n          :page.sync=\"form.pageNum\"\n          :limit.sync=\"form.pageSize\"\n          @pagination=\"getList\"\n      ></pagination>\n\n    </el-tabs>\n\n    <!-- 添加修改角色 -->\n    <el-dialog\n        :title=\" (userForm.id? $t('manage.edit'):$t('manage.add') ) + $t('manage.rules') \"\n        :visible.sync=\"showUserDialog\"\n        width=\"500px\"\n    >\n      <el-form ref=\"userForm\" :model=\"userForm\" :rules=\"userRules\" label-width=\"120px\" label-position=\"left\">\n        <el-form-item :label=\"$t('manage.name')\" prop=\"name\">\n          <el-input v-model=\"userForm.name\" :placeholder=\"$t('manage.qsr14djsmc')\" maxlength=\"15\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.status')\" prop=\"status\">\n          <el-select v-model=\"userForm.status\" :placeholder=\"$t('manage.selectStatus')\">\n            <el-option :label=\"$t('manage.enable')\" :value=\"1\"></el-option>\n            <el-option :label=\"$t('manage.disable')\" :value=\"0\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.ruleMenu')\">\n          <el-checkbox v-model=\"menuExpand\" @change=\"handleCheckedTreeExpand($event, 'menu')\">{{$t('manage.expandcollapse')}}</el-checkbox>\n          <el-checkbox v-model=\"menuNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'menu')\">{{$t('manage.AllDont')}}</el-checkbox>\n        </el-form-item>\n        <el-form-item class=\"border\">\n          <el-tree\n              class=\"tree-border\"\n              :data=\"treeData\"\n              show-checkbox\n              ref=\"menu\"\n              node-key=\"id\"\n              empty-text=\"\"\n              :props=\"defaultProps\"\n          ></el-tree>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"air-btn-cancel\" @click=\"showUserDialog=false\">{{$t('manage.cancellation')}}</el-button>\n        <el-button class=\"air-btn-save\" type=\"primary\" @click=\"putUserForm('userForm')\">{{$t('manage.confirmSave')}}</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 添加修改管理员 -->\n    <el-dialog\n        :title=\" (adminForm.webOp===0? $t('manage.updateInfo'):$t('manage.add')) + $t('manage.adminInfo') \"\n        :visible.sync=\"showAdminDialog\"\n        width=\"500px\"\n    >\n      <el-form ref=\"adminForm\" :model=\"adminForm\" :rules=\"adminRules\" label-width=\"120px\" label-position=\"left\">\n\t\t\t\t<el-form-item label=\"Email\" prop=\"email\">\n\t\t\t\t\t<el-input v-model=\"adminForm.email\" :disabled=\"adminForm.webOp===0?true:false\" :placeholder=\"$t('manage.qsr15em')\" maxlength=\"100\"></el-input>\n\t\t\t\t</el-form-item>\n        <el-form-item :label=\"$t('manage.userName')\" prop=\"userName\">\n          <el-input v-model=\"adminForm.userName\" :disabled=\"adminForm.webOp===0?true:false\" :placeholder=\"$t('manage.qsr15uhm')\" maxlength=\"15\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.password')\" prop=\"password\" v-if=\"adminForm.webOp===0?false:true\">\n          <el-input show-password v-model=\"adminForm.password\" :placeholder=\"$t('manage.pwdRule')\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.confirmPassword')\" prop=\"passwordAg\" v-if=\"adminForm.webOp===0?false:true\">\n          <el-input show-password v-model=\"adminForm.passwordAg\" :placeholder=\"$t('manage.confirmPwdRule')\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.status')\" prop=\"status\">\n          <el-select v-model=\"adminForm.status\" :placeholder=\"$t('manage.selectStatus')\">\n            <el-option :label=\"$t('manage.enable')\" :value=\"1\"></el-option>\n            <el-option :label=\"$t('manage.disable')\" :value=\"0\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.rules')\" prop=\"roleId\">\n          <el-select v-model=\"adminForm.roleId\" :placeholder=\"$t('manage.selectRule')\">\n            <el-option v-for=\"item in roleSelect\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input type=\"textarea\" :row=\"3\" v-model=\"adminForm.remark\" :placeholder=\"$t('manage.remarkRule')\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"air-btn-cancel\" @click=\"showAdminDialog=false\">{{$t('manage.cancellation')}}</el-button>\n        <el-button class=\"air-btn-save\" type=\"primary\" @click=\"putAdminForm('adminForm')\">{{$t('manage.confirmSave')}}</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 修改密码弹窗 -->\n    <el-dialog :title=\"$t('manage.updatePwd')\"\n               :visible.sync=\"showPasswordDialog\"\n               width=\"500px\">\n      <el-form ref=\"passwordForm\" :model=\"passwordForm\" :rules=\"passwordRules\" label-width=\"120px\"\n               label-position=\"left\">\n        <el-form-item :label=\"$t('manage.userName')\" prop=\"userName\">\n          <el-input v-model=\"passwordForm.userName\" :disabled=\"true\" :placeholder=\"$t('manage.qsr15uhm')\"> maxlength=\"15\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.rules')\" prop=\"roleName\">\n          <el-input v-model=\"passwordForm.roleName\" :disabled=\"true\" :placeholder=\"$t('manage.qsrRule')\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.newpwd')\" prop=\"password\">\n          <el-input show-password v-model=\"passwordForm.password\" :placeholder=\"$t('manage.newpwdRule')\"></el-input>\n        </el-form-item>\n        <el-form-item :label=\"$t('manage.confirmPassword')\" prop=\"passwordAg\">\n          <el-input show-password v-model=\"passwordForm.passwordAg\" :placeholder=\"$t('manage.confirmPwdRule')\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button class=\"air-btn-cancel\" @click=\"showPasswordDialog=false\">{{$t('manage.cancellation')}}</el-button>\n        <el-button class=\"air-btn-save\" type=\"primary\" @click=\"putPassword('passwordForm')\">{{$t('manage.confirmSave')}}</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n\timport pagination from \"@/components/Pagination\";\n\timport CircularDropdown from \"@/components/CircularDropdown\";\n\timport {\n\t\tgetAdminList,\n\t\tgetRoleList,\n\t\taddAdmin,\n\t\tdelAdmin,\n\t\tupdateAdmin,\n\t\tgetTree,\n\t\taddRole,\n\t\tdelRole,\n\t\troleMenuTreeselect,\n\t\tupdateRole,\n\t\tchangePassword,\n\t} from \"@/api/auth\";\n\n\texport default {\n\t\tname: \"Auth\",\n\n\t\tcomponents: {\n\t\t\tCircularDropdown,\n\t\t\tpagination,\n\t\t},\n\n\t\tdata() {\n\t\t\tconst equalPassword = (rule, value, callback) => {\n        let reg = /^[^\\s]{8,20}$/;\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule')));\n\t\t\t\t} else {\n\t\t\t\t\tif (!reg.test(value)) {\n\t\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule2')));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.adminForm.passwordAg !== \"\") {\n\t\t\t\t\t\t\tthis.$refs.adminForm.validateField(\"passwordAg\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst equalToPassword = (rule, value, callback) => {\n        let reg = /^[^\\s]{8,20}$/;\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule2')));\n\t\t\t\t} else {\n\t\t\t\t\tif (!reg.test(value)) {\n\t\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule2')));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (value !== this.adminForm.password) {\n\t\t\t\t\t\t\tcallback(new Error(this.$t('manage.twopwdRule')));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst equalPassword2 = (rule, value, callback) => {\n\t\t\t\tlet reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule')));\n\t\t\t\t} else {\n\t\t\t\t\tif (!reg.test(value)) {\n\t\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule2')));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.passwordForm.passwordAg !== \"\") {\n\t\t\t\t\t\t\tthis.$refs.passwordForm.validateField(\"passwordAg\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst equalToPassword2 = (rule, value, callback) => {\n\t\t\t\tlet reg = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/;\n\t\t\t\tif (value === \"\") {\n\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule3')));\n\t\t\t\t} else {\n\t\t\t\t\tif (!reg.test(value)) {\n\t\t\t\t\t\tcallback(new Error(this.$t('manage.pwdRule2')));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (value !== this.passwordForm.password) {\n\t\t\t\t\t\t\tcallback(new Error(this.$t('manage.twopwdRule')));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tactiveName: \"0\",\n\t\t\t\tuserTableList: [],\n\t\t\t\tmanageTableList: [],\n\t\t\t\tmultipleSelection: [],\n\t\t\t\tloading: false,\n\t\t\t\toperationList: [\n\t\t\t\t\t{ \"label\": this.$t('manage.edit') , icon: \"edit\", value: 0 },\n\t\t\t\t\t{ \"label\": this.$t('manage.delete'), icon: \"remove\", value: 1 },\n\t\t\t\t],\n\t\t\t\toperationList2: [\n\t\t\t\t\t{ \"label\": this.$t('manage.edit'), icon: \"edit\", value: 0 },\n\t\t\t\t\t{ \"label\": this.$t('manage.delete'), icon: \"remove\", value: 1 },\n\t\t\t\t\t{ \"label\":  this.$t('manage.updatePwd'), icon: \"review\", value: 2 },\n\t\t\t\t],\n\t\t\t\ttotal: 0,\n\t\t\t\tform: {\n\t\t\t\t\tpageNum: 1,\n\t\t\t\t\tpageSize: 15,\n\t\t\t\t},\n\t\t\t\tuserForm: {},\n\t\t\t\tuserRules: {\n\t\t\t\t\tname: [{ required: true, message: this.$t('manage.ruleName'), trigger: \"blur\" }],\n\t\t\t\t\tstatus: [{ required: true, message: this.$t('manage.selectStatus'), trigger: \"change\" }],\n\t\t\t\t},\n\t\t\t\tshowUserDialog: false,\n\t\t\t\tshowPasswordDialog: false,\n\t\t\t\tpasswordForm: {},\n\t\t\t\tpasswordRules: {\n\t\t\t\t\tpassword: [\n\t\t\t\t\t\t{ required: true, message: this.$t('manage.pwdRule') , trigger: \"blur\" },\n\t\t\t\t\t\t{ required: true, validator: equalPassword2, trigger: \"blur\" },\n\t\t\t\t\t],\n\t\t\t\t\tpasswordAg: [\n\t\t\t\t\t\t{ required: true, message: this.$t('manage.pwdRule3'), trigger: \"blur\" },\n\t\t\t\t\t\t{ required: true, validator: equalToPassword2, trigger: \"blur\" },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tmenuOptions: [],\n\t\t\t\tmenuExpand: false,\n\t\t\t\tmenuNodeAll: false,\n\t\t\t\tshowAdminDialog: false, // 添加修改管理员弹窗\n\t\t\t\tadminForm: {},\n\t\t\t\tadminRules: {\n\t\t\t\t\tuserName: [{ required: true, message: this.$t('manage.adminRule'), trigger: \"blur\" }],\n\t\t\t\t\temail: [{ required: true, message: this.$t('manage.emailRule'), trigger: \"blur\" }],\n\t\t\t\t\tpassword: [\n\t\t\t\t\t\t{ required: true, message: this.$t('manage.pwdRule'), trigger: \"blur\" },\n\t\t\t\t\t\t{ required: true, validator: equalPassword, trigger: \"blur\" },\n\t\t\t\t\t],\n\t\t\t\t\tpasswordAg: [\n\t\t\t\t\t\t{ required: true, message: this.$t('manage.pwdRule3'), trigger: \"blur\" },\n\t\t\t\t\t\t{ required: true, validator: equalToPassword, trigger: \"blur\" },\n\t\t\t\t\t],\n\t\t\t\t\tstatus: [{ required: true, message:  this.$t('manage.selectStatus'), trigger: \"change\" }],\n\t\t\t\t\troleId: [{ required: true, message:  this.$t('manage.selectRule'), trigger: \"change\" }],\n\t\t\t\t\tdepartmentId: [{ required: true, message: this.$t('manage.selectBm'), trigger: \"change\" }],\n\t\t\t\t},\n\t\t\t\ttreeData: [],\n\t\t\t\tdefaultProps: {\n\t\t\t\t\tchildren: \"permissionList\",\n\t\t\t\t\tlabel: \"name\",\n\t\t\t\t},\n\t\t\t\troleSelect: [],\n\t\t\t};\n\t\t},\n\n\t\tcreated() {\n\t\t\tthis.getList();\n\n\t\t\tgetTree().then(result => {\n\t\t\t\tthis.treeData = result.data;\n\t\t\t});\n\n\t\t\tgetRoleList({ pageNum: 1, pageSize: 9999 })\n\t\t\t\t.then(result => {\n\t\t\t\t\tif (result.status === 200)\n\t\t\t\t\t\tthis.roleSelect = result.data.list;\n\t\t\t\t});\n\t\t},\n\n\t\twatch: {\n\t\t\tactiveName: function(newVal, oldVal) {\n\t\t\t\t// 每次切换tabs 初始化状态\n\t\t\t\tthis.form = {\n\t\t\t\t\tpageNum: 1,\n\t\t\t\t\tpageSize: 15,\n\t\t\t\t};\n\t\t\t\tthis.showScreen = false;\n\t\t\t\tthis.total = 0;\n\t\t\t\tthis.userTableList = [];\n\t\t\t\tthis.manageTableList = [];\n\t\t\t\tthis.multipleSelection = [];\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.getList();\n\t\t\t},\n\t\t\tshowAdminDialog: function(newVal, oldVal) {\n\t\t\t\tif (!newVal) {\n\t\t\t\t\tthis.adminForm = {};\n\t\t\t\t\tthis.$refs[\"adminForm\"].resetFields();\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs[\"adminForm\"].clearValidate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowUserDialog: function(newVal, oldVal) {\n\t\t\t\tif (!newVal) {\n\t\t\t\t\tthis.userForm = {};\n\t\t\t\t\tthis.$refs[\"userForm\"].resetFields();\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs[\"userForm\"].clearValidate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowPasswordDialog: function(newVal, oldVal) {\n\t\t\t\tif (!newVal) {\n\t\t\t\t\tthis.passwordForm = {};\n\t\t\t\t\tthis.$refs[\"passwordForm\"].resetFields();\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs[\"passwordForm\"].clearValidate();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\tmethods: {\n\t\t\tputPassword(formName) {\n\t\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.$changePassword();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t$changePassword: function() {\n\t\t\t\tchangePassword({\n\t\t\t\t\tid: this.passwordForm.id,\n\t\t\t\t\tpassword: this.passwordForm.password,\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.showPasswordDialog = false;\n\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t// 所有菜单节点数据\n\t\t\tgetMenuAllCheckedKeys() {\n\t\t\t\t// 目前被选中的菜单节点\n\t\t\t\tlet checkedKeys = this.$refs.menu.getCheckedKeys();\n\t\t\t\t// 半选中的菜单节点\n\t\t\t\tlet halfCheckedKeys = this.$refs.menu.getHalfCheckedKeys();\n\t\t\t\tcheckedKeys.unshift.apply(checkedKeys, halfCheckedKeys);\n\t\t\t\treturn checkedKeys;\n\t\t\t},\n\n\t\t\tputAdminForm(formName) {\n\t\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (this.adminForm.id) {\n\t\t\t\t\t\t\tthis.$updateAdmin();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$addAdmin();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t$addAdmin: function() {\n\t\t\t\taddAdmin(this.adminForm).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.showAdminDialog = false;\n\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t$updateAdmin: function() {\n\t\t\t\tupdateAdmin({\n\t\t\t\t\tid: this.adminForm.id,\n\t\t\t\t\tstatus: this.adminForm.status,\n\t\t\t\t\troleId: this.adminForm.roleId,\n\t\t\t\t\tdepartmentId: this.adminForm.departmentId,\n\t\t\t\t\tremark: this.adminForm.remark,\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.showAdminDialog = false;\n\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tputUserForm(formName) {\n\t\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tif (this.userForm.id) {\n\t\t\t\t\t\t\tthis.$updateRole();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$addRole();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t$updateRole: function() {\n\t\t\t\tupdateRole({\n\t\t\t\t\tid: this.userForm.id,\n\t\t\t\t\tname: this.userForm.name,\n\t\t\t\t\tstatus: this.userForm.status,\n\t\t\t\t\tpermissionIds: this.getMenuAllCheckedKeys(),\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\tthis.showUserDialog = false;\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t$addRole: function() {\n\t\t\t\taddRole({\n\t\t\t\t\tname: this.userForm.name,\n\t\t\t\t\tstatus: this.userForm.status,\n\t\t\t\t\tpermissionIds: this.getMenuAllCheckedKeys(),\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\tthis.showUserDialog = false;\n\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t// 勾选table\n\t\t\thandleSelectionChange(val) {\n\t\t\t\tthis.multipleSelection = val;\n\t\t\t},\n\n\t\t\t// 根据角色Id请求树形结构\n\t\t\tgetRoleMenuTreeselect(roleId) {\n\t\t\t\treturn roleMenuTreeselect({ id: roleId }).then(response => {\n\t\t\t\t\tthis.menuOptions = response.data.permissionList;\n\t\t\t\t\treturn response;\n\t\t\t\t});\n\t\t\t},\n\n\t\t\toperateScope(params) {\n\t\t\t\tif (params.command.value === 0) {\n\t\t\t\t\tlet data = this._.cloneDeep(params.data);\n\t\t\t\t\tdata[\"webOp\"] = 0;\n\t\t\t\t\tthis.userForm = data;\n\t\t\t\t\tconst roleId = params.data.id;\n\t\t\t\t\tconst roleMenu = this.getRoleMenuTreeselect(roleId);\n\t\t\t\t\tthis.showUserDialog = true;\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\troleMenu.then(res => {\n\t\t\t\t\t\t\tlet checkedKeys = res.data.permissionList;\n\t\t\t\t\t\t\tcheckedKeys.forEach((v) => {\n\t\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t\tthis.$refs.menu.setChecked(v, true, false);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else if (params.command.value === 1) {\n\t\t\t\t\t// 删除角色\n\t\t\t\t\tthis.$confirm(this.$t('manage.confirmDeleteRule'), this.$t('manage.prompt'), {\n\t\t\t\t\t\tconfirmButtonText: this.$t('manage.determine'),\n\t\t\t\t\t\tcancelButtonText: this.$t('manage.close'),\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tdelRole({\n\t\t\t\t\t\t\tid: params.data.id,\n\t\t\t\t\t\t}).then(result => {\n\t\t\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync operateScope2(params) {\n\t\t\t\tif (params.command.value === 0) {\n\t\t\t\t\t// 编辑管理员\n\t\t\t\t\tlet data = this._.cloneDeep(params.data);\n\t\t\t\t\tdata[\"webOp\"] = 0;\n\t\t\t\t\tthis.adminForm = data;\n\t\t\t\t\tthis.showAdminDialog = true;\n\t\t\t\t} else if (params.command.value === 1) {\n\t\t\t\t\t// 删除管理员\n\t\t\t\t\tthis.$confirm(this.$t('manage.confirmDeleteAdmin'), this.$t('manage.prompt'), {\n\t\t\t\t\t\tconfirmButtonText: this.$t('manage.determine'),\n\t\t\t\t\t\tcancelButtonText:  this.$t('manage.close'),\n\t\t\t\t\t\ttype: \"warning\",\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tdelAdmin({\n\t\t\t\t\t\t\tid: params.data.id,\n\t\t\t\t\t\t}).then(result => {\n\t\t\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\t\t\tthis.$message.success(result.data);\n\t\t\t\t\t\t\t\tthis.getList();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else if (params.command.value === 2) {\n\t\t\t\t\t// 修改密码\n\t\t\t\t\tlet data = this._.cloneDeep(params.data);\n\t\t\t\t\tthis.passwordForm = data;\n\t\t\t\t\tthis.showPasswordDialog = true;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tgetList() {\n\t\t\t\tif (this.activeName === \"0\") {\n\t\t\t\t\tthis.$getRoleList();\n\t\t\t\t} else if (this.activeName === \"1\") {\n\t\t\t\t\tthis.$getAdminList();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t$getAdminList() {\n\t\t\t\tthis.loading = true;\n\t\t\t\tgetAdminList({\n\t\t\t\t\t...this.form,\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.manageTableList = result.data.list;\n\t\t\t\t\t\tthis.total = result.data.total;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t$getRoleList() {\n\t\t\t\tgetRoleList({\n\t\t\t\t\t...this.form,\n\t\t\t\t}).then(result => {\n\t\t\t\t\tif (result.status === 200) {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t\tthis.userTableList = result.data.list;\n\t\t\t\t\t\tthis.total = result.data.total;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\t// 树权限（展开/折叠）\n\t\t\thandleCheckedTreeExpand(value, type) {\n\t\t\t\tif (type === \"menu\") {\n\t\t\t\t\tlet treeList = this.treeData;\n\t\t\t\t\tfor (let i = 0; i < treeList.length; i++) {\n\t\t\t\t\t\tthis.$refs.menu.store.nodesMap[treeList[i].id].expanded = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 树权限（全选/全不选）\n\t\t\thandleCheckedTreeNodeAll(value, type) {\n\t\t\t\tif (type === \"menu\") {\n\t\t\t\t\tthis.$refs.menu.setCheckedNodes(value ? this.treeData : []);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 树权限（父子联动）\n\t\t\thandleCheckedTreeConnect(value, type) {\n\t\t\t\tif (type == \"menu\") {\n\t\t\t\t\tthis.form.menuCheckStrictly = value ? true : false;\n\t\t\t\t} else if (type == \"dept\") {\n\t\t\t\t\ttssshis.form.deptCheckStrictly = value ? true : false;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n</script>\n\n<style scoped lang=\"less\">\n  @import \"../../assets/styles/template\";\n</style>\n"]}]}