{"remainingRequest":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/IdeaProjects/onLinePayMerchant/src/components/SearchComponent/index.vue?vue&type=style&index=0&id=67330678&lang=less","dependencies":[{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/src/components/SearchComponent/index.vue","mtime":1719459514517},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/IdeaProjects/onLinePayMerchant/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5zZWFyY2gtZm9ybSB7Cgkuc2VhcmNoLWZvcm0td3JhcHBlciB7CgkJcGFkZGluZzogMTZweCAxMDBweCAwIDI0cHg7CgkJYm94LXNpemluZzogYm9yZGVyLWJveDsKCQlkaXNwbGF5OiBmbGV4OwoJCWZsZXgtd3JhcDogd3JhcDsKCX0KCgkuYmctRjhGOUZDIHsKCQliYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZjOwoJfQoKCS5jbGVhcmZpeCB7CgkJem9vbTogMTsKCX0KCgkucHIgewoJCXBvc2l0aW9uOiByZWxhdGl2ZTsKCX0KCgkuYmF0Y2gtYnRuIHsKCQlwYWRkaW5nOiA0cHggIWltcG9ydGFudDsKCQlib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKCQliYWNrZ3JvdW5kLWNvbG9yOiAjN2Y4ZGZmICFpbXBvcnRhbnQ7CgkJY29sb3I6ICNmZmYgIWltcG9ydGFudDsKCQltYXJnaW4tbGVmdDogNXB4ICFpbXBvcnRhbnQ7Cgl9CgoJLmVsLWZvcm0taXRlbSB7CgkJbWFyZ2luLXJpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7CgkJZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7CgkJdmVydGljYWwtYWxpZ246IHRvcCAhaW1wb3J0YW50OwoJfQoKCS5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgewoJCWxpbmUtaGVpZ2h0OiAzNnB4OwoJfQoKCS5lbC1pbnB1dCB7CgkJbGluZS1oZWlnaHQ6IDM2cHg7Cgl9CgoJLmVsLWlucHV0X19pbm5lciB7CgkJaGVpZ2h0OiAzNnB4OwoJCWxpbmUtaGVpZ2h0OiAzNnB4OwoJfQoKCS5kYXRlcmFuZ2UtdyB7CgkJd2lkdGg6IDI4MHB4ICFpbXBvcnRhbnQ7Cgl9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAkfA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/SearchForm","sourcesContent":["// label：form的label内容(必填)\n// prop: 值(必填)\n// type: 什么类型的框(必填)\n// width: 框的宽度（默认150px、233px）（可填）\n// btn: 是否显示批量输入按钮（可填）\n// maxLength: 最大长度（默认20位）（可填）\n// placeholder: 提示（可填）\n// linkage(商户联动必填，其余不填)\n// change(select联动给后面的input的赋自己value的值，多选change='checkout',其余的不填)\n// Vshow（判断当前是否显示）\n// default（select的默认值。取值下标）\n// dicData（select传输数据，异步使用()=>）\n// pickerOptions: 时间180多少天前可以点击\n// multiple select是否多选择\n<template>\n\t<div class=\"search-form\">\n\t\t<el-form :inline=\"true\" :model=\"formInline\">\n\t\t\t<div class=\"bg-F8F9FC search-form-wrapper clearfix pr\">\n\t\t\t\t<div v-for=\"(item, index) in formInline.column\" :key=\"item.prop\">\n\t\t\t\t\t<el-form-item\n\t\t\t\t\t\t:label=\"item.label ? item.label + '：' : ''\"\n\t\t\t\t\t\tv-if=\"item.hasOwnProperty('Vshow') === false || item.Vshow === true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- input || textarea-->\n\t\t\t\t\t\t<template v-if=\"item.type === 'input' || item.type === 'textarea'\">\n\t\t\t\t\t\t\t<!-- input -->\n\t\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t\t\tv-if=\"item.type === 'input'\"\n\t\t\t\t\t\t\t\t:style=\"{ width: item.width ? item.width + 'px' : '150px' }\"\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\t:placeholder=\" (item.placeholder ? item.placeholder : item.label)\"\n\t\t\t\t\t\t\t\t:maxlength=\"item.maxLength ? item.maxLength : 200\"\n\t\t\t\t\t\t\t\t@blur=\"handleInputBlur(item.linkage ? true : false, item[item.prop])\"\n\t\t\t\t\t\t\t></el-input>\n\t\t\t\t\t\t\t<!-- textarea -->\n\t\t\t\t\t\t\t<el-input\n\t\t\t\t\t\t\t\tv-if=\"item.type === 'textarea'\"\n\t\t\t\t\t\t\t\ttype=\"textarea\"\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\t:placeholder=\"(item.placeholder ? item.placeholder : item.label)\"\n\t\t\t\t\t\t\t\t:style=\"{ width: item.width ? item.width + 'px' : '300px' }\"\n\t\t\t\t\t\t\t\t:maxlength=\"item.maxLength ? item.maxLength : 200\"\n\t\t\t\t\t\t\t></el-input>\n\t\t\t\t\t\t\t<template v-if=\"item.btn\">\n\t\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\t\tclass=\"batch-btn\"\n\t\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\t\ticon=\"el-icon-plus\"\n\t\t\t\t\t\t\t\t\tcircle\n\t\t\t\t\t\t\t\t\t@click=\"openTextareaDialog('user', index, item.prop, item.linkage ? true : false)\"\n\t\t\t\t\t\t\t\t></el-button>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<!-- 商户联动 -->\n\t\t\t\t\t\t\t<template v-if=\"item.linkage\">\n\t\t\t\t\t\t\t\t<el-select\n\t\t\t\t\t\t\t\t\tfilterable\n\t\t\t\t\t\t\t\t\tremote\n\t\t\t\t\t\t\t\t\t:remote-method=\"remoteMethod\"\n\t\t\t\t\t\t\t\t\tv-model=\"item.subMerNo\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$t('searchFrom.selectPlaceholder')\"\n\t\t\t\t\t\t\t\t\t:style=\"[{ width: item.width ? item.width + 'px' : '150px' }, { marginLeft: '10px' }]\"\n\t\t\t\t\t\t\t\t\t:disabled=\"linkAgeSelect\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\t\tv-for=\"item in childMerchantSelect\"\n\t\t\t\t\t\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t\t\t\t\t\t:value=\"item.value\"\n\t\t\t\t\t\t\t\t\t></el-option>\n\t\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- select -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'select'\">\n\t\t\t\t\t\t\t<el-select\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\t:multiple=\"item.multiple\"\n\t\t\t\t\t\t\t\t:collapse-tags=\"item.multiple\"\n\t\t\t\t\t\t\t\t:placeholder=\"\t(item.placeholder ? item.placeholder : item.label)\"\n\t\t\t\t\t\t\t\t:style=\"{ width: item.width ? item.width + 'px' : '150px' }\"\n\t\t\t\t\t\t\t\t@change=\"handleSelectChange($event,item.change ? true : false)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<el-option\n\t\t\t\t\t\t\t\t\tv-for=\"(sel_item, index) in Array.isArray(item.dicData) ? item.dicData : item.dicData()\"\n\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t:label=\"sel_item == '' ? '' : sel_item.label ? sel_item.label : ''\"\n\t\t\t\t\t\t\t\t\t:value=\"sel_item.value ? sel_item.value : null\"\n\t\t\t\t\t\t\t\t></el-option>\n\t\t\t\t\t\t\t</el-select>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- DatePicker 日期选择器 -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'picker'\">\n\t\t\t\t\t\t\t<el-date-picker\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t:placeholder=\"$t('searchFrom.selectLabel') + (item.placeholder ? item.placeholder : item.label) + $t('searchFrom.dateLabel')\"\n\t\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:editable=\"false\"\n\t\t\t\t\t\t\t\t:style=\"{ width: item.width ? item.width + 'px' : '233px' }\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</el-date-picker>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- DateTimePicker 日期时间选择器 -->\n<!--\t\t\t\t\t\t没翻译4-->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'datetimerange'\">\n\t\t\t\t\t\t\t<el-date-picker\n\t\t\t\t\t\t\t\tclass=\"airclick-data-picker\"\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\ttype=\"datetimerange\"\n\t\t\t\t\t\t\t\t:range-separator=\"$t('searchFrom.dateSeparator')\"\n\t\t\t\t\t\t\t\t:start-placeholder=\"$t('searchFrom.startDatePlaceholder')\"\n\t\t\t\t\t\t\t\t:end-placeholder=\"$t('searchFrom.endDatePlaceholder')\"\n\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-date\"\n\t\t\t\t\t\t\t\tformat=\"yyyy-MM-dd HH:mm:ss\"\n\t\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd HH:mm:ss\"\n\t\t\t\t\t\t\t\t:default-time=\"['00:00:00', '23:59:59']\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:editable=\"false\"\n\t\t\t\t\t\t\t\tunlink-panels\n\t\t\t\t\t\t\t\t:picker-options=\"item.pickerOptions ? pickerOptions : ''\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</el-date-picker>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- daterange 日期时间选择器 -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'daterange'\">\n\t\t\t\t\t\t\t<el-date-picker\n\t\t\t\t\t\t\t\tclass=\"airclick-data-picker daterange-w\"\n\t\t\t\t\t\t\t\tv-model=\"item[item.prop]\"\n\t\t\t\t\t\t\t\ttype=\"daterange\"\n\t\t\t\t\t\t\t\t:range-separator=\"$t('searchFrom.dateSeparator')\"\n\t\t\t\t\t\t\t\t:start-placeholder=\"$t('searchFrom.startDatePlaceholder')\"\n\t\t\t\t\t\t\t\t:end-placeholder=\"$t('searchFrom.endDatePlaceholder')\"\n\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-date\"\n\t\t\t\t\t\t\t\tformat=\"yyyy-MM-dd\"\n\t\t\t\t\t\t\t\tvalue-format=\"yyyy-MM-dd\"\n\t\t\t\t\t\t\t\t:clearable=\"false\"\n\t\t\t\t\t\t\t\t:editable=\"false\"\n\t\t\t\t\t\t\t\tunlink-panels\n\t\t\t\t\t\t\t\t:picker-options=\"item.pickerOptions ? pickerOptions : ''\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</el-date-picker>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- Switch 开关 -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'switch'\">\n\t\t\t\t\t\t\t<el-switch v-model=\"item[item.prop]\" active-value=\"1\" inactive-value=\"0\"></el-switch>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- Checkbox 多选框 -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'checkbox'\">\n\t\t\t\t\t\t\t<el-checkbox-group v-model=\"item[item.prop]\">\n\t\t\t\t\t\t\t\t<el-checkbox\n\t\t\t\t\t\t\t\t\tv-for=\"check_item in item.dicData\"\n\t\t\t\t\t\t\t\t\t:key=\"check_item.value\"\n\t\t\t\t\t\t\t\t\t:label=\"check_item.label\"\n\t\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\t></el-checkbox>\n\t\t\t\t\t\t\t</el-checkbox-group>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- Radio 单选框 -->\n\t\t\t\t\t\t<template v-else-if=\"item.type === 'radio'\">\n\t\t\t\t\t\t\t<el-radio-group v-model=\"item[item.prop]\">\n\t\t\t\t\t\t\t\t<el-radio\n\t\t\t\t\t\t\t\t\tv-for=\"radio_item in item.dicData\"\n\t\t\t\t\t\t\t\t\t:key=\"radio_item.value\"\n\t\t\t\t\t\t\t\t\t:label=\"radio_item.label\"\n\t\t\t\t\t\t\t\t></el-radio>\n\t\t\t\t\t\t\t</el-radio-group>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t</div>\n\n\t\t\t\t<!--重置 -- 搜索按钮 -->\n\t\t\t\t<redo-and-search @reset=\"resetParams\" @searchList=\"getList({}, 1)\"></redo-and-search>\n\t\t\t</div>\n\t\t</el-form>\n\t\t<!-- 批量输入 -->\n\t\t<textarea-dialog\n\t\t\t:textareaDialogVisible.sync=\"textareaDialogVisible\"\n\t\t\t:type=\"textareaDialogType\"\n\t\t\t:index=\"textareaDialogIndex\"\n\t\t\t:prop=\"textareaDialogProp\"\n\t\t\t:linkage=\"textareaDialogLinkage\"\n\t\t\t@batch=\"batchBackfilling\"\n\t\t></textarea-dialog>\n\t</div>\n</template>\n\n<script>\nimport TextareaDialog from \"@/components/TextareaDialog/TextareaDialog\";\nimport RedoAndSearch from \"@/components/RedoAndSearch\";\nimport { mapGetters } from \"vuex\";\nimport { getQueryAccount } from \"@/api/business\";\n\nexport default {\n\tprops: [\"option\", \"formSearch\"],\n\tcomponents: {\n\t\tTextareaDialog,\n\t\tRedoAndSearch,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttextareaDialogType: undefined, // 批量输入的字段回调(key)\n\t\t\ttextareaDialogIndex: undefined, // 批量输入的字段回调(Index)\n\t\t\ttextareaDialogProp: undefined, // 批量输入的字段回调(prop)\n\t\t\ttextareaDialogLinkage: false, //批量输入的字段回调(linkage)\n\t\t\ttextareaDialogVisible: false, // 控制批量输入的显示和影藏\n\t\t\tformInline: {}, //传过来的参数\n\t\t\tchildMerchantSelect: [], //子商户联动数据\n\t\t\tlinkAgeSelect: true,//联动是否禁止输入\n\t\t\tpickerOptions: {\n\t\t\t\tdisabledDate: (time) => {\n\t\t\t\t\tlet nowDate = new Date(); //现在时间\n\t\t\t\t\tlet oneDay = 1000 * 60 * 60 * 24; //一天时间\n\t\t\t\t\tlet oneYearLater = new Date(nowDate.getTime() - (oneDay * this.limitTime));\n\t\t\t\t\treturn nowDate <= time.getTime() || oneYearLater <= time.getTime();//注意是||不是&&\n\t\t\t\t},\n\t\t\t},\n\t\t\tlimitTime: 0,\n\t\t\toldSelectArray: [],//缓存一份多选的select数据\n\t\t};\n\t},\n\tcreated() {\n\t\t// 初始化值\n\t\tthis.option.column.map(item => {\n\t\t\t// 给每个元素添加一个prop为键的字段，如果有linkage，在添加一个subMerNo\n\t\t\tif (item.linkage) {\n\t\t\t\tthis.$set(item, \"subMerNo\", \"\");\n\t\t\t\tthis.$set(item, item.prop, \"\");\n\t\t\t} else {\n\t\t\t\tthis.$set(item, item.prop, \"\");\n\t\t\t}\n\t\t\t// 时间默认\n\t\t\tif (item.type === \"datetimerange\") {\n\t\t\t\tif (item.pickerOptions) {\n\t\t\t\t\tthis.limitTime = item.pickerOptions;\n\t\t\t\t\titem[item.prop] = [\n\t\t\t\t\t\tthis.dayjs(new Date().getTime() - 1000 * 60 * 60 * 24 * item.pickerOptions).format(\"YYYY-MM-DD\") + \" 00:00:00\",\n\t\t\t\t\t\tthis.dayjs(new Date().getTime() - 1000 * 60 * 60 * 24 * item.pickerOptions).format(\"YYYY-MM-DD\") + ` ${new Date().getHours()}:${new Date().getMinutes()}:${new Date().getSeconds()}`,\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\t\t\t\t\titem[item.prop] = [\n\t\t\t\t\t\tthis.dayjs().format(\"YYYY-MM-DD\") + \" 00:00:00\",\n\t\t\t\t\t\tthis.dayjs().format(\"YYYY-MM-DD\") + \" 23:59:59\",\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t\tif(item.hasOwnProperty(\"default\")){\n\t\t\t\t\titem[item.prop] = item.default\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.type === \"daterange\") {\n\t\t\t\tif (item.pickerOptions) {\n\t\t\t\t\tthis.limitTime = item.pickerOptions;\n\t\t\t\t\titem[item.prop] = [\n\t\t\t\t\t\tthis.dayjs(new Date().getTime() - 1000 * 60 * 60 * 24 * item.pickerOptions).format(\"YYYY-MM-DD\"),\n\t\t\t\t\t\tthis.dayjs(new Date().getTime() - 1000 * 60 * 60 * 24 * item.pickerOptions).format(\"YYYY-MM-DD\"),\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\titem[item.prop] = [\n\t\t\t\t\t\tthis.dayjs().format(\"YYYY-MM-DD\"),\n\t\t\t\t\t\tthis.dayjs().format(\"YYYY-MM-DD\"),\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 默认值\n\t\t\tif (item.type === \"switch\") {\n\t\t\t\titem[item.prop] = \"0\";\n\t\t\t}\n\t\t\t// 默认数据格式\n\t\t\tif (item.type === \"checkbox\") {\n\t\t\t\titem[item.prop] = [];\n\t\t\t}\n\t\t\t// select默认值\n\t\t\tif (item.type === \"select\" && item.hasOwnProperty(\"default\")) {\n\t\t\t\tif (item.multiple){\n\t\t\t\t\tif (Array.isArray(item.dicData)) {\n\t\t\t\t\t\titem[item.prop] = item.default.map(index => item.dicData[index]?.value);\n\t\t\t\t\t} else if (typeof item.dicData === \"function\") {\n\t\t\t\t\t\titem[item.prop] = item.default.map(index => item.dicData()[index]?.value);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\titem[item.prop] = Array.isArray(item.dicData) ? item.dicData[item.default]?.value : item.dicData()[item.default]?.value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.formInline = this.option;\n\t\tthis.getList();\n\t},\n\tmethods: {\n\t\t// 批量输入回调\n\t\tbatchBackfilling(params) {\n\t\t\tthis.formInline.column[params.index][params.prop] = params.str;\n\t\t\tif (params.linkage) {\n\t\t\t\t// 联动前面的有值\n\t\t\t\tif (params.str) {\n\t\t\t\t\t// 此处使用接口给select联动添加值\n\t\t\t\t\tgetQueryAccount({\n\t\t\t\t\t\tmerNo: params.str,\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tlet newData = res.data.map(item => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: item,\n\t\t\t\t\t\t\t\tvalue: item,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.unshift({\n\t\t\t\t\t\t\tlabel: \"所有\",\n\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.childMerchantSelect = newData;\n\t\t\t\t\t\t// 失去焦点默认为所有\n\t\t\t\t\t\tthis.formInline.column.map(item => {\n\t\t\t\t\t\t\tif (item.linkage) {\n\t\t\t\t\t\t\t\titem.subMerNo = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// 让联动可以输入\n\t\t\t\t\t\tthis.linkAgeSelect = false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 联动前面没值\n\t\t\t\t\tthis.childMerchantSelect = []; //清空后面的数据\n\t\t\t\t\t// 失去焦点清空\n\t\t\t\t\tthis.formInline.column.map(item => {\n\t\t\t\t\t\tif (item.linkage) {\n\t\t\t\t\t\t\titem.subMerNo = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// 让联动禁止输入\n\t\t\t\t\tthis.linkAgeSelect = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.textareaDialogVisible = false;\n\t\t},\n\t\t// 打开批量输入的弹窗\n\t\topenTextareaDialog(params, index, prop, linkage) {\n\t\t\tthis.textareaDialogType = params;\n\t\t\tthis.textareaDialogIndex = index;\n\t\t\tthis.textareaDialogProp = prop;\n\t\t\tthis.textareaDialogLinkage = linkage;\n\t\t\tthis.textareaDialogVisible = true;\n\t\t},\n\t\t// 重置筛选条件\n\t\tresetParams() {\n\t\t\tthis.formInline.column.forEach((item, index) => {\n\t\t\t\tif (item.type === \"datetimerange\") {\n\t\t\t\t\titem[item.prop] = [this.dayjs().format(\"YYYY-MM-DD\") + \" 00:00:00\", this.dayjs().format(\"YYYY-MM-DD\") + \" 23:59:59\"];\n\t\t\t\t} else if (item.type === \"daterange\") {\n\t\t\t\t\titem[item.prop] = [this.dayjs().format(\"YYYY-MM-DD\"), this.dayjs().format(\"YYYY-MM-DD\")];\n\t\t\t\t} else {\n\t\t\t\t\t// 如果有联动的\n\t\t\t\t\tif (item.linkage) {\n\t\t\t\t\t\tthis.formInline.column[index][\"subMerNo\"] = \"\";\n\t\t\t\t\t\tthis.formInline.column[index][item.prop] = \"\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formInline.column[index][item.prop] = \"\";\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 分页请求\n\t\tgetList(isChangeSize = 0) {\n\t\t\t// 当传过来1时重置当前页\n\t\t\tif (isChangeSize) this.formSearch.pageNum = 1;\n\t\t\t// 存放每个框的值，键值对为prop的值：value\n\t\t\tlet newFormInline = {};\n\t\t\t// 把所有数据放在一个对象中\n\t\t\tfor (let i = 0; i < this.formInline.column.length; i++) {\n\t\t\t\tlet columnItem = this.formInline.column[i];\n\t\t\t\tif (columnItem.linkage) {\n\t\t\t\t\t// 处理商户联动数据\n\t\t\t\t\tnewFormInline[columnItem.prop] = columnItem[columnItem.prop];\n\t\t\t\t\tnewFormInline.subMerNo = columnItem.subMerNo;\n\t\t\t\t\tif (((newFormInline.merno || newFormInline.merNo) && newFormInline.subMerNo) && (newFormInline.merno || newFormInline.merNo) === newFormInline.subMerNo.toString()) {\n\t\t\t\t\t\tnewFormInline.subMerNo = \"0\";\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 平常赋值\n\t\t\t\t\tnewFormInline[columnItem.prop] = columnItem[columnItem.prop];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 把分页数据和搜索数据放在一起\n\t\t\tlet newFormSearch = { ...newFormInline, ...this.formSearch };\n\t\t\t// 删除对象中数据为空的\n\t\t\tfor (let key in newFormSearch) {\n\t\t\t\tif (newFormSearch[key] == \"\") {\n\t\t\t\t\tdelete newFormSearch[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$emit(\"getSearchForm\", newFormSearch);\n\t\t},\n\t\t// input失去焦点触发\n\t\thandleInputBlur(bool, value) {\n\t\t\tif (bool) {\n\t\t\t\t// 联动前面的有值\n\t\t\t\tif (value) {\n\t\t\t\t\t// 此处使用接口给select联动添加值\n\t\t\t\t\tgetQueryAccount({\n\t\t\t\t\t\tmerNo: value,\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tlet newData = res.data.map(item => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: item,\n\t\t\t\t\t\t\t\tvalue: item,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewData.unshift({\n\t\t\t\t\t\t\tlabel: \"所有\",\n\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.childMerchantSelect = newData;\n\t\t\t\t\t\t// 失去焦点默认为所有\n\t\t\t\t\t\tthis.formInline.column.map(item => {\n\t\t\t\t\t\t\tif (item.linkage) {\n\t\t\t\t\t\t\t\titem.subMerNo = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// 让联动可以输入\n\t\t\t\t\t\tthis.linkAgeSelect = false;\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 联动前面没值\n\t\t\t\t\tthis.childMerchantSelect = []; //清空后面的数据\n\t\t\t\t\t// 失去焦点为空\n\t\t\t\t\tthis.formInline.column.map(item => {\n\t\t\t\t\t\tif (item.linkage) {\n\t\t\t\t\t\t\titem.subMerNo = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// 让联动禁止输入\n\t\t\t\t\tthis.linkAgeSelect = true;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// select的change事件\n\t\thandleSelectChange($event, bool) {\n\t\t\tif (bool) {\n\t\t\t\t// select前面选择好了，后面的的联动入值前面的value值\n\t\t\t\tthis.formInline.column.map((item, index) => {\n\t\t\t\t\t// select多选择，并且包含全选择，全取消功能\n\t\t\t\t\tif (item[item.prop] instanceof Array && item.type === \"select\") {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t* 总共就4种状态\n\t\t\t\t\t\t* \t1. 当我们选择所有，也就是包含0时，直接把所有的值赋值进去\n\t\t\t\t\t\t* \t2. 判断缓存有0，新的没有0，是清空所有\n\t\t\t\t\t\t* \t3.缓存有0，新的有0，是在都选中的时候，在点击其他的，把所有按钮取消，在把点击的取消\n\t\t\t\t\t\t* \t4. 当缓存没有0，新的没有0。并且新的长度===所有的长度-1，就是说把下面都选中后要把所有的点亮\n\t\t\t\t\t\t* */\n\t\t\t\t\t\tlet allValues = Array.isArray(item.dicData) ? item.dicData.map(mapItem => mapItem.value) : item.dicData().map(mapItem => mapItem.value)\n\t\t\t\t\t\tallValues = [\"0\"].concat(allValues);\n\t\t\t\t\t\t// 若是全部选择\n\t\t\t\t\t\tif ($event.includes(\"0\")) {\n\t\t\t\t\t\t\titem[item.prop] = allValues;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 当缓存的select有‘0’，并且点击change里面不包含0时，取消全选\n\t\t\t\t\t\tif (this.oldSelectArray.includes(\"0\") && !$event.includes(\"0\")) {\n\t\t\t\t\t\t\titem[item.prop] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 当缓存的select有‘0’，并且点击change里面包含0时，把change里面数据赋值并且过滤掉‘0’\n\t\t\t\t\t\tif (this.oldSelectArray.includes(\"0\") && $event.includes(\"0\")) {\n\t\t\t\t\t\t\titem[item.prop] = $event;\n\t\t\t\t\t\t\titem[item.prop] = item[item.prop].filter(d => d !== \"0\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 当缓存的select没有‘0’，并且点击change里面不包含0时\n\t\t\t\t\t\tif (!this.oldSelectArray.includes(\"0\") && !$event.includes(\"0\")) {\n\t\t\t\t\t\t\t// 当选中的length === 所有的length-1\n\t\t\t\t\t\t\tif ($event.length === allValues.length - 1) {\n\t\t\t\t\t\t\t\t// 把‘0’也拼接进去\n\t\t\t\t\t\t\t\titem[item.prop] = [\"0\"].concat($event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 缓存一份多选的select数据\n\t\t\t\t\t\tthis.oldSelectArray = item[item.prop];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.formInline.column.map((_item, _index) => {\n\t\t\t\t\t\t\tif (item.prop === _item.chengeValue) {\n\t\t\t\t\t\t\t\tthis.formInline.column[_index][this.formInline.column[_index].prop] =\n\t\t\t\t\t\t\t\t\tthis.formInline.column[index][this.formInline.column[index].prop];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 联动搜索\n\t\tremoteMethod(query) {\n\t\t\tif (query !== \"\") {\n\t\t\t\tthis.childMerchantSelect = this.childMerchantSelect.filter(item => {\n\t\t\t\t\treturn item.label.toString().indexOf(query) > -1;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.childMerchantSelect = [];\n\t\t\t}\n\t\t},\n\t},\n};\n</script>\n<style lang=\"less\">\n.search-form {\n\t.search-form-wrapper {\n\t\tpadding: 16px 100px 0 24px;\n\t\tbox-sizing: border-box;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.bg-F8F9FC {\n\t\tbackground-color: #f8f9fc;\n\t}\n\n\t.clearfix {\n\t\tzoom: 1;\n\t}\n\n\t.pr {\n\t\tposition: relative;\n\t}\n\n\t.batch-btn {\n\t\tpadding: 4px !important;\n\t\tborder: none !important;\n\t\tbackground-color: #7f8dff !important;\n\t\tcolor: #fff !important;\n\t\tmargin-left: 5px !important;\n\t}\n\n\t.el-form-item {\n\t\tmargin-right: 24px !important;\n\t\tdisplay: inline-block !important;\n\t\tvertical-align: top !important;\n\t}\n\n\t.el-form-item__content {\n\t\tline-height: 36px;\n\t}\n\n\t.el-input {\n\t\tline-height: 36px;\n\t}\n\n\t.el-input__inner {\n\t\theight: 36px;\n\t\tline-height: 36px;\n\t}\n\n\t.daterange-w {\n\t\twidth: 280px !important;\n\t}\n}\n</style>\n"]}]}